!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require){"use strict";var Ractive=require("ractive"),md5=require("MD5"),hex2words=require("hex2words"),generate=function(input){var wordlist,stringType;try{wordlist=hex2words(input),stringType="hex"}catch(e){wordlist=hex2words(md5(input)),stringType="text"}var out;if(wordlist.length>0){for(var words=[],i=0;i<wordlist.length;i+=2)words.push({wordone:wordlist[i],wordtwo:wordlist[i+1]});out={words:words,stringType:stringType}}return out},theform=new Ractive({el:"main",template:"#the-form",data:{}});theform.observe("input",function(newValue,oldValue){if(null===newValue||""===newValue)theform.set({words:null});else if(newValue!==oldValue){var words=generate(newValue);words.words&&theform.set(words)}})},{MD5:2,hex2words:5,ractive:7}],2:[function(require,module){(function(Buffer){!function(){var crypt=require("crypt"),utf8=require("charenc").utf8,bin=require("charenc").bin,md5=function(message,options){message.constructor==String?message=options&&"binary"===options.encoding?bin.stringToBytes(message):utf8.stringToBytes(message):"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(message)?message=Array.prototype.slice.call(message,0):Array.isArray(message)||(message=message.toString());for(var m=crypt.bytesToWords(message),l=8*message.length,a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<m.length;i++)m[i]=16711935&(m[i]<<8|m[i]>>>24)|4278255360&(m[i]<<24|m[i]>>>8);m[l>>>5]|=128<<l%32,m[(l+64>>>9<<4)+14]=l;for(var FF=md5._ff,GG=md5._gg,HH=md5._hh,II=md5._ii,i=0;i<m.length;i+=16){var aa=a,bb=b,cc=c,dd=d;a=FF(a,b,c,d,m[i+0],7,-680876936),d=FF(d,a,b,c,m[i+1],12,-389564586),c=FF(c,d,a,b,m[i+2],17,606105819),b=FF(b,c,d,a,m[i+3],22,-1044525330),a=FF(a,b,c,d,m[i+4],7,-176418897),d=FF(d,a,b,c,m[i+5],12,1200080426),c=FF(c,d,a,b,m[i+6],17,-1473231341),b=FF(b,c,d,a,m[i+7],22,-45705983),a=FF(a,b,c,d,m[i+8],7,1770035416),d=FF(d,a,b,c,m[i+9],12,-1958414417),c=FF(c,d,a,b,m[i+10],17,-42063),b=FF(b,c,d,a,m[i+11],22,-1990404162),a=FF(a,b,c,d,m[i+12],7,1804603682),d=FF(d,a,b,c,m[i+13],12,-40341101),c=FF(c,d,a,b,m[i+14],17,-1502002290),b=FF(b,c,d,a,m[i+15],22,1236535329),a=GG(a,b,c,d,m[i+1],5,-165796510),d=GG(d,a,b,c,m[i+6],9,-1069501632),c=GG(c,d,a,b,m[i+11],14,643717713),b=GG(b,c,d,a,m[i+0],20,-373897302),a=GG(a,b,c,d,m[i+5],5,-701558691),d=GG(d,a,b,c,m[i+10],9,38016083),c=GG(c,d,a,b,m[i+15],14,-660478335),b=GG(b,c,d,a,m[i+4],20,-405537848),a=GG(a,b,c,d,m[i+9],5,568446438),d=GG(d,a,b,c,m[i+14],9,-1019803690),c=GG(c,d,a,b,m[i+3],14,-187363961),b=GG(b,c,d,a,m[i+8],20,1163531501),a=GG(a,b,c,d,m[i+13],5,-1444681467),d=GG(d,a,b,c,m[i+2],9,-51403784),c=GG(c,d,a,b,m[i+7],14,1735328473),b=GG(b,c,d,a,m[i+12],20,-1926607734),a=HH(a,b,c,d,m[i+5],4,-378558),d=HH(d,a,b,c,m[i+8],11,-2022574463),c=HH(c,d,a,b,m[i+11],16,1839030562),b=HH(b,c,d,a,m[i+14],23,-35309556),a=HH(a,b,c,d,m[i+1],4,-1530992060),d=HH(d,a,b,c,m[i+4],11,1272893353),c=HH(c,d,a,b,m[i+7],16,-155497632),b=HH(b,c,d,a,m[i+10],23,-1094730640),a=HH(a,b,c,d,m[i+13],4,681279174),d=HH(d,a,b,c,m[i+0],11,-358537222),c=HH(c,d,a,b,m[i+3],16,-722521979),b=HH(b,c,d,a,m[i+6],23,76029189),a=HH(a,b,c,d,m[i+9],4,-640364487),d=HH(d,a,b,c,m[i+12],11,-421815835),c=HH(c,d,a,b,m[i+15],16,530742520),b=HH(b,c,d,a,m[i+2],23,-995338651),a=II(a,b,c,d,m[i+0],6,-198630844),d=II(d,a,b,c,m[i+7],10,1126891415),c=II(c,d,a,b,m[i+14],15,-1416354905),b=II(b,c,d,a,m[i+5],21,-57434055),a=II(a,b,c,d,m[i+12],6,1700485571),d=II(d,a,b,c,m[i+3],10,-1894986606),c=II(c,d,a,b,m[i+10],15,-1051523),b=II(b,c,d,a,m[i+1],21,-2054922799),a=II(a,b,c,d,m[i+8],6,1873313359),d=II(d,a,b,c,m[i+15],10,-30611744),c=II(c,d,a,b,m[i+6],15,-1560198380),b=II(b,c,d,a,m[i+13],21,1309151649),a=II(a,b,c,d,m[i+4],6,-145523070),d=II(d,a,b,c,m[i+11],10,-1120210379),c=II(c,d,a,b,m[i+2],15,718787259),b=II(b,c,d,a,m[i+9],21,-343485551),a=a+aa>>>0,b=b+bb>>>0,c=c+cc>>>0,d=d+dd>>>0}return crypt.endian([a,b,c,d])};md5._ff=function(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md5._gg=function(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md5._hh=function(a,b,c,d,x,s,t){var n=a+(b^c^d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md5._ii=function(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md5._blocksize=16,md5._digestsize=16,module.exports=function(message,options){if("undefined"!=typeof message){var digestbytes=crypt.wordsToBytes(md5(message,options));return options&&options.asBytes?digestbytes:options&&options.asString?bin.bytesToString(digestbytes):crypt.bytesToHex(digestbytes)}}}()}).call(this,require("buffer").Buffer)},{buffer:9,charenc:3,crypt:4}],3:[function(require,module){var charenc={utf8:{stringToBytes:function(str){return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)))},bytesToString:function(bytes){return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)))}},bin:{stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(255&str.charCodeAt(i));return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]));return str.join("")}}};module.exports=charenc},{}],4:[function(require,module){!function(){var base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",crypt={rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){if(n.constructor==Number)return 16711935&crypt.rotl(n,8)|4278255360&crypt.rotl(n,24);for(var i=0;i<n.length;i++)n[i]=crypt.endian(n[i]);return n},randomBytes:function(n){for(var bytes=[];n>0;n--)bytes.push(Math.floor(256*Math.random()));return bytes},bytesToWords:function(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<32*words.length;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++)hex.push((bytes[i]>>>4).toString(16)),hex.push((15&bytes[i]).toString(16));return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16));return bytes},bytesToBase64:function(bytes){for(var base64=[],i=0;i<bytes.length;i+=3)for(var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2],j=0;4>j;j++)base64.push(8*i+6*j<=8*bytes.length?base64map.charAt(triplet>>>6*(3-j)&63):"=");return base64.join("")},base64ToBytes:function(base64){base64=base64.replace(/[^A-Z0-9+\/]/gi,"");for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4)0!=imod4&&bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<2*imod4|base64map.indexOf(base64.charAt(i))>>>6-2*imod4);return bytes}};module.exports=crypt}()},{}],5:[function(require,module){(function(process,Buffer){var word_list=require("pgp-word-list");module.exports=function(input,cb){var output=[];try{input=Buffer.isBuffer(input)?input:new Buffer(input,"hex")}catch(e){if(!cb)throw e;return process.nextTick(function(){return cb(e)})}for(var index=0;index<input.length;++index)output.push(word_list[input[index]][index%2]);return cb?process.nextTick(function(){return cb(null,output)}):output}}).call(this,require("/usr/local/lib/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),require("buffer").Buffer)},{"/usr/local/lib/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":8,buffer:9,"pgp-word-list":6}],6:[function(require,module){module.exports=[["aardvark","adroitness"],["absurd","adviser"],["accrue","aftermath"],["acme","aggregate"],["adrift","alkali"],["adult","almighty"],["afflict","amulet"],["ahead","amusement"],["aimless","antenna"],["Algol","applicant"],["allow","Apollo"],["alone","armistice"],["ammo","article"],["ancient","asteroid"],["apple","Atlantic"],["artist","atmosphere"],["assume","autopsy"],["Athens","Babylon"],["atlas","backwater"],["Aztec","barbecue"],["baboon","belowground"],["backfield","bifocals"],["backward","bodyguard"],["banjo","bookseller"],["beaming","borderline"],["bedlamp","bottomless"],["beehive","Bradbury"],["beeswax","bravado"],["befriend","Brazilian"],["Belfast","breakaway"],["berserk","Burlington"],["billiard","businessman"],["bison","butterfat"],["blackjack","Camelot"],["blockade","candidate"],["blowtorch","cannonball"],["bluebird","Capricorn"],["bombast","caravan"],["bookshelf","caretaker"],["brackish","celebrate"],["breadline","cellulose"],["breakup","certify"],["brickyard","chambermaid"],["briefcase","Cherokee"],["Burbank","Chicago"],["button","clergyman"],["buzzard","coherence"],["cement","combustion"],["chairlift","commando"],["chatter","company"],["checkup","component"],["chisel","concurrent"],["choking","confidence"],["chopper","conformist"],["Christmas","congregate"],["clamshell","consensus"],["classic","consulting"],["classroom","corporate"],["cleanup","corrosion"],["clockwork","councilman"],["cobra","crossover"],["commence","crucifix"],["concert","cumbersome"],["cowbell","customer"],["crackdown","Dakota"],["cranky","decadence"],["crowfoot","December"],["crucial","decimal"],["crumpled","designing"],["crusade","detector"],["cubic","detergent"],["dashboard","determine"],["deadbolt","dictator"],["deckhand","dinosaur"],["dogsled","direction"],["dragnet","disable"],["drainage","disbelief"],["dreadful","disruptive"],["drifter","distortion"],["dropper","document"],["drumbeat","embezzle"],["drunken","enchanting"],["Dupont","enrollment"],["dwelling","enterprise"],["eating","equation"],["edict","equipment"],["egghead","escapade"],["eightball","Eskimo"],["endorse","everyday"],["endow","examine"],["enlist","existence"],["erase","exodus"],["escape","fascinate"],["exceed","filament"],["eyeglass","finicky"],["eyetooth","forever"],["facial","fortitude"],["fallout","frequency"],["flagpole","gadgetry"],["flatfoot","Galveston"],["flytrap","getaway"],["fracture","glossary"],["framework","gossamer"],["freedom","graduate"],["frighten","gravity"],["gazelle","guitarist"],["Geiger","hamburger"],["glitter","Hamilton"],["glucose","handiwork"],["goggles","hazardous"],["goldfish","headwaters"],["gremlin","hemisphere"],["guidance","hesitate"],["hamlet","hideaway"],["highchair","holiness"],["hockey","hurricane"],["indoors","hydraulic"],["indulge","impartial"],["inverse","impetus"],["involve","inception"],["island","indigo"],["jawbone","inertia"],["keyboard","infancy"],["kickoff","inferno"],["kiwi","informant"],["klaxon","insincere"],["locale","insurgent"],["lockup","integrate"],["merit","intention"],["minnow","inventive"],["miser","Istanbul"],["Mohawk","Jamaica"],["mural","Jupiter"],["music","leprosy"],["necklace","letterhead"],["Neptune","liberty"],["newborn","maritime"],["nightbird","matchmaker"],["Oakland","maverick"],["obtuse","Medusa"],["offload","megaton"],["optic","microscope"],["orca","microwave"],["payday","midsummer"],["peachy","millionaire"],["pheasant","miracle"],["physique","misnomer"],["playhouse","molasses"],["Pluto","molecule"],["preclude","Montana"],["prefer","monument"],["preshrunk","mosquito"],["printer","narrative"],["prowler","nebula"],["pupil","newsletter"],["puppy","Norwegian"],["python","October"],["quadrant","Ohio"],["quiver","onlooker"],["quota","opulent"],["ragtime","Orlando"],["ratchet","outfielder"],["rebirth","Pacific"],["reform","pandemic"],["regain","Pandora"],["reindeer","paperweight"],["rematch","paragon"],["repay","paragraph"],["retouch","paramount"],["revenge","passenger"],["reward","pedigree"],["rhythm","Pegasus"],["ribcage","penetrate"],["ringbolt","perceptive"],["robust","performance"],["rocker","pharmacy"],["ruffled","phonetic"],["sailboat","photograph"],["sawdust","pioneer"],["scallion","pocketful"],["scenic","politeness"],["scorecard","positive"],["Scotland","potato"],["seabird","processor"],["select","provincial"],["sentence","proximate"],["shadow","puberty"],["shamrock","publisher"],["showgirl","pyramid"],["skullcap","quantity"],["skydive","racketeer"],["slingshot","rebellion"],["slowdown","recipe"],["snapline","recover"],["snapshot","repellent"],["snowcap","replica"],["snowslide","reproduce"],["solo","resistor"],["southward","responsive"],["soybean","retraction"],["spaniel","retrieval"],["spearhead","retrospect"],["spellbind","revenue"],["spheroid","revival"],["spigot","revolver"],["spindle","sandalwood"],["spyglass","sardonic"],["stagehand","Saturday"],["stagnate","savagery"],["stairway","scavenger"],["standard","sensation"],["stapler","sociable"],["steamship","souvenir"],["sterling","specialist"],["stockman","speculate"],["stopwatch","stethoscope"],["stormy","stupendous"],["sugar","supportive"],["surmount","surrender"],["suspense","suspicious"],["sweatband","sympathy"],["swelter","tambourine"],["tactics","telephone"],["talon","therapist"],["tapeworm","tobacco"],["tempest","tolerance"],["tiger","tomorrow"],["tissue","torpedo"],["tonic","tradition"],["topmost","travesty"],["tracker","trombonist"],["transit","truncated"],["trauma","typewriter"],["treadmill","ultimate"],["Trojan","undaunted"],["trouble","underfoot"],["tumor","unicorn"],["tunnel","unify"],["tycoon","universe"],["uncut","unravel"],["unearth","upcoming"],["unwind","vacancy"],["uproot","vagabond"],["upset","vertigo"],["upshot","Virginia"],["vapor","visitor"],["village","vocalist"],["virus","voyager"],["Vulcan","warranty"],["waffle","Waterloo"],["wallet","whimsical"],["watchword","Wichita"],["wayside","Wilmington"],["willow","Wyoming"],["woodlark","yesteryear"],["Zulu","YucatÃ¡n"]]},{}],7:[function(require,module){!function(global){var config_svg=function(){return"undefined"!=typeof document?document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):void 0}(),utils_create=function(){var create;try{Object.create(null),create=Object.create}catch(err){create=function(){var F=function(){};return function(proto,props){var obj;return null===proto?{}:(F.prototype=proto,obj=new F,props&&Object.defineProperties(obj,props),obj)}}()}return create}(),config_namespaces={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},utils_createElement=function(svg,namespaces){return svg?function(type,ns){return ns?document.createElementNS(ns,type):document.createElement(type)}:function(type,ns){if(ns&&ns!==namespaces.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See https://github.com/RactiveJS/Ractive/wiki/SVG-and-older-browsers for more information";return document.createElement(type)}}(config_svg,config_namespaces),config_isClient=function(){return"object"==typeof document?!0:!1}(),utils_defineProperty=function(isClient){try{return Object.defineProperty({},"test",{value:0}),isClient&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Object.defineProperty}catch(err){return function(obj,prop,desc){obj[prop]=desc.value}}}(config_isClient),utils_defineProperties=function(createElement,defineProperty,isClient){try{try{Object.defineProperties({},{test:{value:0}})}catch(err){throw err}return isClient&&Object.defineProperties(createElement("div"),{test:{value:0}}),Object.defineProperties}catch(err){return function(obj,props){var prop;for(prop in props)props.hasOwnProperty(prop)&&defineProperty(obj,prop,props[prop])}}}(utils_createElement,utils_defineProperty,config_isClient),utils_normaliseKeypath=function(){var regex=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(keypath){return(keypath||"").replace(regex,".$1")}}(),registries_adaptors={},config_types={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40},utils_isArray=function(){var toString=Object.prototype.toString;return function(thing){return"[object Array]"===toString.call(thing)}}(),shared_clearCache=function(){return function clearCache(ractive,keypath){var cacheMap,wrappedProperty;if((wrappedProperty=ractive._wrapped[keypath])&&wrappedProperty.teardown()!==!1&&(ractive._wrapped[keypath]=null),ractive._cache[keypath]=void 0,cacheMap=ractive._cacheMap[keypath])for(;cacheMap.length;)clearCache(ractive,cacheMap.pop())}}(),shared_getValueFromCheckboxes=function(){return function(ractive,keypath){var value,checkboxes,checkbox,len,i,rootEl;for(value=[],rootEl=ractive.rendered?ractive.el:ractive.fragment.docFrag,checkboxes=rootEl.querySelectorAll('input[type="checkbox"][name="{{'+keypath+'}}"]'),len=checkboxes.length,i=0;len>i;i+=1)checkbox=checkboxes[i],(checkbox.hasAttribute("checked")||checkbox.checked)&&(value[value.length]=checkbox._ractive.value);return value}}(),shared_preDomUpdate=function(getValueFromCheckboxes){return function(ractive){var deferred,evaluator,selectValue,attribute,keypath,radio;for(deferred=ractive._deferred;evaluator=deferred.evals.pop();)evaluator.update().deferred=!1;for(;selectValue=deferred.selectValues.pop();)selectValue.deferredUpdate();for(;attribute=deferred.attrs.pop();)attribute.update().deferred=!1;for(;keypath=deferred.checkboxes.pop();)ractive.set(keypath,getValueFromCheckboxes(ractive,keypath));for(;radio=deferred.radios.pop();)radio.update()}}(shared_getValueFromCheckboxes),shared_postDomUpdate=function(){return function(ractive){var deferred,focusable,query,decorator,transition,observer;for(deferred=ractive._deferred,(focusable=deferred.focusable)&&(focusable.focus(),deferred.focusable=null);query=deferred.liveQueries.pop();)query._sort();for(;decorator=deferred.decorators.pop();)decorator.init();for(;transition=deferred.transitions.pop();)transition.init();for(;observer=deferred.observers.pop();)observer.update()}}(),shared_makeTransitionManager=function(){var makeTransitionManager=function(root,callback){var transitionManager,elementsToDetach,detachNodes,nodeHasNoTransitioningChildren;return root._parent&&root._parent._transitionManager?root._parent._transitionManager:(elementsToDetach=[],detachNodes=function(){var i,element;for(i=elementsToDetach.length;i--;)element=elementsToDetach[i],nodeHasNoTransitioningChildren(element.node)&&(element.detach(),elementsToDetach.splice(i,1))},nodeHasNoTransitioningChildren=function(node){var i,candidate;for(i=transitionManager.active.length;i--;)if(candidate=transitionManager.active[i],node.contains(candidate))return!1;return!0},transitionManager={active:[],push:function(node){transitionManager.active[transitionManager.active.length]=node},pop:function(node){var index;index=transitionManager.active.indexOf(node),-1!==index&&(transitionManager.active.splice(index,1),detachNodes(),!transitionManager.active.length&&transitionManager._ready&&transitionManager.complete())},complete:function(){callback&&callback.call(root)},ready:function(){detachNodes(),transitionManager._ready=!0,transitionManager.active.length||transitionManager.complete()},detachWhenReady:function(element){elementsToDetach[elementsToDetach.length]=element}})};return makeTransitionManager}(),shared_notifyDependants=function(){function notifyDependantsAtPriority(ractive,keypath,priority,onlyDirect){var depsByKeypath=ractive._deps[priority];depsByKeypath&&(updateAll(depsByKeypath[keypath]),onlyDirect||cascade(ractive._depsMap[keypath],ractive,priority))}function updateAll(deps){var i,len;if(deps)for(len=deps.length,i=0;len>i;i+=1)deps[i].update()}function cascade(childDeps,ractive,priority,onlyDirect){var i;if(childDeps)for(i=childDeps.length;i--;)notifyDependantsAtPriority(ractive,childDeps[i],priority,onlyDirect)}function notifyPatternObservers(ractive,registeredKeypath,actualKeypath,isParentOfChangedKeypath,isTopLevelCall){var i,patternObserver,children,child,key,childActualKeypath,potentialWildcardMatches,cascade;for(i=ractive._patternObservers.length;i--;)patternObserver=ractive._patternObservers[i],patternObserver.regex.test(actualKeypath)&&patternObserver.update(actualKeypath);isParentOfChangedKeypath||(cascade=function(keypath){if(children=ractive._depsMap[keypath])for(i=children.length;i--;)child=children[i],key=lastKey.exec(child)[0],childActualKeypath=actualKeypath+"."+key,notifyPatternObservers(ractive,child,childActualKeypath)},isTopLevelCall?(potentialWildcardMatches=getPotentialWildcardMatches(actualKeypath),potentialWildcardMatches.forEach(cascade)):cascade(registeredKeypath))}function getPotentialWildcardMatches(keypath){var keys,starMap,mapper,i,result,wildcardKeypath;for(keys=keypath.split("."),starMap=getStarMap(keys.length),result=[],mapper=function(star,i){return star?"*":keys[i]},i=starMap.length;i--;)wildcardKeypath=starMap[i].map(mapper).join("."),result[wildcardKeypath]||(result[result.length]=wildcardKeypath,result[wildcardKeypath]=!0);return result}function getStarMap(num){var max,binary,starMap,mapper,i,ones="";if(!starMaps[num]){for(starMap=[];ones.length<num;)ones+=1;for(max=parseInt(ones,2),mapper=function(digit){return"1"===digit},i=0;max>=i;i+=1){for(binary=i.toString(2);binary.length<num;)binary="0"+binary;starMap[i]=Array.prototype.map.call(binary,mapper)}starMaps[num]=starMap}return starMaps[num]}var notifyDependants,lastKey,starMaps={};return lastKey=/[^\.]+$/,notifyDependants=function(ractive,keypath,onlyDirect){var i;for(ractive._patternObservers.length&&notifyPatternObservers(ractive,keypath,keypath,onlyDirect,!0),i=0;i<ractive._deps.length;i+=1)notifyDependantsAtPriority(ractive,keypath,i,onlyDirect)},notifyDependants.multiple=function(ractive,keypaths,onlyDirect){var i,j,len;if(len=keypaths.length,ractive._patternObservers.length)for(i=len;i--;)notifyPatternObservers(ractive,keypaths[i],keypaths[i],onlyDirect,!0);for(i=0;i<ractive._deps.length;i+=1)if(ractive._deps[i])for(j=len;j--;)notifyDependantsAtPriority(ractive,keypaths[j],i,onlyDirect)},notifyDependants}(),Ractive_prototype_get_arrayAdaptor=function(types,defineProperty,isArray,clearCache,preDomUpdate,postDomUpdate,makeTransitionManager,notifyDependants){var arrayAdaptor,notifyArrayDependants,ArrayWrapper,patchArrayMethods,unpatchArrayMethods,patchedArrayProto,testObj,mutatorMethods,noop,errorMessage;return arrayAdaptor={filter:function(object){return isArray(object)&&(!object._ractive||!object._ractive.setting)},wrap:function(ractive,array,keypath){return new ArrayWrapper(ractive,array,keypath)}},ArrayWrapper=function(ractive,array,keypath){this.root=ractive,this.value=array,this.keypath=keypath,array._ractive||(defineProperty(array,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),patchArrayMethods(array)),array._ractive.instances[ractive._guid]||(array._ractive.instances[ractive._guid]=0,array._ractive.instances.push(ractive)),array._ractive.instances[ractive._guid]+=1,array._ractive.wrappers.push(this)},ArrayWrapper.prototype={get:function(){return this.value},teardown:function(){var array,storage,wrappers,instances,index;if(array=this.value,storage=array._ractive,wrappers=storage.wrappers,instances=storage.instances,storage.setting)return!1;if(index=wrappers.indexOf(this),-1===index)throw new Error(errorMessage);if(wrappers.splice(index,1),wrappers.length){if(instances[this.root._guid]-=1,!instances[this.root._guid]){if(index=instances.indexOf(this.root),-1===index)throw new Error(errorMessage);instances.splice(index,1)}}else delete array._ractive,unpatchArrayMethods(this.value)}},notifyArrayDependants=function(array,methodName,args){var notifyKeypathDependants,queueDependants,wrappers,wrapper,i;for(notifyKeypathDependants=function(root,keypath){var depsByKeypath,deps,keys,upstreamQueue,smartUpdateQueue,dumbUpdateQueue,i,changed,start,end,childKeypath,lengthUnchanged;if("sort"===methodName||"reverse"===methodName)return void root.set(keypath,array);for(clearCache(root,keypath),smartUpdateQueue=[],dumbUpdateQueue=[],i=0;i<root._deps.length;i+=1)if(depsByKeypath=root._deps[i],depsByKeypath&&(deps=depsByKeypath[keypath])){for(queueDependants(keypath,deps,smartUpdateQueue,dumbUpdateQueue),preDomUpdate(root);smartUpdateQueue.length;)smartUpdateQueue.pop().smartUpdate(methodName,args);for(;dumbUpdateQueue.length;)dumbUpdateQueue.pop().update()}if("splice"===methodName&&args.length>2&&args[1])for(changed=Math.min(args[1],args.length-2),start=args[0],end=start+changed,args[1]===args.length-2&&(lengthUnchanged=!0),i=start;end>i;i+=1)childKeypath=keypath+"."+i,notifyDependants(root,childKeypath);for(preDomUpdate(root),upstreamQueue=[],keys=keypath.split(".");keys.length;)keys.pop(),upstreamQueue[upstreamQueue.length]=keys.join(".");notifyDependants.multiple(root,upstreamQueue,!0),lengthUnchanged||notifyDependants(root,keypath+".length",!0)},queueDependants=function(keypath,deps,smartUpdateQueue,dumbUpdateQueue){var k,dependant;for(k=deps.length;k--;)dependant=deps[k],dependant.type===types.REFERENCE?dependant.update():dependant.keypath===keypath&&dependant.type===types.SECTION&&!dependant.inverted&&dependant.docFrag?smartUpdateQueue[smartUpdateQueue.length]=dependant:dumbUpdateQueue[dumbUpdateQueue.length]=dependant},wrappers=array._ractive.wrappers,i=wrappers.length;i--;)wrapper=wrappers[i],notifyKeypathDependants(wrapper.root,wrapper.keypath)},patchedArrayProto=[],mutatorMethods=["pop","push","reverse","shift","sort","splice","unshift"],noop=function(){},mutatorMethods.forEach(function(methodName){var method=function(){var result,instances,instance,i,previousTransitionManagers={},transitionManagers={};for(result=Array.prototype[methodName].apply(this,arguments),instances=this._ractive.instances,i=instances.length;i--;)instance=instances[i],previousTransitionManagers[instance._guid]=instance._transitionManager,instance._transitionManager=transitionManagers[instance._guid]=makeTransitionManager(instance,noop);for(this._ractive.setting=!0,notifyArrayDependants(this,methodName,arguments),this._ractive.setting=!1,i=instances.length;i--;)instance=instances[i],instance._transitionManager=previousTransitionManagers[instance._guid],transitionManagers[instance._guid].ready(),preDomUpdate(instance),postDomUpdate(instance);return result};defineProperty(patchedArrayProto,methodName,{value:method})}),testObj={},testObj.__proto__?(patchArrayMethods=function(array){array.__proto__=patchedArrayProto},unpatchArrayMethods=function(array){array.__proto__=Array.prototype}):(patchArrayMethods=function(array){var i,methodName;for(i=mutatorMethods.length;i--;)methodName=mutatorMethods[i],defineProperty(array,methodName,{value:patchedArrayProto[methodName],configurable:!0})},unpatchArrayMethods=function(array){var i;for(i=mutatorMethods.length;i--;)delete array[mutatorMethods[i]]}),errorMessage="Something went wrong in a rather interesting way",arrayAdaptor}(config_types,utils_defineProperty,utils_isArray,shared_clearCache,shared_preDomUpdate,shared_postDomUpdate,shared_makeTransitionManager,shared_notifyDependants),Ractive_prototype_get_magicAdaptor=function(){var magicAdaptor,MagicWrapper;try{Object.defineProperty({},"test",{value:0})}catch(err){return!1}return magicAdaptor={filter:function(object,keypath){return!!keypath},wrap:function(ractive,object,keypath){return new MagicWrapper(ractive,object,keypath)}},MagicWrapper=function(ractive,object,keypath){var keys,prop,objKeypath,descriptor,wrappers,oldGet,oldSet,get,set,wrapper=this;if(this.ractive=ractive,this.keypath=keypath,keys=keypath.split("."),this.prop=keys.pop(),objKeypath=keys.join("."),this.obj=objKeypath?ractive.get(objKeypath):ractive.data,descriptor=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),descriptor&&descriptor.set&&(wrappers=descriptor.set._ractiveWrappers))return void(-1===wrappers.indexOf(this)&&wrappers.push(this));if(descriptor&&!descriptor.configurable)throw new Error('Cannot use magic mode with property "'+prop+'" - object is not configurable');descriptor&&(this.value=descriptor.value,oldGet=descriptor.get,oldSet=descriptor.set),get=oldGet||function(){return wrapper.value},set=function(value){var wrappers,wrapper,i;for(oldSet&&oldSet(value),wrappers=set._ractiveWrappers,i=wrappers.length;i--;)wrapper=wrappers[i],wrapper.resetting||wrapper.ractive.set(wrapper.keypath,value)},set._ractiveWrappers=[this],Object.defineProperty(this.obj,this.prop,{get:get,set:set,enumerable:!0,configurable:!0})},MagicWrapper.prototype={get:function(){return this.value},reset:function(value){this.resetting=!0,this.value=value,this.resetting=!1},teardown:function(){var descriptor,set,value,wrappers;descriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),set=descriptor.set,wrappers=set._ractiveWrappers,wrappers.splice(wrappers.indexOf(this),1),wrappers.length||(value=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configrable:!0}),this.obj[this.prop]=value)}},magicAdaptor}(),shared_adaptIfNecessary=function(adaptorRegistry,arrayAdaptor,magicAdaptor){function prefixKeypath(obj,prefix){var key,prefixed={};if(!prefix)return obj;prefix+=".";for(key in obj)obj.hasOwnProperty(key)&&(prefixed[prefix+key]=obj[key]);return prefixed}function getPrefixer(rootKeypath){var rootDot;return prefixers[rootKeypath]||(rootDot=rootKeypath?rootKeypath+".":"",prefixers[rootKeypath]=function(relativeKeypath,value){var obj;return"string"==typeof relativeKeypath?(obj={},obj[rootDot+relativeKeypath]=value,obj):"object"==typeof relativeKeypath?rootDot?prefixKeypath(relativeKeypath,rootKeypath):relativeKeypath:void 0}),prefixers[rootKeypath]}var prefixers={};return function(ractive,keypath,value,isExpressionResult){var len,i,adaptor,wrapped;for(len=ractive.adaptors.length,i=0;len>i;i+=1){if(adaptor=ractive.adaptors[i],"string"==typeof adaptor){if(!adaptorRegistry[adaptor])throw new Error('Missing adaptor "'+adaptor+'"');adaptor=ractive.adaptors[i]=adaptorRegistry[adaptor]}if(adaptor.filter(value,keypath,ractive))return wrapped=ractive._wrapped[keypath]=adaptor.wrap(ractive,value,keypath,getPrefixer(keypath)),void(wrapped.value=value)}isExpressionResult||(ractive.magic&&magicAdaptor.filter(value,keypath,ractive)?ractive._wrapped[keypath]=magicAdaptor.wrap(ractive,value,keypath):ractive.modifyArrays&&arrayAdaptor.filter(value,keypath,ractive)&&(ractive._wrapped[keypath]=arrayAdaptor.wrap(ractive,value,keypath)))}}(registries_adaptors,Ractive_prototype_get_arrayAdaptor,Ractive_prototype_get_magicAdaptor),Ractive_prototype_get__get=function(normaliseKeypath,adaptorRegistry,adaptIfNecessary){var get,_get,retrieve;return get=function(keypath){return this._captured&&!this._captured[keypath]&&(this._captured.push(keypath),this._captured[keypath]=!0),_get(this,keypath)},_get=function(ractive,keypath){var cache,cached,value,wrapped,evaluator;return keypath=normaliseKeypath(keypath),cache=ractive._cache,void 0!==(cached=cache[keypath])?cached:((wrapped=ractive._wrapped[keypath])?value=wrapped.value:keypath?value=(evaluator=ractive._evaluators[keypath])?evaluator.value:retrieve(ractive,keypath):(adaptIfNecessary(ractive,"",ractive.data),value=ractive.data),cache[keypath]=value,value)},retrieve=function(ractive,keypath){var keys,key,parentKeypath,parentValue,cacheMap,value,wrapped;return keys=keypath.split("."),key=keys.pop(),parentKeypath=keys.join("."),parentValue=_get(ractive,parentKeypath),(wrapped=ractive._wrapped[parentKeypath])&&(parentValue=wrapped.get()),null!==parentValue&&void 0!==parentValue?((cacheMap=ractive._cacheMap[parentKeypath])?-1===cacheMap.indexOf(keypath)&&(cacheMap[cacheMap.length]=keypath):ractive._cacheMap[parentKeypath]=[keypath],value=parentValue[key],adaptIfNecessary(ractive,keypath,value),ractive._cache[keypath]=value,value):void 0
},get}(utils_normaliseKeypath,registries_adaptors,shared_adaptIfNecessary),utils_isObject=function(){var toString=Object.prototype.toString;return function(thing){return"object"==typeof thing&&"[object Object]"===toString.call(thing)}}(),utils_isEqual=function(){return function(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}}(),shared_resolveRef=function(){var resolveRef;return resolveRef=function(ractive,ref,contextStack){var keypath,keys,lastKey,contextKeys,innerMostContext,postfix,parentKeypath,parentValue,wrapped,context,ancestorErrorMessage;if(ancestorErrorMessage='Could not resolve reference - too many "../" prefixes',"."===ref){if(!contextStack.length)return"";keypath=contextStack[contextStack.length-1]}else if("."===ref.charAt(0))if(context=contextStack[contextStack.length-1],contextKeys=context?context.split("."):[],"../"===ref.substr(0,3)){for(;"../"===ref.substr(0,3);){if(!contextKeys.length)throw new Error(ancestorErrorMessage);contextKeys.pop(),ref=ref.substring(3)}contextKeys.push(ref),keypath=contextKeys.join(".")}else keypath=context?context+ref:ref.substring(1);else{for(keys=ref.split("."),lastKey=keys.pop(),postfix=keys.length?"."+keys.join("."):"",contextStack=contextStack.concat();contextStack.length;)if(innerMostContext=contextStack.pop(),parentKeypath=innerMostContext+postfix,parentValue=ractive.get(parentKeypath),(wrapped=ractive._wrapped[parentKeypath])&&(parentValue=wrapped.get()),"object"==typeof parentValue&&null!==parentValue&&parentValue.hasOwnProperty(lastKey)){keypath=innerMostContext+"."+ref;break}keypath||void 0===ractive.get(ref)||(keypath=ref)}return keypath?keypath.replace(/^\./,""):keypath}}(),shared_attemptKeypathResolution=function(resolveRef){var push=Array.prototype.push;return function(ractive){for(var unresolved,keypath,leftover;unresolved=ractive._pendingResolution.pop();)keypath=resolveRef(ractive,unresolved.ref,unresolved.contextStack),void 0!==keypath?unresolved.resolve(keypath):(leftover||(leftover=[])).push(unresolved);leftover&&push.apply(ractive._pendingResolution,leftover)}}(shared_resolveRef),shared_processDeferredUpdates=function(preDomUpdate,postDomUpdate){return function(ractive){preDomUpdate(ractive),postDomUpdate(ractive)}}(shared_preDomUpdate,shared_postDomUpdate),Ractive_prototype_shared_replaceData=function(){return function(ractive,keypath,value){var keys,accumulated,wrapped,obj,key,currentKeypath,keypathToClear;for(keys=keypath.split("."),accumulated=[],(wrapped=ractive._wrapped[""])?(wrapped.set&&wrapped.set(keys.join("."),value),obj=wrapped.get()):obj=ractive.data;keys.length>1;)key=accumulated[accumulated.length]=keys.shift(),currentKeypath=accumulated.join("."),(wrapped=ractive._wrapped[currentKeypath])?(wrapped.set&&wrapped.set(keys.join("."),value),obj=wrapped.get()):(obj.hasOwnProperty(key)||(keypathToClear||(keypathToClear=currentKeypath),obj[key]=/^\s*[0-9]+\s*$/.test(keys[0])?[]:{}),obj=obj[key]);return key=keys[0],obj[key]=value,keypathToClear}}(),Ractive_prototype_set=function(isObject,isEqual,normaliseKeypath,clearCache,notifyDependants,attemptKeypathResolution,makeTransitionManager,processDeferredUpdates,replaceData){var set,updateModel,getUpstreamChanges,resetWrapped;return set=function(keypath,value,complete){var map,changes,upstreamChanges,previousTransitionManager,transitionManager,i,changeHash;if(changes=[],isObject(keypath)&&(map=keypath,complete=value),map)for(keypath in map)map.hasOwnProperty(keypath)&&(value=map[keypath],keypath=normaliseKeypath(keypath),updateModel(this,keypath,value,changes));else keypath=normaliseKeypath(keypath),updateModel(this,keypath,value,changes);if(changes.length){if(previousTransitionManager=this._transitionManager,this._transitionManager=transitionManager=makeTransitionManager(this,complete),upstreamChanges=getUpstreamChanges(changes),upstreamChanges.length&&notifyDependants.multiple(this,upstreamChanges,!0),notifyDependants.multiple(this,changes),this._pendingResolution.length&&attemptKeypathResolution(this),processDeferredUpdates(this),this._transitionManager=previousTransitionManager,transitionManager.ready(),!this.firingChangeEvent){for(this.firingChangeEvent=!0,changeHash={},i=changes.length;i--;)changeHash[changes[i]]=this.get(changes[i]);this.fire("change",changeHash),this.firingChangeEvent=!1}return this}},updateModel=function(ractive,keypath,value,changes){var cached,previous,wrapped,keypathToClear,evaluator;if(!(wrapped=ractive._wrapped[keypath])||!wrapped.reset||resetWrapped(ractive,keypath,value,wrapped,changes)===!1){if((evaluator=ractive._evaluators[keypath])&&(evaluator.value=value),cached=ractive._cache[keypath],previous=ractive.get(keypath),previous===value||evaluator){if(value===cached&&"object"!=typeof value)return}else keypathToClear=replaceData(ractive,keypath,value);clearCache(ractive,keypathToClear||keypath),changes[changes.length]=keypath}},getUpstreamChanges=function(changes){var i,keypath,keys,upstreamKeypath,upstreamChanges=[""];for(i=changes.length;i--;)for(keypath=changes[i],keys=keypath.split(".");keys.length>1;)keys.pop(),upstreamKeypath=keys.join("."),upstreamChanges[upstreamKeypath]||(upstreamChanges[upstreamChanges.length]=upstreamKeypath,upstreamChanges[upstreamKeypath]=!0);return upstreamChanges},resetWrapped=function(ractive,keypath,value,wrapped,changes){var previous,cached,cacheMap,i;if(previous=wrapped.get(),!isEqual(previous,value)&&wrapped.reset(value)===!1)return!1;if(value=wrapped.get(),cached=ractive._cache[keypath],!isEqual(cached,value)){if(ractive._cache[keypath]=value,cacheMap=ractive._cacheMap[keypath])for(i=cacheMap.length;i--;)clearCache(ractive,cacheMap[i]);changes[changes.length]=keypath}},set}(utils_isObject,utils_isEqual,utils_normaliseKeypath,shared_clearCache,shared_notifyDependants,shared_attemptKeypathResolution,shared_makeTransitionManager,shared_processDeferredUpdates,Ractive_prototype_shared_replaceData),Ractive_prototype_update=function(makeTransitionManager,attemptKeypathResolution,clearCache,notifyDependants,processDeferredUpdates){return function(keypath,complete){var transitionManager,previousTransitionManager;return"function"==typeof keypath&&(complete=keypath,keypath=""),previousTransitionManager=this._transitionManager,this._transitionManager=transitionManager=makeTransitionManager(this,complete),attemptKeypathResolution(this),clearCache(this,keypath||""),notifyDependants(this,keypath||""),processDeferredUpdates(this),this._transitionManager=previousTransitionManager,transitionManager.ready(),"string"==typeof keypath?this.fire("update",keypath):this.fire("update"),this}}(shared_makeTransitionManager,shared_attemptKeypathResolution,shared_clearCache,shared_notifyDependants,shared_processDeferredUpdates),utils_arrayContentsMatch=function(isArray){return function(a,b){var i;if(!isArray(a)||!isArray(b))return!1;if(a.length!==b.length)return!1;for(i=a.length;i--;)if(a[i]!==b[i])return!1;return!0}}(utils_isArray),Ractive_prototype_updateModel=function(getValueFromCheckboxes,arrayContentsMatch,isEqual){function consolidateChangedValues(ractive,keypath,values,deferredCheckboxes,cascade){var bindings,childDeps,i,binding,oldValue,newValue;if(bindings=ractive._twowayBindings[keypath])for(i=bindings.length;i--;)binding=bindings[i],(!binding.radioName||binding.node.checked)&&(binding.checkboxName?binding.changed()&&!deferredCheckboxes[keypath]&&(deferredCheckboxes[keypath]=!0,deferredCheckboxes[deferredCheckboxes.length]=keypath):(oldValue=binding.attr.value,newValue=binding.value(),arrayContentsMatch(oldValue,newValue)||isEqual(oldValue,newValue)||(values[keypath]=newValue)));if(cascade&&(childDeps=ractive._depsMap[keypath]))for(i=childDeps.length;i--;)consolidateChangedValues(ractive,childDeps[i],values,deferredCheckboxes,cascade)}return function(keypath,cascade){var values,deferredCheckboxes,i;if("string"!=typeof keypath&&(keypath="",cascade=!0),consolidateChangedValues(this,keypath,values={},deferredCheckboxes=[],cascade),i=deferredCheckboxes.length)for(;i--;)keypath=deferredCheckboxes[i],values[keypath]=getValueFromCheckboxes(this,keypath);this.set(values)}}(shared_getValueFromCheckboxes,utils_arrayContentsMatch,utils_isEqual),Ractive_prototype_animate_requestAnimationFrame=function(){return"undefined"!=typeof window?(function(vendors,lastTime,window){var x,setTimeout;if(!window.requestAnimationFrame){for(x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];window.requestAnimationFrame||(setTimeout=window.setTimeout,window.requestAnimationFrame=function(callback){var currTime,timeToCall,id;return currTime=Date.now(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=setTimeout(function(){callback(currTime+timeToCall)},timeToCall),lastTime=currTime+timeToCall,id})}}(["ms","moz","webkit","o"],0,window),window.requestAnimationFrame):void 0}(),Ractive_prototype_animate_animations=function(rAF){var queue=[],animations={tick:function(){var i,animation;for(i=0;i<queue.length;i+=1)animation=queue[i],animation.tick()||queue.splice(i--,1);queue.length?rAF(animations.tick):animations.running=!1},add:function(animation){queue[queue.length]=animation,animations.running||(animations.running=!0,animations.tick())},abort:function(keypath,root){for(var animation,i=queue.length;i--;)animation=queue[i],animation.root===root&&animation.keypath===keypath&&animation.stop()}};return animations}(Ractive_prototype_animate_requestAnimationFrame),utils_warn=function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply?function(){console.warn.apply(console,arguments)}:function(){}}(),utils_isNumeric=function(){return function(thing){return!isNaN(parseFloat(thing))&&isFinite(thing)}}(),shared_interpolate=function(isArray,isObject,isNumeric){function makeNumberInterpolator(from,to){var delta=to-from;return delta?function(t){return from+t*delta}:function(){return from}}function makeArrayInterpolator(from,to){var intermediate,interpolators,len,i;for(intermediate=[],interpolators=[],i=len=Math.min(from.length,to.length);i--;)interpolators[i]=interpolate(from[i],to[i]);for(i=len;i<from.length;i+=1)intermediate[i]=from[i];for(i=len;i<to.length;i+=1)intermediate[i]=to[i];return function(t){for(var i=len;i--;)intermediate[i]=interpolators[i](t);return intermediate}}function makeObjectInterpolator(from,to){var len,interpolators,intermediate,prop,properties=[];intermediate={},interpolators={};for(prop in from)from.hasOwnProperty(prop)&&(to.hasOwnProperty(prop)?(properties[properties.length]=prop,interpolators[prop]=interpolate(from[prop],to[prop])):intermediate[prop]=from[prop]);for(prop in to)to.hasOwnProperty(prop)&&!from.hasOwnProperty(prop)&&(intermediate[prop]=to[prop]);return len=properties.length,function(t){for(var prop,i=len;i--;)prop=properties[i],intermediate[prop]=interpolators[prop](t);return intermediate}}var interpolate=function(from,to){return isNumeric(from)&&isNumeric(to)?makeNumberInterpolator(+from,+to):isArray(from)&&isArray(to)?makeArrayInterpolator(from,to):isObject(from)&&isObject(to)?makeObjectInterpolator(from,to):function(){return to}};return interpolate}(utils_isArray,utils_isObject,utils_isNumeric),Ractive_prototype_animate_Animation=function(warn,interpolate){var Animation=function(options){var key;this.startTime=Date.now();for(key in options)options.hasOwnProperty(key)&&(this[key]=options[key]);this.interpolator=interpolate(this.from,this.to),this.running=!0};return Animation.prototype={tick:function(){var elapsed,t,value,timeNow,index,keypath;return keypath=this.keypath,this.running?(timeNow=Date.now(),elapsed=timeNow-this.startTime,elapsed>=this.duration?(null!==keypath&&this.root.set(keypath,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),index=this.root._animations.indexOf(this),-1===index&&warn("Animation was not found"),this.root._animations.splice(index,1),this.running=!1,!1):(t=this.easing?this.easing(elapsed/this.duration):elapsed/this.duration,null!==keypath&&(value=this.interpolator(t),this.root.set(keypath,value)),this.step&&this.step(t,value),!0)):!1},stop:function(){var index;this.running=!1,index=this.root._animations.indexOf(this),-1===index&&warn("Animation was not found"),this.root._animations.splice(index,1)}},Animation}(utils_warn,shared_interpolate),registries_easing=function(){return{linear:function(pos){return pos},easeIn:function(pos){return Math.pow(pos,3)},easeOut:function(pos){return Math.pow(pos-1,3)+1},easeInOut:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,3):.5*(Math.pow(pos-2,3)+2)}}}(),Ractive_prototype_animate__animate=function(isEqual,animations,Animation,easingRegistry){function animate(root,keypath,to,options){var easing,duration,animation,from;return null!==keypath&&(from=root.get(keypath)),animations.abort(keypath,root),isEqual(from,to)?(options.complete&&options.complete(1,options.to),noAnimation):(options.easing&&(easing="function"==typeof options.easing?options.easing:root.easing&&root.easing[options.easing]?root.easing[options.easing]:easingRegistry[options.easing],"function"!=typeof easing&&(easing=null)),duration=void 0===options.duration?400:options.duration,animation=new Animation({keypath:keypath,from:from,to:to,root:root,duration:duration,easing:easing,step:options.step,complete:options.complete}),animations.add(animation),root._animations[root._animations.length]=animation,animation)}var noAnimation={stop:function(){}};return function(keypath,to,options){var k,animation,animations,easing,duration,step,complete,makeValueCollector,currentValues,collectValue,dummy,dummyOptions;if("object"==typeof keypath){options=to||{},easing=options.easing,duration=options.duration,animations=[],step=options.step,complete=options.complete,(step||complete)&&(currentValues={},options.step=null,options.complete=null,makeValueCollector=function(keypath){return function(t,value){currentValues[keypath]=value}});for(k in keypath)keypath.hasOwnProperty(k)&&((step||complete)&&(collectValue=makeValueCollector(k),options={easing:easing,duration:duration},step&&(options.step=collectValue),complete&&(options.complete=collectValue)),animations[animations.length]=animate(this,k,keypath[k],options));return(step||complete)&&(dummyOptions={easing:easing,duration:duration},step&&(dummyOptions.step=function(t){step(t,currentValues)}),complete&&(dummyOptions.complete=function(t){complete(t,currentValues)}),animations[animations.length]=dummy=animate(this,null,null,dummyOptions)),{stop:function(){for(;animations.length;)animations.pop().stop();dummy&&dummy.stop()}}}return options=options||{},animation=animate(this,keypath,to,options),{stop:function(){animation.stop()}}}}(utils_isEqual,Ractive_prototype_animate_animations,Ractive_prototype_animate_Animation,registries_easing),Ractive_prototype_on=function(){return function(eventName,callback){var listeners,n,self=this;if("object"==typeof eventName){listeners=[];for(n in eventName)eventName.hasOwnProperty(n)&&(listeners[listeners.length]=this.on(n,eventName[n]));return{cancel:function(){for(;listeners.length;)listeners.pop().cancel()}}}return this._subs[eventName]?this._subs[eventName].push(callback):this._subs[eventName]=[callback],{cancel:function(){self.off(eventName,callback)}}}}(),Ractive_prototype_off=function(){return function(eventName,callback){var subscribers,index;if(!callback)if(eventName)this._subs[eventName]=[];else for(eventName in this._subs)delete this._subs[eventName];subscribers=this._subs[eventName],subscribers&&(index=subscribers.indexOf(callback),-1!==index&&subscribers.splice(index,1))}}(),shared_registerDependant=function(){return function(dependant){var depsByKeypath,deps,keys,parentKeypath,map,ractive,keypath,priority;if(ractive=dependant.root,keypath=dependant.keypath,priority=dependant.priority,depsByKeypath=ractive._deps[priority]||(ractive._deps[priority]={}),deps=depsByKeypath[keypath]||(depsByKeypath[keypath]=[]),deps[deps.length]=dependant,dependant.registered=!0,keypath)for(keys=keypath.split(".");keys.length;)keys.pop(),parentKeypath=keys.join("."),map=ractive._depsMap[parentKeypath]||(ractive._depsMap[parentKeypath]=[]),void 0===map[keypath]&&(map[keypath]=0,map[map.length]=keypath),map[keypath]+=1,keypath=parentKeypath}}(),shared_unregisterDependant=function(){return function(dependant){var deps,index,keys,parentKeypath,map,ractive,keypath,priority;if(ractive=dependant.root,keypath=dependant.keypath,priority=dependant.priority,deps=ractive._deps[priority][keypath],index=deps.indexOf(dependant),-1===index||!dependant.registered)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");if(deps.splice(index,1),dependant.registered=!1,keypath)for(keys=keypath.split(".");keys.length;)keys.pop(),parentKeypath=keys.join("."),map=ractive._depsMap[parentKeypath],map[keypath]-=1,map[keypath]||(map.splice(map.indexOf(keypath),1),map[keypath]=void 0),keypath=parentKeypath}}(),Ractive_prototype_observe_Observer=function(isEqual){var Observer=function(ractive,keypath,callback,options){var self=this;this.root=ractive,this.keypath=keypath,this.callback=callback,this.defer=options.defer,this.debug=options.debug,this.proxy={update:function(){self.reallyUpdate()}},this.priority=0,this.context=options&&options.context?options.context:ractive};return Observer.prototype={init:function(immediate){immediate!==!1?this.update():this.value=this.root.get(this.keypath)},update:function(){return this.defer&&this.ready?void this.root._deferred.observers.push(this.proxy):void this.reallyUpdate()},reallyUpdate:function(){var oldValue,newValue;if(oldValue=this.value,newValue=this.root.get(this.keypath),this.value=newValue,!this.updating){if(this.updating=!0,!isEqual(newValue,oldValue)||!this.ready)try{this.callback.call(this.context,newValue,oldValue,this.keypath)}catch(err){if(this.debug||this.root.debug)throw err}this.updating=!1}}},Observer}(utils_isEqual),Ractive_prototype_observe_getPattern=function(){return function(ractive,pattern){var keys,key,values,toGet,newToGet,expand,concatenate;for(keys=pattern.split("."),toGet=[],expand=function(keypath){var value,key;value=ractive._wrapped[keypath]?ractive._wrapped[keypath].get():ractive.get(keypath);for(key in value)newToGet.push(keypath+"."+key)},concatenate=function(keypath){return keypath+"."+key};key=keys.shift();)"*"===key?(newToGet=[],toGet.forEach(expand),toGet=newToGet):toGet[0]?toGet=toGet.map(concatenate):toGet[0]=key;return values={},toGet.forEach(function(keypath){values[keypath]=ractive.get(keypath)}),values}}(),Ractive_prototype_observe_PatternObserver=function(isEqual,getPattern){var PatternObserver,wildcard=/\*/;return PatternObserver=function(ractive,keypath,callback,options){this.root=ractive,this.callback=callback,this.defer=options.defer,this.debug=options.debug,this.keypath=keypath,this.regex=new RegExp("^"+keypath.replace(/\./g,"\\.").replace(/\*/g,"[^\\.]+")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=options&&options.context?options.context:ractive},PatternObserver.prototype={init:function(immediate){var values,keypath;if(values=getPattern(this.root,this.keypath),immediate!==!1)for(keypath in values)values.hasOwnProperty(keypath)&&this.update(keypath);else this.values=values},update:function(keypath){var values;{if(!wildcard.test(keypath))return this.defer&&this.ready?void this.root._deferred.observers.push(this.getProxy(keypath)):void this.reallyUpdate(keypath);values=getPattern(this.root,keypath);for(keypath in values)values.hasOwnProperty(keypath)&&this.update(keypath)}},reallyUpdate:function(keypath){var value=this.root.get(keypath);if(this.updating)return void(this.values[keypath]=value);if(this.updating=!0,!isEqual(value,this.values[keypath])||!this.ready){try{this.callback.call(this.context,value,this.values[keypath],keypath)}catch(err){if(this.debug||this.root.debug)throw err}this.values[keypath]=value}this.updating=!1},getProxy:function(keypath){var self=this;return this.proxies[keypath]||(this.proxies[keypath]={update:function(){self.reallyUpdate(keypath)}}),this.proxies[keypath]}},PatternObserver}(utils_isEqual,Ractive_prototype_observe_getPattern),Ractive_prototype_observe_getObserverFacade=function(normaliseKeypath,registerDependant,unregisterDependant,Observer,PatternObserver){var wildcard=/\*/,emptyObject={};return function(ractive,keypath,callback,options){var observer,isPatternObserver;return keypath=normaliseKeypath(keypath),options=options||emptyObject,wildcard.test(keypath)?(observer=new PatternObserver(ractive,keypath,callback,options),ractive._patternObservers.push(observer),isPatternObserver=!0):observer=new Observer(ractive,keypath,callback,options),registerDependant(observer),observer.init(options.init),observer.ready=!0,{cancel:function(){var index;isPatternObserver&&(index=ractive._patternObservers.indexOf(observer),-1!==index&&ractive._patternObservers.splice(index,1)),unregisterDependant(observer)}}}}(utils_normaliseKeypath,shared_registerDependant,shared_unregisterDependant,Ractive_prototype_observe_Observer,Ractive_prototype_observe_PatternObserver),Ractive_prototype_observe__observe=function(isObject,getObserverFacade){return function(keypath,callback,options){var k,observers=[];if(isObject(keypath)){options=callback;for(k in keypath)keypath.hasOwnProperty(k)&&(callback=keypath[k],observers[observers.length]=getObserverFacade(this,k,callback,options));return{cancel:function(){for(;observers.length;)observers.pop().cancel()}}}return getObserverFacade(this,keypath,callback,options)}}(utils_isObject,Ractive_prototype_observe_getObserverFacade),Ractive_prototype_fire=function(){return function(eventName){var args,i,len,subscribers=this._subs[eventName];if(subscribers)for(args=Array.prototype.slice.call(arguments,1),i=0,len=subscribers.length;len>i;i+=1)subscribers[i].apply(this,args)}}(),Ractive_prototype_find=function(){return function(selector){return this.el?this.fragment.find(selector):null}}(),utils_matches=function(isClient,createElement){var div,methodNames,unprefixed,prefixed,vendors,i,j,makeFunction;if(isClient){for(div=createElement("div"),methodNames=["matches","matchesSelector"],vendors=["o","ms","moz","webkit"],makeFunction=function(methodName){return function(node,selector){return node[methodName](selector)}},i=methodNames.length;i--;){if(unprefixed=methodNames[i],div[unprefixed])return makeFunction(unprefixed);for(j=vendors.length;j--;)if(prefixed=vendors[i]+unprefixed.substr(0,1).toUpperCase()+unprefixed.substring(1),div[prefixed])return makeFunction(prefixed)}return function(node,selector){var nodes,i;for(nodes=(node.parentNode||node.document).querySelectorAll(selector),i=nodes.length;i--;)if(nodes[i]===node)return!0;return!1}}}(config_isClient,utils_createElement),Ractive_prototype_shared_makeQuery_test=function(matches){return function(item,noDirty){var itemMatches=this._isComponentQuery?!this.selector||item.name===this.selector:matches(item.node,this.selector);return itemMatches?(this.push(item.node||item.instance),noDirty||this._makeDirty(),!0):void 0}}(utils_matches),Ractive_prototype_shared_makeQuery_cancel=function(){return function(){var liveQueries,selector,index;liveQueries=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],selector=this.selector,index=liveQueries.indexOf(selector),-1!==index&&(liveQueries.splice(index,1),liveQueries[selector]=null)}}(),Ractive_prototype_shared_makeQuery_sortByItemPosition=function(){function getParent(item){var parentFragment;return(parentFragment=item.parentFragment)?parentFragment.owner:item.component&&(parentFragment=item.component.parentFragment)?parentFragment.owner:void 0}function getAncestry(item){var ancestry,ancestor;for(ancestry=[item],ancestor=getParent(item);ancestor;)ancestry.push(ancestor),ancestor=getParent(ancestor);return ancestry}return function(a,b){var ancestryA,ancestryB,oldestA,oldestB,mutualAncestor,indexA,indexB,fragments,fragmentA,fragmentB;for(ancestryA=getAncestry(a.component||a._ractive.proxy),ancestryB=getAncestry(b.component||b._ractive.proxy),oldestA=ancestryA[ancestryA.length-1],oldestB=ancestryB[ancestryB.length-1];oldestA&&oldestA===oldestB;)ancestryA.pop(),ancestryB.pop(),mutualAncestor=oldestA,oldestA=ancestryA[ancestryA.length-1],oldestB=ancestryB[ancestryB.length-1];if(oldestA=oldestA.component||oldestA,oldestB=oldestB.component||oldestB,fragmentA=oldestA.parentFragment,fragmentB=oldestB.parentFragment,fragmentA===fragmentB)return indexA=fragmentA.items.indexOf(oldestA),indexB=fragmentB.items.indexOf(oldestB),indexA-indexB||ancestryA.length-ancestryB.length;if(fragments=mutualAncestor.fragments)return indexA=fragments.indexOf(fragmentA),indexB=fragments.indexOf(fragmentB),indexA-indexB||ancestryA.length-ancestryB.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),Ractive_prototype_shared_makeQuery_sortByDocumentPosition=function(sortByItemPosition){return function(node,otherNode){var bitmask;return node.compareDocumentPosition?(bitmask=node.compareDocumentPosition(otherNode),2&bitmask?1:-1):sortByItemPosition(node,otherNode)}}(Ractive_prototype_shared_makeQuery_sortByItemPosition),Ractive_prototype_shared_makeQuery_sort=function(sortByDocumentPosition,sortByItemPosition){return function(){this.sort(this._isComponentQuery?sortByItemPosition:sortByDocumentPosition),this._dirty=!1}}(Ractive_prototype_shared_makeQuery_sortByDocumentPosition,Ractive_prototype_shared_makeQuery_sortByItemPosition),Ractive_prototype_shared_makeQuery_dirty=function(){return function(){this._dirty||(this._root._deferred.liveQueries.push(this),this._dirty=!0)}}(),Ractive_prototype_shared_makeQuery_remove=function(){return function(item){var index=this.indexOf(this._isComponentQuery?item.instance:item.node);-1!==index&&this.splice(index,1)}}(),Ractive_prototype_shared_makeQuery__makeQuery=function(defineProperties,test,cancel,sort,dirty,remove){return function(ractive,selector,live,isComponentQuery){var query;return query=[],defineProperties(query,{selector:{value:selector},live:{value:live},_isComponentQuery:{value:isComponentQuery},_test:{value:test}}),live?(defineProperties(query,{cancel:{value:cancel},_root:{value:ractive},_sort:{value:sort},_makeDirty:{value:dirty},_remove:{value:remove},_dirty:{value:!1,writable:!0}}),query):query}}(utils_defineProperties,Ractive_prototype_shared_makeQuery_test,Ractive_prototype_shared_makeQuery_cancel,Ractive_prototype_shared_makeQuery_sort,Ractive_prototype_shared_makeQuery_dirty,Ractive_prototype_shared_makeQuery_remove),Ractive_prototype_findAll=function(warn,matches,defineProperties,makeQuery){return function(selector,options){var liveQueries,query;return this.el?(options=options||{},liveQueries=this._liveQueries,(query=liveQueries[selector])?options&&options.live?query:query.slice():(query=makeQuery(this,selector,!!options.live,!1),query.live&&(liveQueries.push(selector),liveQueries[selector]=query),this.fragment.findAll(selector,query),query)):[]}}(utils_warn,utils_matches,utils_defineProperties,Ractive_prototype_shared_makeQuery__makeQuery),Ractive_prototype_findComponent=function(){return function(selector){return this.fragment.findComponent(selector)}}(),Ractive_prototype_findAllComponents=function(warn,matches,defineProperties,makeQuery){return function(selector,options){var liveQueries,query;return options=options||{},liveQueries=this._liveComponentQueries,(query=liveQueries[selector])?options&&options.live?query:query.slice():(query=makeQuery(this,selector,!!options.live,!0),query.live&&(liveQueries.push(selector),liveQueries[selector]=query),this.fragment.findAllComponents(selector,query),query)}}(utils_warn,utils_matches,utils_defineProperties,Ractive_prototype_shared_makeQuery__makeQuery),utils_getElement=function(){return function(input){var output;return"undefined"!=typeof window&&document&&input?input.nodeType?input:"string"==typeof input&&(output=document.getElementById(input),!output&&document.querySelector&&(output=document.querySelector(input)),output&&output.nodeType)?output:input[0]&&input[0].nodeType?input[0]:null:null}}(),render_shared_initFragment=function(types,create){return function(fragment,options){var numItems,i,parentFragment,parentRefs,ref;if(fragment.owner=options.owner,parentFragment=fragment.owner.parentFragment,fragment.root=options.root,fragment.pNode=options.pNode,fragment.contextStack=options.contextStack||[],fragment.owner.type===types.SECTION&&(fragment.index=options.index),parentFragment&&(parentRefs=parentFragment.indexRefs)){fragment.indexRefs=create(null);for(ref in parentRefs)fragment.indexRefs[ref]=parentRefs[ref]}for(fragment.priority=parentFragment?parentFragment.priority+1:1,options.indexRef&&(fragment.indexRefs||(fragment.indexRefs={}),fragment.indexRefs[options.indexRef]=options.index),fragment.items=[],numItems=options.descriptor?options.descriptor.length:0,i=0;numItems>i;i+=1)fragment.items[fragment.items.length]=fragment.createItem({parentFragment:fragment,descriptor:options.descriptor[i],index:i})}}(config_types,utils_create),render_DomFragment_shared_insertHtml=function(createElement){var elementCache={};return function(html,tagName,docFrag){var container,nodes=[];if(html)for(container=elementCache[tagName]||(elementCache[tagName]=createElement(tagName)),container.innerHTML=html;container.firstChild;)nodes[nodes.length]=container.firstChild,docFrag.appendChild(container.firstChild);return nodes}}(utils_createElement),render_DomFragment_Text=function(types){var DomText,lessThan,greaterThan;return lessThan=/</g,greaterThan=/>/g,DomText=function(options,docFrag){this.type=types.TEXT,this.descriptor=options.descriptor,docFrag&&(this.node=document.createTextNode(options.descriptor),docFrag.appendChild(this.node))},DomText.prototype={detach:function(){return this.node.parentNode.removeChild(this.node),this.node},teardown:function(destroy){destroy&&this.detach()},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace(lessThan,"&lt;").replace(greaterThan,"&gt;")}},DomText}(config_types),shared_teardown=function(unregisterDependant){return function(thing){if(thing.keypath)unregisterDependant(thing);else{var index=thing.root._pendingResolution.indexOf(thing);-1!==index&&thing.root._pendingResolution.splice(index,1)}}}(shared_unregisterDependant),render_shared_Evaluator_Reference=function(types,isEqual,defineProperty,registerDependant,unregisterDependant){function wrapFunction(fn,ractive,evaluator){var prop,evaluators,index;if(!thisPattern.test(fn.toString()))return defineProperty(fn,"_nowrap",{value:!0}),fn;if(!fn["_"+ractive._guid]){defineProperty(fn,"_"+ractive._guid,{value:function(){var originalCaptured,result,i,evaluator;if(originalCaptured=ractive._captured,originalCaptured||(ractive._captured=[]),result=fn.apply(ractive,arguments),ractive._captured.length)for(i=evaluators.length;i--;)evaluator=evaluators[i],evaluator.updateSoftDependencies(ractive._captured);return ractive._captured=originalCaptured,result},writable:!0});for(prop in fn)fn.hasOwnProperty(prop)&&(fn["_"+ractive._guid][prop]=fn[prop]);fn["_"+ractive._guid+"_evaluators"]=[]}return evaluators=fn["_"+ractive._guid+"_evaluators"],index=evaluators.indexOf(evaluator),-1===index&&evaluators.push(evaluator),fn["_"+ractive._guid]}var Reference,thisPattern;return thisPattern=/this/,Reference=function(root,keypath,evaluator,argNum,priority){var value;this.evaluator=evaluator,this.keypath=keypath,this.root=root,this.argNum=argNum,this.type=types.REFERENCE,this.priority=priority,value=root.get(keypath),"function"==typeof value&&(value=wrapFunction(value,root,evaluator)),this.value=evaluator.values[argNum]=value,registerDependant(this)},Reference.prototype={update:function(){var value=this.root.get(this.keypath);
"function"!=typeof value||value._nowrap||(value=wrapFunction(value,this.root,this.evaluator)),isEqual(value,this.value)||(this.evaluator.values[this.argNum]=value,this.evaluator.bubble(),this.value=value)},teardown:function(){unregisterDependant(this)}},Reference}(config_types,utils_isEqual,utils_defineProperty,shared_registerDependant,shared_unregisterDependant),render_shared_Evaluator_SoftReference=function(isEqual,registerDependant,unregisterDependant){var SoftReference=function(root,keypath,evaluator){this.root=root,this.keypath=keypath,this.priority=evaluator.priority,this.evaluator=evaluator,registerDependant(this)};return SoftReference.prototype={update:function(){var value=this.root.get(this.keypath);isEqual(value,this.value)||(this.evaluator.bubble(),this.value=value)},teardown:function(){unregisterDependant(this)}},SoftReference}(utils_isEqual,shared_registerDependant,shared_unregisterDependant),render_shared_Evaluator__Evaluator=function(isEqual,defineProperty,clearCache,notifyDependants,registerDependant,unregisterDependant,adaptIfNecessary,Reference,SoftReference){function getFunctionFromString(str,i){var fn,args;if(str=str.replace(/\$\{([0-9]+)\}/g,"_$1"),cache[str])return cache[str];for(args=[];i--;)args[i]="_"+i;return fn=new Function(args.join(","),"return("+str+")"),cache[str]=fn,fn}var Evaluator,cache={};return Evaluator=function(root,keypath,functionStr,args,priority){var i,arg;for(this.root=root,this.keypath=keypath,this.priority=priority,this.fn=getFunctionFromString(functionStr,args.length),this.values=[],this.refs=[],i=args.length;i--;)(arg=args[i])?arg[0]?this.values[i]=arg[1]:this.refs[this.refs.length]=new Reference(root,arg[1],this,i,priority):this.values[i]=void 0;this.selfUpdating=this.refs.length<=1,this.update()},Evaluator.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._deferred.evals.push(this),this.deferred=!0)},update:function(){var value;if(this.evaluating)return this;this.evaluating=!0;try{value=this.fn.apply(null,this.values)}catch(err){if(this.root.debug)throw err;value=void 0}return isEqual(value,this.value)||(clearCache(this.root,this.keypath),this.root._cache[this.keypath]=value,adaptIfNecessary(this.root,this.keypath,value,!0),this.value=value,notifyDependants(this.root,this.keypath)),this.evaluating=!1,this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();clearCache(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);for(var i=this.refs.length;i--;)this.refs[i].update();this.deferred&&(this.update(),this.deferred=!1)},updateSoftDependencies:function(softDeps){var i,keypath,ref;for(this.softRefs||(this.softRefs=[]),i=this.softRefs.length;i--;)ref=this.softRefs[i],softDeps[ref.keypath]||(this.softRefs.splice(i,1),this.softRefs[ref.keypath]=!1,ref.teardown());for(i=softDeps.length;i--;)keypath=softDeps[i],this.softRefs[keypath]||(ref=new SoftReference(this.root,keypath,this),this.softRefs[this.softRefs.length]=ref,this.softRefs[keypath]=!0);this.selfUpdating=this.refs.length+this.softRefs.length<=1}},Evaluator}(utils_isEqual,utils_defineProperty,shared_clearCache,shared_notifyDependants,shared_registerDependant,shared_unregisterDependant,shared_adaptIfNecessary,render_shared_Evaluator_Reference,render_shared_Evaluator_SoftReference),render_shared_ExpressionResolver_ReferenceScout=function(resolveRef,teardown){var ReferenceScout=function(resolver,ref,contextStack,argNum){var keypath,root;root=this.root=resolver.root,keypath=resolveRef(root,ref,contextStack),void 0!==keypath?resolver.resolveRef(argNum,!1,keypath):(this.ref=ref,this.argNum=argNum,this.resolver=resolver,this.contextStack=contextStack,root._pendingResolution[root._pendingResolution.length]=this)};return ReferenceScout.prototype={resolve:function(keypath){this.keypath=keypath,this.resolver.resolveRef(this.argNum,!1,keypath)},teardown:function(){this.keypath||teardown(this)}},ReferenceScout}(shared_resolveRef,shared_teardown),render_shared_ExpressionResolver_isRegularKeypath=function(){var keyPattern=/^(?:(?:[a-zA-Z$_][a-zA-Z$_0-9]*)|(?:[0-9]|[1-9][0-9]+))$/;return function(keypath){var keys,key,i;for(keys=keypath.split("."),i=keys.length;i--;)if(key=keys[i],"undefined"===key||!keyPattern.test(key))return!1;return!0}}(),render_shared_ExpressionResolver_getKeypath=function(normaliseKeypath,isRegularKeypath){return function(str,args){var unique,normalised;return unique=str.replace(/\$\{([0-9]+)\}/g,function(match,$1){return args[$1]?args[$1][1]:"undefined"}),normalised=normaliseKeypath(unique),isRegularKeypath(normalised)?normalised:"${"+unique.replace(/[\.\[\]]/g,"-")+"}"}}(utils_normaliseKeypath,render_shared_ExpressionResolver_isRegularKeypath),render_shared_ExpressionResolver_reassignDependants=function(registerDependant,unregisterDependant){function cascade(ractive,oldKeypath,toReassign){var map,i;if(map=ractive._depsMap[oldKeypath])for(i=map.length;i--;)gatherDependants(ractive,map[i],toReassign)}function gatherDependants(ractive,oldKeypath,toReassign){var priority,dependantsByKeypath,dependants,i;for(priority=ractive._deps.length;priority--;)if(dependantsByKeypath=ractive._deps[priority],dependantsByKeypath&&(dependants=dependantsByKeypath[oldKeypath]))for(i=dependants.length;i--;)toReassign.push(dependants[i]);cascade(ractive,oldKeypath,toReassign)}return function(ractive,oldKeypath,newKeypath){var toReassign,i,dependant;for(toReassign=[],gatherDependants(ractive,oldKeypath,toReassign),i=toReassign.length;i--;)dependant=toReassign[i],unregisterDependant(dependant),dependant.keypath=dependant.keypath.replace(oldKeypath,newKeypath),registerDependant(dependant),dependant.update()}}(shared_registerDependant,shared_unregisterDependant),render_shared_ExpressionResolver__ExpressionResolver=function(Evaluator,ReferenceScout,getKeypath,reassignDependants){var ExpressionResolver=function(mustache){var expression,i,len,ref,indexRefs;if(this.root=mustache.root,this.mustache=mustache,this.args=[],this.scouts=[],expression=mustache.descriptor.x,indexRefs=mustache.parentFragment.indexRefs,this.str=expression.s,len=this.unresolved=this.args.length=expression.r?expression.r.length:0,!len)return this.resolved=this.ready=!0,void this.bubble();for(i=0;len>i;i+=1)ref=expression.r[i],indexRefs&&void 0!==indexRefs[ref]?this.resolveRef(i,!0,indexRefs[ref]):this.scouts[this.scouts.length]=new ReferenceScout(this,ref,mustache.contextStack,i);this.ready=!0,this.bubble()};return ExpressionResolver.prototype={bubble:function(){var oldKeypath;this.ready&&(oldKeypath=this.keypath,this.keypath=getKeypath(this.str,this.args),"${"===this.keypath.substr(0,2)&&this.createEvaluator(),oldKeypath?reassignDependants(this.root,oldKeypath,this.keypath):this.mustache.resolve(this.keypath))},teardown:function(){for(;this.scouts.length;)this.scouts.pop().teardown()},resolveRef:function(argNum,isIndexRef,value){this.args[argNum]=[isIndexRef,value],this.bubble(),this.resolved=!--this.unresolved},createEvaluator:function(){this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():this.root._evaluators[this.keypath]=new Evaluator(this.root,this.keypath,this.str,this.args,this.mustache.priority)}},ExpressionResolver}(render_shared_Evaluator__Evaluator,render_shared_ExpressionResolver_ReferenceScout,render_shared_ExpressionResolver_getKeypath,render_shared_ExpressionResolver_reassignDependants),render_shared_initMustache=function(resolveRef,ExpressionResolver){return function(mustache,options){var keypath,indexRef,parentFragment;parentFragment=mustache.parentFragment=options.parentFragment,mustache.root=parentFragment.root,mustache.contextStack=parentFragment.contextStack,mustache.descriptor=options.descriptor,mustache.index=options.index||0,mustache.priority=parentFragment.priority,mustache.type=options.descriptor.t,options.descriptor.r&&(parentFragment.indexRefs&&void 0!==parentFragment.indexRefs[options.descriptor.r]?(indexRef=parentFragment.indexRefs[options.descriptor.r],mustache.indexRef=options.descriptor.r,mustache.value=indexRef,mustache.render(mustache.value)):(keypath=resolveRef(mustache.root,options.descriptor.r,mustache.contextStack),void 0!==keypath?mustache.resolve(keypath):(mustache.ref=options.descriptor.r,mustache.root._pendingResolution[mustache.root._pendingResolution.length]=mustache))),options.descriptor.x&&(mustache.expressionResolver=new ExpressionResolver(mustache)),mustache.descriptor.n&&!mustache.hasOwnProperty("value")&&mustache.render(void 0)}}(shared_resolveRef,render_shared_ExpressionResolver__ExpressionResolver),render_shared_resolveMustache=function(types,registerDependant,unregisterDependant){return function(keypath){keypath!==this.keypath&&(this.registered&&unregisterDependant(this),this.keypath=keypath,registerDependant(this),this.update(),this.root.twoway&&this.parentFragment.owner.type===types.ATTRIBUTE&&this.parentFragment.owner.element.bind(),this.expressionResolver&&this.expressionResolver.resolved&&(this.expressionResolver=null))}}(config_types,shared_registerDependant,shared_unregisterDependant),render_shared_updateMustache=function(isEqual){return function(){var wrapped,value;value=this.root.get(this.keypath),(wrapped=this.root._wrapped[this.keypath])&&(value=wrapped.get()),isEqual(value,this.value)||(this.render(value),this.value=value)}}(utils_isEqual),render_DomFragment_Interpolator=function(types,teardown,initMustache,resolveMustache,updateMustache){var DomInterpolator,lessThan,greaterThan;return lessThan=/</g,greaterThan=/>/g,DomInterpolator=function(options,docFrag){this.type=types.INTERPOLATOR,docFrag&&(this.node=document.createTextNode(""),docFrag.appendChild(this.node)),initMustache(this,options)},DomInterpolator.prototype={update:updateMustache,resolve:resolveMustache,detach:function(){return this.node.parentNode.removeChild(this.node),this.node},teardown:function(destroy){destroy&&this.detach(),teardown(this)},render:function(value){this.node&&(this.node.data=void 0==value?"":value)},firstNode:function(){return this.node},toString:function(){var value=void 0!=this.value?""+this.value:"";return value.replace(lessThan,"&lt;").replace(greaterThan,"&gt;")}},DomInterpolator}(config_types,shared_teardown,render_shared_initMustache,render_shared_resolveMustache,render_shared_updateMustache),render_shared_updateSection=function(isArray,isObject,create){function updateListSection(section,value,fragmentOptions){var i,length,fragmentsToRemove;if(length=value.length,length<section.length)for(fragmentsToRemove=section.fragments.splice(length,section.length-length);fragmentsToRemove.length;)fragmentsToRemove.pop().teardown(!0);else if(length>section.length)for(i=section.length;length>i;i+=1)fragmentOptions.contextStack=section.contextStack.concat(section.keypath+"."+i),fragmentOptions.index=i,section.descriptor.i&&(fragmentOptions.indexRef=section.descriptor.i),section.fragments[i]=section.createFragment(fragmentOptions);section.length=length}function updateListObjectSection(section,value,fragmentOptions){var id,fragmentsById;fragmentsById=section.fragmentsById||(section.fragmentsById=create(null));for(id in fragmentsById)void 0===value[id]&&fragmentsById[id]&&(fragmentsById[id].teardown(!0),fragmentsById[id]=null);for(id in value)void 0===value[id]||fragmentsById[id]||(fragmentOptions.contextStack=section.contextStack.concat(section.keypath+"."+id),fragmentOptions.index=id,section.descriptor.i&&(fragmentOptions.indexRef=section.descriptor.i),fragmentsById[id]=section.createFragment(fragmentOptions))}function updateContextSection(section,fragmentOptions){section.length||(fragmentOptions.contextStack=section.contextStack.concat(section.keypath),fragmentOptions.index=0,section.fragments[0]=section.createFragment(fragmentOptions),section.length=1)}function updateConditionalSection(section,value,inverted,fragmentOptions){var doRender,emptyArray,fragmentsToRemove,fragment;if(emptyArray=isArray(value)&&0===value.length,doRender=inverted?emptyArray||!value:value&&!emptyArray){if(section.length||(fragmentOptions.contextStack=section.contextStack,fragmentOptions.index=0,section.fragments[0]=section.createFragment(fragmentOptions),section.length=1),section.length>1)for(fragmentsToRemove=section.fragments.splice(1);fragment=fragmentsToRemove.pop();)fragment.teardown(!0)}else section.length&&(section.teardownFragments(!0),section.length=0)}return function(section,value){var fragmentOptions;return fragmentOptions={descriptor:section.descriptor.f,root:section.root,pNode:section.parentFragment.pNode,owner:section},section.descriptor.n?void updateConditionalSection(section,value,!0,fragmentOptions):void(isArray(value)?updateListSection(section,value,fragmentOptions):isObject(value)?section.descriptor.i?updateListObjectSection(section,value,fragmentOptions):updateContextSection(section,fragmentOptions):updateConditionalSection(section,value,!1,fragmentOptions))}}(utils_isArray,utils_isObject,utils_create),render_DomFragment_Section_reassignFragment=function(types,unregisterDependant,ExpressionResolver){function reassignFragment(fragment,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath){var i,item,context,query;if(!fragment.html){for(fragment.indexRefs&&void 0!==fragment.indexRefs[indexRef]&&(fragment.indexRefs[indexRef]=newIndex),i=fragment.contextStack.length;i--;)context=fragment.contextStack[i],context.substr(0,oldKeypath.length)===oldKeypath&&(fragment.contextStack[i]=context.replace(oldKeypath,newKeypath));for(i=fragment.items.length;i--;)switch(item=fragment.items[i],item.type){case types.ELEMENT:reassignElement(item,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath);break;case types.PARTIAL:reassignFragment(item.fragment,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath);break;case types.COMPONENT:reassignFragment(item.instance.fragment,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath),(query=fragment.root._liveComponentQueries[item.name])&&query._makeDirty();break;case types.SECTION:case types.INTERPOLATOR:case types.TRIPLE:reassignMustache(item,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath)}}}function reassignElement(element,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath){var i,attribute,storage,masterEventName,proxies,proxy,binding,bindings,liveQueries,ractive;for(i=element.attributes.length;i--;)attribute=element.attributes[i],attribute.fragment&&(reassignFragment(attribute.fragment,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath),attribute.twoway&&attribute.updateBindings());if(storage=element.node._ractive){storage.keypath.substr(0,oldKeypath.length)===oldKeypath&&(storage.keypath=storage.keypath.replace(oldKeypath,newKeypath)),void 0!==indexRef&&(storage.index[indexRef]=newIndex);for(masterEventName in storage.events)for(proxies=storage.events[masterEventName].proxies,i=proxies.length;i--;)proxy=proxies[i],"object"==typeof proxy.n&&reassignFragment(proxy.a,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath),proxy.d&&reassignFragment(proxy.d,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath);(binding=storage.binding)&&binding.keypath.substr(0,oldKeypath.length)===oldKeypath&&(bindings=storage.root._twowayBindings[binding.keypath],bindings.splice(bindings.indexOf(binding),1),binding.keypath=binding.keypath.replace(oldKeypath,newKeypath),bindings=storage.root._twowayBindings[binding.keypath]||(storage.root._twowayBindings[binding.keypath]=[]),bindings.push(binding))}if(element.fragment&&reassignFragment(element.fragment,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath),liveQueries=element.liveQueries)for(ractive=element.root,i=liveQueries.length;i--;)ractive._liveQueries[liveQueries[i]]._makeDirty()}function reassignMustache(mustache,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath){var i;if(mustache.descriptor.x&&(mustache.expressionResolver&&mustache.expressionResolver.teardown(),mustache.expressionResolver=new ExpressionResolver(mustache)),mustache.keypath?mustache.keypath.substr(0,oldKeypath.length)===oldKeypath&&mustache.resolve(mustache.keypath.replace(oldKeypath,newKeypath)):mustache.indexRef===indexRef&&(mustache.value=newIndex,mustache.render(newIndex)),mustache.fragments)for(i=mustache.fragments.length;i--;)reassignFragment(mustache.fragments[i],indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath)}return reassignFragment}(config_types,shared_unregisterDependant,render_shared_ExpressionResolver__ExpressionResolver),render_DomFragment_Section_reassignFragments=function(types,reassignFragment,preDomUpdate){return function(root,section,start,end,by){var i,fragment,indexRef,oldIndex,newIndex,oldKeypath,newKeypath;for(indexRef=section.descriptor.i,i=start;end>i;i+=1)fragment=section.fragments[i],oldIndex=i-by,newIndex=i,oldKeypath=section.keypath+"."+(i-by),newKeypath=section.keypath+"."+i,fragment.index+=by,reassignFragment(fragment,indexRef,oldIndex,newIndex,by,oldKeypath,newKeypath);preDomUpdate(root)}}(config_types,render_DomFragment_Section_reassignFragment,shared_preDomUpdate),render_DomFragment_Section_prototype_merge=function(reassignFragment){return function(newIndices){var parentFragment,firstChange,changed,i,newLength,newFragments,toTeardown,fragmentOptions,fragment,nextNode,section=this;if(parentFragment=this.parentFragment,newFragments=[],newIndices.forEach(function(newIndex,oldIndex){var by,oldKeypath,newKeypath;return newIndex===oldIndex?void(newFragments[newIndex]=section.fragments[oldIndex]):(void 0===firstChange&&(firstChange=oldIndex),-1===newIndex?void(toTeardown||(toTeardown=[])).push(section.fragments[oldIndex]):(by=newIndex-oldIndex,oldKeypath=section.keypath+"."+oldIndex,newKeypath=section.keypath+"."+newIndex,reassignFragment(section.fragments[oldIndex],section.descriptor.i,oldIndex,newIndex,by,oldKeypath,newKeypath),newFragments[newIndex]=section.fragments[oldIndex],void(changed=!0)))}),toTeardown)for(;fragment=toTeardown.pop();)fragment.teardown(!0);if(void 0===firstChange&&(firstChange=this.length),newLength=this.root.get(this.keypath).length,newLength!==firstChange){for(fragmentOptions={descriptor:this.descriptor.f,root:this.root,pNode:parentFragment.pNode,owner:this},this.descriptor.i&&(fragmentOptions.indexRef=this.descriptor.i),i=firstChange;newLength>i;i+=1)(fragment=newFragments[i])?this.docFrag.appendChild(fragment.detach(!1)):(fragmentOptions.contextStack=this.contextStack.concat(this.keypath+"."+i),fragmentOptions.index=i,fragment=this.createFragment(fragmentOptions)),this.fragments[i]=fragment;nextNode=parentFragment.findNextNode(this),parentFragment.pNode.insertBefore(this.docFrag,nextNode),this.length=newLength}}}(render_DomFragment_Section_reassignFragment),circular=function(){return[]}(),render_DomFragment_Section__Section=function(types,isClient,initMustache,updateMustache,resolveMustache,updateSection,reassignFragment,reassignFragments,merge,teardown,circular){var DomSection,DomFragment;return circular.push(function(){DomFragment=circular.DomFragment}),DomSection=function(options,docFrag){this.type=types.SECTION,this.inverted=!!options.descriptor.n,this.fragments=[],this.length=0,docFrag&&(this.docFrag=document.createDocumentFragment()),this.initialising=!0,initMustache(this,options),docFrag&&docFrag.appendChild(this.docFrag),this.initialising=!1},DomSection.prototype={update:updateMustache,resolve:resolveMustache,smartUpdate:function(methodName,args){var fragmentOptions;("push"===methodName||"unshift"===methodName||"splice"===methodName)&&(fragmentOptions={descriptor:this.descriptor.f,root:this.root,pNode:this.parentFragment.pNode,owner:this},this.descriptor.i&&(fragmentOptions.indexRef=this.descriptor.i)),this[methodName]&&(this.rendering=!0,this[methodName](fragmentOptions,args),this.rendering=!1)},pop:function(){this.length&&(this.fragments.pop().teardown(!0),this.length-=1)},push:function(fragmentOptions,args){var start,end,i;for(start=this.length,end=start+args.length,i=start;end>i;i+=1)fragmentOptions.contextStack=this.contextStack.concat(this.keypath+"."+i),fragmentOptions.index=i,this.fragments[i]=this.createFragment(fragmentOptions);this.length+=args.length,this.parentFragment.pNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},shift:function(){this.splice(null,[0,1])},unshift:function(fragmentOptions,args){this.splice(fragmentOptions,[0,0].concat(new Array(args.length)))},splice:function(fragmentOptions,args){var insertionPoint,addedItems,removedItems,balance,i,start,end,spliceArgs,reassignStart;if(args.length&&(start=+(args[0]<0?this.length+args[0]:args[0]),addedItems=Math.max(0,args.length-2),removedItems=void 0!==args[1]?args[1]:this.length-start,removedItems=Math.min(removedItems,this.length-start),balance=addedItems-removedItems)){if(0>balance){for(end=start-balance,i=start;end>i;i+=1)this.fragments[i].teardown(!0);this.fragments.splice(start,-balance)}else{for(end=start+balance,insertionPoint=this.fragments[start]?this.fragments[start].firstNode():this.parentFragment.findNextNode(this),spliceArgs=[start,0].concat(new Array(balance)),this.fragments.splice.apply(this.fragments,spliceArgs),i=start;end>i;i+=1)fragmentOptions.contextStack=this.contextStack.concat(this.keypath+"."+i),fragmentOptions.index=i,this.fragments[i]=this.createFragment(fragmentOptions);this.parentFragment.pNode.insertBefore(this.docFrag,insertionPoint)}this.length+=balance,reassignStart=start+addedItems,reassignFragments(this.root,this,reassignStart,this.length,balance)}},merge:merge,detach:function(){var i,len;for(len=this.fragments.length,i=0;len>i;i+=1)this.docFrag.appendChild(this.fragments[i].detach());return this.docFrag},teardown:function(destroy){this.teardownFragments(destroy),teardown(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(fragment){return this.fragments[fragment.index+1]?this.fragments[fragment.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(destroy){for(var id,fragment;fragment=this.fragments.shift();)fragment.teardown(destroy);if(this.fragmentsById)for(id in this.fragmentsById)this.fragments[id]&&(this.fragmentsById[id].teardown(destroy),this.fragmentsById[id]=null)},render:function(value){var nextNode,wrapped;(wrapped=this.root._wrapped[this.keypath])&&(value=wrapped.get()),this.rendering||(this.rendering=!0,updateSection(this,value),this.rendering=!1,(!this.docFrag||this.docFrag.childNodes.length)&&!this.initialising&&isClient&&(nextNode=this.parentFragment.findNextNode(this),nextNode&&nextNode.parentNode===this.parentFragment.pNode?this.parentFragment.pNode.insertBefore(this.docFrag,nextNode):this.parentFragment.pNode.appendChild(this.docFrag)))},createFragment:function(options){var fragment=new DomFragment(options);return this.docFrag&&this.docFrag.appendChild(fragment.docFrag),fragment},toString:function(){var str,i,id,len;for(str="",i=0,len=this.length,i=0;len>i;i+=1)str+=this.fragments[i].toString();if(this.fragmentsById)for(id in this.fragmentsById)this.fragmentsById[id]&&(str+=this.fragmentsById[id].toString());return str},find:function(selector){var i,len,queryResult;for(len=this.fragments.length,i=0;len>i;i+=1)if(queryResult=this.fragments[i].find(selector))return queryResult;return null},findAll:function(selector,query){var i,len;for(len=this.fragments.length,i=0;len>i;i+=1)this.fragments[i].findAll(selector,query)},findComponent:function(selector){var i,len,queryResult;for(len=this.fragments.length,i=0;len>i;i+=1)if(queryResult=this.fragments[i].findComponent(selector))return queryResult;return null},findAllComponents:function(selector,query){var i,len;for(len=this.fragments.length,i=0;len>i;i+=1)this.fragments[i].findAllComponents(selector,query)}},DomSection}(config_types,config_isClient,render_shared_initMustache,render_shared_updateMustache,render_shared_resolveMustache,render_shared_updateSection,render_DomFragment_Section_reassignFragment,render_DomFragment_Section_reassignFragments,render_DomFragment_Section_prototype_merge,shared_teardown,circular),render_DomFragment_Triple=function(types,matches,initMustache,updateMustache,resolveMustache,insertHtml,teardown){var DomTriple=function(options,docFrag){this.type=types.TRIPLE,docFrag&&(this.nodes=[],this.docFrag=document.createDocumentFragment()),this.initialising=!0,initMustache(this,options),docFrag&&docFrag.appendChild(this.docFrag),this.initialising=!1};return DomTriple.prototype={update:updateMustache,resolve:resolveMustache,detach:function(){for(var i=this.nodes.length;i--;)this.docFrag.appendChild(this.nodes[i]);return this.docFrag},teardown:function(destroy){destroy&&(this.detach(),this.docFrag=this.nodes=null),teardown(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(html){var node,pNode;if(this.nodes){for(;this.nodes.length;)node=this.nodes.pop(),node.parentNode.removeChild(node);if(!html)return void(this.nodes=[]);pNode=this.parentFragment.pNode,this.nodes=insertHtml(html,pNode.tagName,this.docFrag),this.initialising||pNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))}},toString:function(){return void 0!=this.value?this.value:""},find:function(selector){var i,len,node,queryResult;for(len=this.nodes.length,i=0;len>i;i+=1)if(node=this.nodes[i],1===node.nodeType){if(matches(node,selector))return node;if(queryResult=node.querySelector(selector))return queryResult}return null},findAll:function(selector,queryResult){var i,len,node,queryAllResult,numNodes,j;for(len=this.nodes.length,i=0;len>i;i+=1)if(node=this.nodes[i],1===node.nodeType&&(matches(node,selector)&&queryResult.push(node),queryAllResult=node.querySelectorAll(selector)))for(numNodes=queryAllResult.length,j=0;numNodes>j;j+=1)queryResult.push(queryAllResult[j])}},DomTriple}(config_types,utils_matches,render_shared_initMustache,render_shared_updateMustache,render_shared_resolveMustache,render_DomFragment_shared_insertHtml,shared_teardown),render_DomFragment_Element_initialise_getElementNamespace=function(namespaces){return function(descriptor,parentNode){return descriptor.a&&descriptor.a.xmlns?descriptor.a.xmlns:"svg"===descriptor.e?namespaces.svg:parentNode.namespaceURI||namespaces.html}}(config_namespaces),render_DomFragment_shared_enforceCase=function(){var svgCamelCaseElements,svgCamelCaseAttributes,createMap,map;return svgCamelCaseElements="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),svgCamelCaseAttributes="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),createMap=function(items){for(var map={},i=items.length;i--;)map[items[i].toLowerCase()]=items[i];return map},map=createMap(svgCamelCaseElements.concat(svgCamelCaseAttributes)),function(elementName){var lowerCaseElementName=elementName.toLowerCase();return map[lowerCaseElementName]||lowerCaseElementName}}(),render_DomFragment_Attribute_helpers_determineNameAndNamespace=function(namespaces,enforceCase){return function(attribute,name){var colonIndex,namespacePrefix;if(colonIndex=name.indexOf(":"),-1===colonIndex||(namespacePrefix=name.substr(0,colonIndex),"xmlns"===namespacePrefix))attribute.name=attribute.element.namespace!==namespaces.html?enforceCase(name):name,attribute.lcName=attribute.name.toLowerCase();else if(name=name.substring(colonIndex+1),attribute.name=enforceCase(name),attribute.lcName=attribute.name.toLowerCase(),attribute.namespace=namespaces[namespacePrefix.toLowerCase()],!attribute.namespace)throw'Unknown namespace ("'+namespacePrefix+'")'}}(config_namespaces,render_DomFragment_shared_enforceCase),render_DomFragment_Attribute_helpers_setStaticAttribute=function(namespaces){return function(attribute,options){var node,value=null===options.value?"":options.value;(node=options.pNode)&&(attribute.namespace?node.setAttributeNS(attribute.namespace,options.name,value):"style"===options.name&&node.style.setAttribute?node.style.setAttribute("cssText",value):"class"!==options.name||node.namespaceURI&&node.namespaceURI!==namespaces.html?node.setAttribute(options.name,value):node.className=value,"id"===attribute.name&&(options.root.nodes[options.value]=node),"value"===attribute.name&&(node._ractive.value=options.value)),attribute.value=options.value}}(config_namespaces),render_DomFragment_Attribute_helpers_determinePropertyName=function(namespaces){var propertyNames={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(attribute,options){var propertyName;!attribute.pNode||attribute.namespace||options.pNode.namespaceURI&&options.pNode.namespaceURI!==namespaces.html||(propertyName=propertyNames[attribute.name]||attribute.name,void 0!==options.pNode[propertyName]&&(attribute.propertyName=propertyName),("boolean"==typeof options.pNode[propertyName]||"value"===propertyName)&&(attribute.useProperty=!0))}}(config_namespaces),render_DomFragment_Attribute_prototype_bind=function(types,warn,arrayContentsMatch,getValueFromCheckboxes){var bindAttribute,getInterpolator,updateModel,update,getBinding,inheritProperties,MultipleSelectBinding,SelectBinding,RadioNameBinding,CheckboxNameBinding,CheckedBinding,FileListBinding,ContentEditableBinding,GenericBinding;return bindAttribute=function(){var interpolator,binding,bindings,node=this.pNode;return this.fragment?(interpolator=getInterpolator(this))?(this.interpolator=interpolator,this.keypath=interpolator.keypath||interpolator.descriptor.r,(binding=getBinding(this))?(node._ractive.binding=this.element.binding=binding,this.twoway=!0,bindings=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]),bindings[bindings.length]=binding,!0):!1):!1:!1},updateModel=function(){this._ractive.binding.update()},update=function(){var value=this._ractive.root.get(this._ractive.binding.keypath);this.value=void 0==value?"":value},getInterpolator=function(attribute){var item,errorMessage;return 1!==attribute.fragment.items.length?null:(item=attribute.fragment.items[0],item.type!==types.INTERPOLATOR?null:item.keypath||item.ref?item.keypath&&"${"===item.keypath.substr(0,2)?(errorMessage="You cannot set up two-way binding against an expression "+item.keypath,attribute.root.debug&&warn(errorMessage),null):item:null)},getBinding=function(attribute){var node=attribute.pNode;if("SELECT"===node.tagName)return node.multiple?new MultipleSelectBinding(attribute,node):new SelectBinding(attribute,node);if("checkbox"===node.type||"radio"===node.type){if("name"===attribute.propertyName){if("checkbox"===node.type)return new CheckboxNameBinding(attribute,node);if("radio"===node.type)return new RadioNameBinding(attribute,node)
}return"checked"===attribute.propertyName?new CheckedBinding(attribute,node):null}return"value"!==attribute.lcName&&warn("This is... odd"),"file"===node.type?new FileListBinding(attribute,node):node.getAttribute("contenteditable")?new ContentEditableBinding(attribute,node):new GenericBinding(attribute,node)},MultipleSelectBinding=function(attribute,node){var valueFromModel;inheritProperties(this,attribute,node),node.addEventListener("change",updateModel,!1),valueFromModel=this.root.get(this.keypath),void 0===valueFromModel&&this.update()},MultipleSelectBinding.prototype={value:function(){var value,options,i,len;for(value=[],options=this.node.options,len=options.length,i=0;len>i;i+=1)options[i].selected&&(value[value.length]=options[i]._ractive.value);return value},update:function(){var attribute,previousValue,value;return attribute=this.attr,previousValue=attribute.value,value=this.value(),void 0!==previousValue&&arrayContentsMatch(value,previousValue)||(attribute.receiving=!0,attribute.value=value,this.root.set(this.keypath,value),attribute.receiving=!1),this},deferUpdate:function(){this.deferred!==!0&&(this.root._deferred.attrs.push(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",updateModel,!1)}},SelectBinding=function(attribute,node){var valueFromModel;inheritProperties(this,attribute,node),node.addEventListener("change",updateModel,!1),valueFromModel=this.root.get(this.keypath),void 0===valueFromModel&&this.update()},SelectBinding.prototype={value:function(){var options,i,len;for(options=this.node.options,len=options.length,i=0;len>i;i+=1)if(options[i].selected)return options[i]._ractive.value},update:function(){var value=this.value();return this.attr.receiving=!0,this.attr.value=value,this.root.set(this.keypath,value),this.attr.receiving=!1,this},deferUpdate:function(){this.deferred!==!0&&(this.root._deferred.attrs.push(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",updateModel,!1)}},RadioNameBinding=function(attribute,node){var valueFromModel;this.radioName=!0,inheritProperties(this,attribute,node),node.name="{{"+attribute.keypath+"}}",node.addEventListener("change",updateModel,!1),node.attachEvent&&node.addEventListener("click",updateModel,!1),valueFromModel=this.root.get(this.keypath),void 0!==valueFromModel?node.checked=valueFromModel==node._ractive.value:this.root._deferred.radios.push(this)},RadioNameBinding.prototype={value:function(){return this.node._ractive?this.node._ractive.value:this.node.value},update:function(){var node=this.node;node.checked&&(this.attr.receiving=!0,this.root.set(this.keypath,this.value()),this.attr.receiving=!1)},teardown:function(){this.node.removeEventListener("change",updateModel,!1),this.node.removeEventListener("click",updateModel,!1)}},CheckboxNameBinding=function(attribute,node){var valueFromModel,checked;this.checkboxName=!0,inheritProperties(this,attribute,node),node.name="{{"+this.keypath+"}}",node.addEventListener("change",updateModel,!1),node.attachEvent&&node.addEventListener("click",updateModel,!1),valueFromModel=this.root.get(this.keypath),void 0!==valueFromModel?(checked=-1!==valueFromModel.indexOf(node._ractive.value),node.checked=checked):-1===this.root._deferred.checkboxes.indexOf(this.keypath)&&this.root._deferred.checkboxes.push(this.keypath)},CheckboxNameBinding.prototype={changed:function(){return this.node.checked!==!!this.checked},update:function(){this.checked=this.node.checked,this.attr.receiving=!0,this.root.set(this.keypath,getValueFromCheckboxes(this.root,this.keypath)),this.attr.receiving=!1},teardown:function(){this.node.removeEventListener("change",updateModel,!1),this.node.removeEventListener("click",updateModel,!1)}},CheckedBinding=function(attribute,node){inheritProperties(this,attribute,node),node.addEventListener("change",updateModel,!1),node.attachEvent&&node.addEventListener("click",updateModel,!1)},CheckedBinding.prototype={value:function(){return this.node.checked},update:function(){this.attr.receiving=!0,this.root.set(this.keypath,this.value()),this.attr.receiving=!1},teardown:function(){this.node.removeEventListener("change",updateModel,!1),this.node.removeEventListener("click",updateModel,!1)}},FileListBinding=function(attribute,node){inheritProperties(this,attribute,node),node.addEventListener("change",updateModel,!1)},FileListBinding.prototype={value:function(){return this.attr.pNode.files},update:function(){this.attr.root.set(this.attr.keypath,this.value())},teardown:function(){this.node.removeEventListener("change",updateModel,!1)}},ContentEditableBinding=function(attribute,node){inheritProperties(this,attribute,node),node.addEventListener("change",updateModel,!1),this.root.lazy||(node.addEventListener("input",updateModel,!1),node.attachEvent&&node.addEventListener("keyup",updateModel,!1))},ContentEditableBinding.prototype={update:function(){this.attr.receiving=!0,this.root.set(this.keypath,this.node.innerHTML),this.attr.receiving=!1},teardown:function(){this.node.removeEventListener("change",updateModel,!1),this.node.removeEventListener("input",updateModel,!1),this.node.removeEventListener("keyup",updateModel,!1)}},GenericBinding=function(attribute,node){inheritProperties(this,attribute,node),node.addEventListener("change",updateModel,!1),this.root.lazy||(node.addEventListener("input",updateModel,!1),node.attachEvent&&node.addEventListener("keyup",updateModel,!1)),this.node.addEventListener("blur",update,!1)},GenericBinding.prototype={value:function(){var value=this.attr.pNode.value;return+value+""===value&&-1===value.indexOf("e")&&(value=+value),value},update:function(){var attribute=this.attr,value=this.value();attribute.receiving=!0,attribute.root.set(attribute.keypath,value),attribute.receiving=!1},teardown:function(){this.node.removeEventListener("change",updateModel,!1),this.node.removeEventListener("input",updateModel,!1),this.node.removeEventListener("keyup",updateModel,!1),this.node.removeEventListener("blur",update,!1)}},inheritProperties=function(binding,attribute,node){binding.attr=attribute,binding.node=node,binding.root=attribute.root,binding.keypath=attribute.keypath},bindAttribute}(config_types,utils_warn,utils_arrayContentsMatch,shared_getValueFromCheckboxes),render_DomFragment_Attribute_prototype_update=function(isArray,namespaces){var updateAttribute,updateFileInputValue,deferSelect,initSelect,updateSelect,updateMultipleSelect,updateRadioName,updateCheckboxName,updateIEStyleAttribute,updateClassName,updateContentEditableValue,updateEverythingElse;return updateAttribute=function(){var node;if(!this.ready)return this;if(node=this.pNode,"SELECT"===node.tagName&&"value"===this.lcName)return this.update=deferSelect,this.deferredUpdate=initSelect,this.update();if(this.isFileInputValue)return this.update=updateFileInputValue,this;if(this.twoway&&"name"===this.lcName){if("radio"===node.type)return this.update=updateRadioName,this.update();if("checkbox"===node.type)return this.update=updateCheckboxName,this.update()}return"style"===this.lcName&&node.style.setAttribute?(this.update=updateIEStyleAttribute,this.update()):"class"!==this.lcName||node.namespaceURI&&node.namespaceURI!==namespaces.html?node.getAttribute("contenteditable")&&"value"===this.lcName?(this.update=updateContentEditableValue,this.update()):(this.update=updateEverythingElse,this.update()):(this.update=updateClassName,this.update())},updateFileInputValue=function(){return this},initSelect=function(){this.deferredUpdate=this.pNode.multiple?updateMultipleSelect:updateSelect,this.deferredUpdate()},deferSelect=function(){return this.root._deferred.selectValues.push(this),this},updateSelect=function(){var options,option,i,value=this.fragment.getValue();for(this.value=this.pNode._ractive.value=value,options=this.pNode.options,i=options.length;i--;)if(option=options[i],option._ractive.value==value)return option.selected=!0,this;return this},updateMultipleSelect=function(){var options,i,value=this.fragment.getValue();for(isArray(value)||(value=[value]),options=this.pNode.options,i=options.length;i--;)options[i].selected=-1!==value.indexOf(options[i]._ractive.value);return this.value=value,this},updateRadioName=function(){var node,value;return node=this.pNode,value=this.fragment.getValue(),node.checked=value==node._ractive.value,this},updateCheckboxName=function(){var node,value;return node=this.pNode,value=this.fragment.getValue(),isArray(value)?(node.checked=-1!==value.indexOf(node._ractive.value),this):(node.checked=value==node._ractive.value,this)},updateIEStyleAttribute=function(){var node,value;return node=this.pNode,value=this.fragment.getValue(),void 0===value&&(value=""),value!==this.value&&(node.style.setAttribute("cssText",value),this.value=value),this},updateClassName=function(){var node,value;return node=this.pNode,value=this.fragment.getValue(),void 0===value&&(value=""),value!==this.value&&(node.className=value,this.value=value),this},updateContentEditableValue=function(){var node,value;return node=this.pNode,value=this.fragment.getValue(),void 0===value&&(value=""),value!==this.value&&(this.receiving||(node.innerHTML=value),this.value=value),this},updateEverythingElse=function(){var node,value;if(node=this.pNode,value=this.fragment.getValue(),this.isValueAttribute&&(node._ractive.value=value),void 0===value&&(value=""),value!==this.value){if(this.useProperty)return this.receiving||(node[this.propertyName]=value),this.value=value,this;if(this.namespace)return node.setAttributeNS(this.namespace,this.name,value),this.value=value,this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[value]=node),node.setAttribute(this.name,value),this.value=value}return this},updateAttribute}(utils_isArray,config_namespaces),parse_Tokenizer_utils_getStringMatch=function(){return function(string){var substr;return substr=this.str.substr(this.pos,string.length),substr===string?(this.pos+=string.length,string):null}}(),parse_Tokenizer_utils_allowWhitespace=function(){var leadingWhitespace=/^\s+/;return function(){var match=leadingWhitespace.exec(this.remaining());return match?(this.pos+=match[0].length,match[0]):null}}(),parse_Tokenizer_utils_makeRegexMatcher=function(){return function(regex){return function(tokenizer){var match=regex.exec(tokenizer.str.substring(tokenizer.pos));return match?(tokenizer.pos+=match[0].length,match[1]||match[0]):null}}}(),parse_Tokenizer_getExpression_getPrimary_getLiteral_getStringLiteral_getEscapedChars=function(){function getEscapedChar(tokenizer){var character;return tokenizer.getStringMatch("\\")?(character=tokenizer.str.charAt(tokenizer.pos),tokenizer.pos+=1,character):null}return function(tokenizer){var character,chars="";for(character=getEscapedChar(tokenizer);character;)chars+=character,character=getEscapedChar(tokenizer);return chars||null}}(),parse_Tokenizer_getExpression_getPrimary_getLiteral_getStringLiteral_getQuotedString=function(makeRegexMatcher,getEscapedChars){var getUnescapedDoubleQuotedChars=makeRegexMatcher(/^[^\\"]+/),getUnescapedSingleQuotedChars=makeRegexMatcher(/^[^\\']+/);return function getQuotedString(tokenizer,singleQuotes){var start,string,escaped,unescaped,next,matcher;if(start=tokenizer.pos,string="",matcher=singleQuotes?getUnescapedSingleQuotedChars:getUnescapedDoubleQuotedChars,escaped=getEscapedChars(tokenizer),escaped&&(string+=escaped),unescaped=matcher(tokenizer),unescaped&&(string+=unescaped),!string)return"";for(next=getQuotedString(tokenizer,singleQuotes);""!==next;)string+=next;return string}}(parse_Tokenizer_utils_makeRegexMatcher,parse_Tokenizer_getExpression_getPrimary_getLiteral_getStringLiteral_getEscapedChars),parse_Tokenizer_getExpression_getPrimary_getLiteral_getStringLiteral__getStringLiteral=function(types,getQuotedString){return function(tokenizer){var start,string;return start=tokenizer.pos,tokenizer.getStringMatch('"')?(string=getQuotedString(tokenizer,!1),tokenizer.getStringMatch('"')?{t:types.STRING_LITERAL,v:string}:(tokenizer.pos=start,null)):tokenizer.getStringMatch("'")?(string=getQuotedString(tokenizer,!0),tokenizer.getStringMatch("'")?{t:types.STRING_LITERAL,v:string}:(tokenizer.pos=start,null)):null}}(config_types,parse_Tokenizer_getExpression_getPrimary_getLiteral_getStringLiteral_getQuotedString),parse_Tokenizer_getExpression_getPrimary_getLiteral_getNumberLiteral=function(types,makeRegexMatcher){var getNumber=makeRegexMatcher(/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/);return function(tokenizer){var result;return(result=getNumber(tokenizer))?{t:types.NUMBER_LITERAL,v:result}:null}}(config_types,parse_Tokenizer_utils_makeRegexMatcher),parse_Tokenizer_getExpression_shared_getName=function(makeRegexMatcher){return makeRegexMatcher(/^[a-zA-Z_$][a-zA-Z_$0-9]*/)}(parse_Tokenizer_utils_makeRegexMatcher),parse_Tokenizer_getExpression_shared_getKey=function(getStringLiteral,getNumberLiteral,getName){var identifier=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(tokenizer){var token;return(token=getStringLiteral(tokenizer))?identifier.test(token.v)?token.v:'"'+token.v.replace(/"/g,'\\"')+'"':(token=getNumberLiteral(tokenizer))?token.v:(token=getName(tokenizer))?token:void 0}}(parse_Tokenizer_getExpression_getPrimary_getLiteral_getStringLiteral__getStringLiteral,parse_Tokenizer_getExpression_getPrimary_getLiteral_getNumberLiteral,parse_Tokenizer_getExpression_shared_getName),utils_parseJSON=function(getStringMatch,allowWhitespace,getStringLiteral,getKey){function getKeyValuePair(tokenizer){var key,valueToken,pair;return tokenizer.allowWhitespace(),(key=getKey(tokenizer))?(pair={key:key},tokenizer.allowWhitespace(),tokenizer.getStringMatch(":")?(tokenizer.allowWhitespace(),(valueToken=tokenizer.getToken())?(pair.value=valueToken.v,pair):null):null):null}var Tokenizer,specials,specialsPattern,numberPattern,placeholderPattern,placeholderAtStartPattern;return specials={"true":!0,"false":!1,undefined:void 0,"null":null},specialsPattern=new RegExp("^(?:"+Object.keys(specials).join("|")+")"),numberPattern=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,placeholderPattern=/\$\{([^\}]+)\}/g,placeholderAtStartPattern=/^\$\{([^\}]+)\}/,Tokenizer=function(str,values){this.str=str,this.values=values,this.pos=0,this.result=this.getToken()},Tokenizer.prototype={remaining:function(){return this.str.substring(this.pos)},getStringMatch:getStringMatch,getToken:function(){return this.allowWhitespace(),this.getPlaceholder()||this.getSpecial()||this.getNumber()||this.getString()||this.getObject()||this.getArray()},getPlaceholder:function(){var match;return this.values?(match=placeholderAtStartPattern.exec(this.remaining()))&&this.values.hasOwnProperty(match[1])?(this.pos+=match[0].length,{v:this.values[match[1]]}):void 0:null},getSpecial:function(){var match;return(match=specialsPattern.exec(this.remaining()))?(this.pos+=match[0].length,{v:specials[match[0]]}):void 0},getNumber:function(){var match;return(match=numberPattern.exec(this.remaining()))?(this.pos+=match[0].length,{v:+match[0]}):void 0},getString:function(){var values,stringLiteral=getStringLiteral(this);return stringLiteral&&(values=this.values)?{v:stringLiteral.v.replace(placeholderPattern,function(match,$1){return values[$1]||$1})}:stringLiteral},getObject:function(){var result,pair;if(!this.getStringMatch("{"))return null;for(result={};pair=getKeyValuePair(this);){if(result[pair.key]=pair.value,this.allowWhitespace(),this.getStringMatch("}"))return{v:result};if(!this.getStringMatch(","))return null}return null},getArray:function(){var result,valueToken;if(!this.getStringMatch("["))return null;for(result=[];valueToken=this.getToken();){if(result.push(valueToken.v),this.getStringMatch("]"))return{v:result};if(!this.getStringMatch(","))return null}return null},allowWhitespace:allowWhitespace},function(str,values){var tokenizer=new Tokenizer(str,values);return tokenizer.result?{value:tokenizer.result.v,remaining:tokenizer.remaining()}:null}}(parse_Tokenizer_utils_getStringMatch,parse_Tokenizer_utils_allowWhitespace,parse_Tokenizer_getExpression_getPrimary_getLiteral_getStringLiteral__getStringLiteral,parse_Tokenizer_getExpression_shared_getKey),render_StringFragment_Interpolator=function(types,teardown,initMustache,updateMustache,resolveMustache){function stringify(value){return"string"==typeof value?value:JSON.stringify(value)}var StringInterpolator=function(options){this.type=types.INTERPOLATOR,initMustache(this,options)};return StringInterpolator.prototype={update:updateMustache,resolve:resolveMustache,render:function(value){this.value=value,this.parentFragment.bubble()},teardown:function(){teardown(this)},toString:function(){return void 0==this.value?"":stringify(this.value)}},StringInterpolator}(config_types,shared_teardown,render_shared_initMustache,render_shared_updateMustache,render_shared_resolveMustache),render_StringFragment_Section=function(types,initMustache,updateMustache,resolveMustache,updateSection,teardown,circular){var StringSection,StringFragment;return circular.push(function(){StringFragment=circular.StringFragment}),StringSection=function(options){this.type=types.SECTION,this.fragments=[],this.length=0,initMustache(this,options)},StringSection.prototype={update:updateMustache,resolve:resolveMustache,teardown:function(){this.teardownFragments(),teardown(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(value){var wrapped;(wrapped=this.root._wrapped[this.keypath])&&(value=wrapped.get()),updateSection(this,value),this.parentFragment.bubble()},createFragment:function(options){return new StringFragment(options)},toString:function(){return this.fragments.join("")}},StringSection}(config_types,render_shared_initMustache,render_shared_updateMustache,render_shared_resolveMustache,render_shared_updateSection,shared_teardown,circular),render_StringFragment_Text=function(types){var StringText=function(text){this.type=types.TEXT,this.text=text};return StringText.prototype={toString:function(){return this.text},teardown:function(){}},StringText}(config_types),render_StringFragment_prototype_toArgsList=function(warn,parseJSON){return function(){var values,counter,jsonesque,guid,errorMessage,parsed,processItems;if(!this.argsList||this.dirty){if(values={},counter=0,guid=this.root._guid,processItems=function(items){return items.map(function(item){var placeholderId,wrapped,value;return item.text?item.text:item.fragments?item.fragments.map(function(fragment){return processItems(fragment.items)}).join(""):(placeholderId=guid+"-"+counter++,value=(wrapped=item.root._wrapped[item.keypath])?wrapped.value:item.value,values[placeholderId]=value,"${"+placeholderId+"}")}).join("")},jsonesque=processItems(this.items),parsed=parseJSON("["+jsonesque+"]",values))this.argsList=parsed.value;else{if(errorMessage="Could not parse directive arguments ("+this.toString()+"). If you think this is a bug, please file an issue at http://github.com/RactiveJS/Ractive/issues",this.root.debug)throw new Error(errorMessage);warn(errorMessage),this.argsList=[jsonesque]}this.dirty=!1}return this.argsList}}(utils_warn,utils_parseJSON),render_StringFragment__StringFragment=function(types,parseJSON,initFragment,Interpolator,Section,Text,toArgsList,circular){var StringFragment=function(options){initFragment(this,options)};return StringFragment.prototype={createItem:function(options){if("string"==typeof options.descriptor)return new Text(options.descriptor);switch(options.descriptor.t){case types.INTERPOLATOR:return new Interpolator(options);case types.TRIPLE:return new Interpolator(options);case types.SECTION:return new Section(options);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.dirty=!0,this.owner.bubble()},teardown:function(){var numItems,i;for(numItems=this.items.length,i=0;numItems>i;i+=1)this.items[i].teardown()},getValue:function(){var value;return 1===this.items.length&&this.items[0].type===types.INTERPOLATOR&&(value=this.items[0].value,void 0!==value)?value:this.toString()},isSimple:function(){var i,item,containsInterpolator;if(void 0!==this.simple)return this.simple;for(i=this.items.length;i--;)if(item=this.items[i],item.type!==types.TEXT){if(item.type!==types.INTERPOLATOR)return this.simple=!1;if(containsInterpolator)return!1;containsInterpolator=!0}return this.simple=!0},toString:function(){return this.items.join("")},toJSON:function(){var parsed,value=this.getValue();return"string"==typeof value&&(parsed=parseJSON(value),value=parsed?parsed.value:value),value},toArgsList:toArgsList},circular.StringFragment=StringFragment,StringFragment}(config_types,utils_parseJSON,render_shared_initFragment,render_StringFragment_Interpolator,render_StringFragment_Section,render_StringFragment_Text,render_StringFragment_prototype_toArgsList,circular),render_DomFragment_Attribute__Attribute=function(types,determineNameAndNamespace,setStaticAttribute,determinePropertyName,bind,update,StringFragment){var DomAttribute=function(options){return this.type=types.ATTRIBUTE,this.element=options.element,determineNameAndNamespace(this,options.name),null===options.value||"string"==typeof options.value?void setStaticAttribute(this,options):(this.root=options.root,this.pNode=options.pNode,this.parentFragment=this.element.parentFragment,this.fragment=new StringFragment({descriptor:options.value,root:this.root,owner:this,contextStack:options.contextStack}),void(this.pNode&&("value"===this.name&&(this.isValueAttribute=!0,"INPUT"===this.pNode.tagName&&"file"===this.pNode.type&&(this.isFileInputValue=!0)),determinePropertyName(this,options),this.selfUpdating=this.fragment.isSimple(),this.ready=!0)))};return DomAttribute.prototype={bind:bind,update:update,updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.ref,"name"===this.propertyName&&(this.pNode.name="{{"+this.keypath+"}}")},teardown:function(){var i;if(this.boundEvents)for(i=this.boundEvents.length;i--;)this.pNode.removeEventListener(this.boundEvents[i],this.updateModel,!1);this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._deferred.attrs.push(this),this.deferred=!0)},toString:function(){var str;return null===this.value?this.name:this.fragment?(str=this.fragment.toString(),this.name+"="+JSON.stringify(str)):this.name+"="+JSON.stringify(this.value)}},DomAttribute}(config_types,render_DomFragment_Attribute_helpers_determineNameAndNamespace,render_DomFragment_Attribute_helpers_setStaticAttribute,render_DomFragment_Attribute_helpers_determinePropertyName,render_DomFragment_Attribute_prototype_bind,render_DomFragment_Attribute_prototype_update,render_StringFragment__StringFragment),render_DomFragment_Element_initialise_createElementAttributes=function(DomAttribute){return function(element,attributes){var attrName,attrValue,attr;element.attributes=[];for(attrName in attributes)attributes.hasOwnProperty(attrName)&&(attrValue=attributes[attrName],attr=new DomAttribute({element:element,name:attrName,value:attrValue,root:element.root,pNode:element.node,contextStack:element.parentFragment.contextStack}),element.attributes[element.attributes.length]=element.attributes[attrName]=attr,"name"!==attrName&&attr.update());return element.attributes}}(render_DomFragment_Attribute__Attribute),render_DomFragment_Element_initialise_appendElementChildren=function(warn,namespaces,StringFragment,circular){var DomFragment,updateCss,updateScript;return circular.push(function(){DomFragment=circular.DomFragment}),updateCss=function(){var node=this.node,content=this.fragment.toString();node.styleSheet&&(node.styleSheet.cssText=content),node.innerHTML=content},updateScript=function(){this.node.type&&"text/javascript"!==this.node.type||warn("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.innerHTML=this.fragment.toString()},function(element,node,descriptor,docFrag){var liveQueries,i,selector,queryAllResult,j;if("script"===element.lcName||"style"===element.lcName)return element.fragment=new StringFragment({descriptor:descriptor.f,root:element.root,contextStack:element.parentFragment.contextStack,owner:element}),void(docFrag&&("script"===element.lcName?(element.bubble=updateScript,element.node.innerHTML=element.fragment.toString()):(element.bubble=updateCss,element.bubble())));if("string"!=typeof descriptor.f||node&&node.namespaceURI&&node.namespaceURI!==namespaces.html)element.fragment=new DomFragment({descriptor:descriptor.f,root:element.root,pNode:node,contextStack:element.parentFragment.contextStack,owner:element}),docFrag&&node.appendChild(element.fragment.docFrag);else if(element.html=descriptor.f,docFrag)for(node.innerHTML=element.html,liveQueries=element.root._liveQueries,i=liveQueries.length;i--;)if(selector=liveQueries[i],(queryAllResult=node.querySelectorAll(selector))&&(j=queryAllResult.length))for((element.liveQueries||(element.liveQueries=[])).push(selector),element.liveQueries[selector]=[];j--;)element.liveQueries[selector][j]=queryAllResult[j]}}(utils_warn,config_namespaces,render_StringFragment__StringFragment,circular),render_DomFragment_Element_initialise_decorate_Decorator=function(warn,StringFragment){var Decorator=function(descriptor,root,owner,contextStack){var name,fragment,errorMessage;if(this.root=root,this.node=owner.node,name=descriptor.n||descriptor,"string"!=typeof name&&(fragment=new StringFragment({descriptor:name,root:this.root,owner:owner,contextStack:contextStack}),name=fragment.toString(),fragment.teardown()),descriptor.a?this.params=descriptor.a:descriptor.d&&(fragment=new StringFragment({descriptor:descriptor.d,root:this.root,owner:owner,contextStack:contextStack}),this.params=fragment.toArgsList(),fragment.teardown()),this.fn=root.decorators[name],!this.fn){if(errorMessage='Missing "'+name+'" decorator. You may need to download a plugin via https://github.com/RactiveJS/Ractive/wiki/Plugins#decorators',root.debug)throw new Error(errorMessage);warn(errorMessage)}};return Decorator.prototype={init:function(){var result,args;if(this.params?(args=[this.node].concat(this.params),result=this.fn.apply(this.root,args)):result=this.fn.call(this.root,this.node),!result||!result.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.teardown=result.teardown}},Decorator}(utils_warn,render_StringFragment__StringFragment),render_DomFragment_Element_initialise_decorate__decorate=function(Decorator){return function(descriptor,root,owner,contextStack){owner.decorator=new Decorator(descriptor,root,owner,contextStack),owner.decorator.fn&&root._deferred.decorators.push(owner.decorator)}}(render_DomFragment_Element_initialise_decorate_Decorator),render_DomFragment_Element_initialise_addEventProxies_addEventProxy=function(warn,StringFragment){var addEventProxy,MasterEventHandler,ProxyEvent,firePlainEvent,fireEventWithArgs,fireEventWithDynamicArgs,customHandlers,genericHandler,getCustomHandler;return addEventProxy=function(element,triggerEventName,proxyDescriptor,contextStack,indexRefs){var events,master;events=element.node._ractive.events,master=events[triggerEventName]||(events[triggerEventName]=new MasterEventHandler(element,triggerEventName,contextStack,indexRefs)),master.add(proxyDescriptor)},MasterEventHandler=function(element,eventName,contextStack){var definition;this.element=element,this.root=element.root,this.node=element.node,this.name=eventName,this.contextStack=contextStack,this.proxies=[],(definition=this.root.events[eventName])?this.custom=definition(this.node,getCustomHandler(eventName)):("on"+eventName in this.node||warn('Missing "'+this.name+'" event. You may need to download a plugin via https://github.com/RactiveJS/Ractive/wiki/Plugins#events'),this.node.addEventListener(eventName,genericHandler,!1))},MasterEventHandler.prototype={add:function(proxy){this.proxies[this.proxies.length]=new ProxyEvent(this.element,this.root,proxy,this.contextStack)},teardown:function(){var i;for(this.custom?this.custom.teardown():this.node.removeEventListener(this.name,genericHandler,!1),i=this.proxies.length;i--;)this.proxies[i].teardown()},fire:function(event){for(var i=this.proxies.length;i--;)this.proxies[i].fire(event)}},ProxyEvent=function(element,ractive,descriptor,contextStack){var name;return this.root=ractive,name=descriptor.n||descriptor,this.n="string"==typeof name?name:new StringFragment({descriptor:descriptor.n,root:this.root,owner:element,contextStack:contextStack}),descriptor.a?(this.a=descriptor.a,void(this.fire=fireEventWithArgs)):descriptor.d?(this.d=new StringFragment({descriptor:descriptor.d,root:this.root,owner:element,contextStack:contextStack}),void(this.fire=fireEventWithDynamicArgs)):void(this.fire=firePlainEvent)},ProxyEvent.prototype={teardown:function(){this.n.teardown&&this.n.teardown(),this.d&&this.d.teardown()},bubble:function(){}},firePlainEvent=function(event){this.root.fire(this.n.toString(),event)},fireEventWithArgs=function(event){this.root.fire.apply(this.root,[this.n.toString(),event].concat(this.a))},fireEventWithDynamicArgs=function(event){var args=this.d.toArgsList();"string"==typeof args&&(args=args.substr(1,args.length-2)),this.root.fire.apply(this.root,[this.n.toString(),event].concat(args))},genericHandler=function(event){var storage=this._ractive;storage.events[event.type].fire({node:this,original:event,index:storage.index,keypath:storage.keypath,context:storage.root.get(storage.keypath)})},customHandlers={},getCustomHandler=function(eventName){return customHandlers[eventName]?customHandlers[eventName]:customHandlers[eventName]=function(event){var storage=event.node._ractive;event.index=storage.index,event.keypath=storage.keypath,event.context=storage.root.get(storage.keypath),storage.events[eventName].fire(event)}},addEventProxy}(utils_warn,render_StringFragment__StringFragment),render_DomFragment_Element_initialise_addEventProxies__addEventProxies=function(addEventProxy){return function(element,proxies){var i,eventName,eventNames;for(eventName in proxies)if(proxies.hasOwnProperty(eventName))for(eventNames=eventName.split("-"),i=eventNames.length;i--;)addEventProxy(element,eventNames[i],proxies[eventName],element.parentFragment.contextStack)}}(render_DomFragment_Element_initialise_addEventProxies_addEventProxy),render_DomFragment_Element_initialise_updateLiveQueries=function(){return function(element){var ractive,liveQueries,i,selector,query;for(ractive=element.root,liveQueries=ractive._liveQueries,i=liveQueries.length;i--;)selector=liveQueries[i],query=liveQueries[selector],query._test(element)&&((element.liveQueries||(element.liveQueries=[])).push(selector),element.liveQueries[selector]=[element.node])}}(),utils_camelCase=function(){return function(hyphenatedStr){return hyphenatedStr.replace(/-([a-zA-Z])/g,function(match,$1){return $1.toUpperCase()})}}(),utils_fillGaps=function(){return function(target,source){var key;for(key in source)source.hasOwnProperty(key)&&!target.hasOwnProperty(key)&&(target[key]=source[key]);return target}}(),render_DomFragment_Element_shared_executeTransition_Transition=function(isClient,createElement,warn,isNumeric,isArray,camelCase,fillGaps,StringFragment){function prefix(prop){var i,vendor,capped;if(!prefixCache[prop])if(void 0!==testStyle[prop])prefixCache[prop]=prop;else for(capped=prop.charAt(0).toUpperCase()+prop.substring(1),i=vendors.length;i--;)if(vendor=vendors[i],void 0!==testStyle[vendor+capped]){prefixCache[prop]=vendor+capped;break}return prefixCache[prop]}function unprefix(prop){return prop.replace(unprefixPattern,"")}function hyphenate(str){var hyphenated;return vendorPattern.test(str)&&(str="-"+str),hyphenated=str.replace(/[A-Z]/g,function(match){return"-"+match.toLowerCase()})}var Transition,testStyle,vendors,vendorPattern,unprefixPattern,prefixCache,CSS_TRANSITIONS_ENABLED,TRANSITION,TRANSITION_DURATION,TRANSITION_PROPERTY,TRANSITION_TIMING_FUNCTION,TRANSITIONEND;
if(isClient)return testStyle=createElement("div").style,function(){void 0!==testStyle.transition?(TRANSITION="transition",TRANSITIONEND="transitionend",CSS_TRANSITIONS_ENABLED=!0):void 0!==testStyle.webkitTransition?(TRANSITION="webkitTransition",TRANSITIONEND="webkitTransitionEnd",CSS_TRANSITIONS_ENABLED=!0):CSS_TRANSITIONS_ENABLED=!1}(),TRANSITION&&(TRANSITION_DURATION=TRANSITION+"Duration",TRANSITION_PROPERTY=TRANSITION+"Property",TRANSITION_TIMING_FUNCTION=TRANSITION+"TimingFunction"),Transition=function(descriptor,root,owner,contextStack,isIntro){var name,fragment,errorMessage,t=this;if(this.root=root,this.node=owner.node,this.isIntro=isIntro,this.originalStyle=this.node.getAttribute("style"),this.complete=function(noReset){!noReset&&t.isIntro&&t.resetStyle(),t._manager.pop(t.node),t.node._ractive.transition=null},name=descriptor.n||descriptor,"string"!=typeof name&&(fragment=new StringFragment({descriptor:name,root:this.root,owner:owner,contextStack:contextStack}),name=fragment.toString(),fragment.teardown()),this.name=name,descriptor.a?this.params=descriptor.a:descriptor.d&&(fragment=new StringFragment({descriptor:descriptor.d,root:this.root,owner:owner,contextStack:contextStack}),this.params=fragment.toArgsList(),fragment.teardown()),this._fn=root.transitions[name],!this._fn){if(errorMessage='Missing "'+name+'" transition. You may need to download a plugin via https://github.com/RactiveJS/Ractive/wiki/Plugins#transitions',root.debug)throw new Error(errorMessage);return void warn(errorMessage)}},Transition.prototype={init:function(){if(this._inited)throw new Error("Cannot initialize a transition more than once");this._inited=!0,this._fn.apply(this.root,[this].concat(this.params))},getStyle:function(props){var computedStyle,styles,i,prop,value;if(computedStyle=window.getComputedStyle(this.node),"string"==typeof props)return value=computedStyle[prefix(props)],"0px"===value&&(value=0),value;if(!isArray(props))throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties");for(styles={},i=props.length;i--;)prop=props[i],value=computedStyle[prefix(prop)],"0px"===value&&(value=0),styles[prop]=value;return styles},setStyle:function(style,value){var prop;if("string"==typeof style)this.node.style[prefix(style)]=value;else for(prop in style)style.hasOwnProperty(prop)&&(this.node.style[prefix(prop)]=style[prop]);return this},animateStyle:function(style,value,options,complete){var propertyNames,changedProperties,computedStyle,current,to,from,transitionEndHandler,i,prop,t=this;for("string"==typeof style?(to={},to[style]=value):(to=style,complete=options,options=value),options||(warn('The "'+t.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),options=t,complete=t.complete),options.duration||(t.setStyle(to),complete&&complete()),propertyNames=Object.keys(to),changedProperties=[],computedStyle=window.getComputedStyle(t.node),from={},i=propertyNames.length;i--;)prop=propertyNames[i],current=computedStyle[prefix(prop)],"0px"===current&&(current=0),current!=to[prop]&&(changedProperties[changedProperties.length]=prop,t.node.style[prefix(prop)]=current);return changedProperties.length?void setTimeout(function(){t.node.style[TRANSITION_PROPERTY]=propertyNames.map(prefix).map(hyphenate).join(","),t.node.style[TRANSITION_TIMING_FUNCTION]=hyphenate(options.easing||"linear"),t.node.style[TRANSITION_DURATION]=options.duration/1e3+"s",transitionEndHandler=function(event){var index;index=changedProperties.indexOf(camelCase(unprefix(event.propertyName))),-1!==index&&changedProperties.splice(index,1),changedProperties.length||(t.root.fire(t.name+":end"),t.node.removeEventListener(TRANSITIONEND,transitionEndHandler,!1),complete&&complete())},t.node.addEventListener(TRANSITIONEND,transitionEndHandler,!1),setTimeout(function(){for(var i=changedProperties.length;i--;)prop=changedProperties[i],t.node.style[prefix(prop)]=to[prop]},0)},options.delay||0):void(complete&&complete())},resetStyle:function(){this.originalStyle?this.node.setAttribute("style",this.originalStyle):(this.node.getAttribute("style"),this.node.removeAttribute("style"))},processParams:function(params,defaults){return"number"==typeof params?params={duration:params}:"string"==typeof params?params="slow"===params?{duration:600}:"fast"===params?{duration:200}:{duration:400}:params||(params={}),fillGaps(params,defaults)}},vendors=["o","ms","moz","webkit"],vendorPattern=new RegExp("^(?:"+vendors.join("|")+")([A-Z])"),unprefixPattern=new RegExp("^-(?:"+vendors.join("|")+")-"),prefixCache={},Transition}(config_isClient,utils_createElement,utils_warn,utils_isNumeric,utils_isArray,utils_camelCase,utils_fillGaps,render_StringFragment__StringFragment),render_DomFragment_Element_shared_executeTransition__executeTransition=function(warn,Transition){return function(descriptor,root,owner,contextStack,isIntro){var transition,node,oldTransition;!root.transitionsEnabled||root._parent&&!root._parent.transitionsEnabled||(transition=new Transition(descriptor,root,owner,contextStack,isIntro),transition._fn&&(node=transition.node,transition._manager=root._transitionManager,(oldTransition=node._ractive.transition)&&oldTransition.complete(),node._ractive.transition=transition,transition._manager.push(node),isIntro?root._deferred.transitions.push(transition):transition.init()))}}(utils_warn,render_DomFragment_Element_shared_executeTransition_Transition),render_DomFragment_Element_initialise__initialise=function(types,namespaces,create,defineProperty,matches,warn,createElement,getElementNamespace,createElementAttributes,appendElementChildren,decorate,addEventProxies,updateLiveQueries,executeTransition,enforceCase){return function(element,options,docFrag){var parentFragment,pNode,contextStack,descriptor,namespace,name,attributes,width,height,loadHandler,root,selectBinding,errorMessage;if(element.type=types.ELEMENT,parentFragment=element.parentFragment=options.parentFragment,pNode=parentFragment.pNode,contextStack=parentFragment.contextStack,descriptor=element.descriptor=options.descriptor,element.root=root=parentFragment.root,element.index=options.index,element.lcName=descriptor.e.toLowerCase(),element.eventListeners=[],element.customEventListeners=[],pNode&&(namespace=element.namespace=getElementNamespace(descriptor,pNode),name=namespace!==namespaces.html?enforceCase(descriptor.e):descriptor.e,element.node=createElement(name,namespace),defineProperty(element.node,"_ractive",{value:{proxy:element,keypath:contextStack.length?contextStack[contextStack.length-1]:"",index:parentFragment.indexRefs,events:create(null),root:root}})),attributes=createElementAttributes(element,descriptor.a),descriptor.f){if(element.node&&element.node.getAttribute("contenteditable")&&element.node.innerHTML){if(errorMessage="A pre-populated contenteditable element should not have children",root.debug)throw new Error(errorMessage);warn(errorMessage)}appendElementChildren(element,element.node,descriptor,docFrag)}docFrag&&descriptor.v&&addEventProxies(element,descriptor.v),docFrag&&(root.twoway&&(element.bind(),element.node.getAttribute("contenteditable")&&element.node._ractive.binding&&element.node._ractive.binding.update()),attributes.name&&!attributes.name.twoway&&attributes.name.update(),"IMG"===element.node.tagName&&((width=element.attributes.width)||(height=element.attributes.height))&&element.node.addEventListener("load",loadHandler=function(){width&&(element.node.width=width.value),height&&(element.node.height=height.value),element.node.removeEventListener("load",loadHandler,!1)},!1),docFrag.appendChild(element.node),descriptor.o&&decorate(descriptor.o,root,element,contextStack),descriptor.t1&&executeTransition(descriptor.t1,root,element,contextStack,!0),"OPTION"===element.node.tagName&&("SELECT"===pNode.tagName&&(selectBinding=pNode._ractive.binding)&&selectBinding.deferUpdate(),element.node._ractive.value==pNode._ractive.value&&(element.node.selected=!0)),element.node.autofocus&&(root._deferred.focusable=element.node)),updateLiveQueries(element)}}(config_types,config_namespaces,utils_create,utils_defineProperty,utils_matches,utils_warn,utils_createElement,render_DomFragment_Element_initialise_getElementNamespace,render_DomFragment_Element_initialise_createElementAttributes,render_DomFragment_Element_initialise_appendElementChildren,render_DomFragment_Element_initialise_decorate__decorate,render_DomFragment_Element_initialise_addEventProxies__addEventProxies,render_DomFragment_Element_initialise_updateLiveQueries,render_DomFragment_Element_shared_executeTransition__executeTransition,render_DomFragment_shared_enforceCase),render_DomFragment_Element_prototype_teardown=function(executeTransition){return function(destroy){var eventName,binding,bindings,i,liveQueries,selector,query,nodesToRemove,j;for(this.fragment&&this.fragment.teardown(!1);this.attributes.length;)this.attributes.pop().teardown();if(this.node){for(eventName in this.node._ractive.events)this.node._ractive.events[eventName].teardown();(binding=this.node._ractive.binding)&&(binding.teardown(),bindings=this.root._twowayBindings[binding.attr.keypath],bindings.splice(bindings.indexOf(binding),1))}if(this.decorator&&this.decorator.teardown(),this.descriptor.t2&&executeTransition(this.descriptor.t2,this.root,this,this.parentFragment.contextStack,!1),destroy&&this.root._transitionManager.detachWhenReady(this),liveQueries=this.liveQueries)for(i=liveQueries.length;i--;)if(selector=liveQueries[i],nodesToRemove=this.liveQueries[selector])for(j=nodesToRemove.length,query=this.root._liveQueries[selector];j--;)query._remove(nodesToRemove[j])}}(render_DomFragment_Element_shared_executeTransition__executeTransition),config_voidElementNames=function(){return"area base br col command doctype embed hr img input keygen link meta param source track wbr".split(" ")}(),render_DomFragment_Element_prototype_toString=function(voidElementNames){return function(){var str,i,len;for(str="<"+(this.descriptor.y?"!doctype":this.descriptor.e),len=this.attributes.length,i=0;len>i;i+=1)str+=" "+this.attributes[i].toString();return str+=">",this.html?str+=this.html:this.fragment&&(str+=this.fragment.toString()),-1===voidElementNames.indexOf(this.descriptor.e)&&(str+="</"+this.descriptor.e+">"),str}}(config_voidElementNames),render_DomFragment_Element_prototype_find=function(matches){return function(selector){var queryResult;return matches(this.node,selector)?this.node:this.html&&(queryResult=this.node.querySelector(selector))?queryResult:this.fragment&&this.fragment.find?this.fragment.find(selector):void 0}}(utils_matches),render_DomFragment_Element_prototype_findAll=function(){return function(selector,query){var queryAllResult,i,numNodes,node,registeredNodes;if(query._test(this,!0)&&query.live&&((this.liveQueries||(this.liveQueries=[])).push(selector),this.liveQueries[selector]=[this.node]),this.html&&(queryAllResult=this.node.querySelectorAll(selector))&&(numNodes=queryAllResult.length))for(query.live&&(this.liveQueries[selector]||((this.liveQueries||(this.liveQueries=[])).push(selector),this.liveQueries[selector]=[]),registeredNodes=this.liveQueries[selector]),i=0;numNodes>i;i+=1)node=queryAllResult[i],query.push(node),query.live&&registeredNodes.push(node);this.fragment&&this.fragment.findAll(selector,query)}}(),render_DomFragment_Element_prototype_findComponent=function(){return function(selector){return this.fragment?this.fragment.findComponent(selector):void 0}}(),render_DomFragment_Element_prototype_findAllComponents=function(){return function(selector,query){this.fragment&&this.fragment.findAllComponents(selector,query)}}(),render_DomFragment_Element_prototype_bind=function(){return function(){var attributes=this.attributes;if(this.node&&(this.binding&&(this.binding.teardown(),this.binding=null),!(this.node.getAttribute("contenteditable")&&attributes.value&&attributes.value.bind())))switch(this.descriptor.e){case"select":case"textarea":return void(attributes.value&&attributes.value.bind());case"input":if("radio"===this.node.type||"checkbox"===this.node.type){if(attributes.name&&attributes.name.bind())return;if(attributes.checked&&attributes.checked.bind())return}if(attributes.value&&attributes.value.bind())return}}}(),render_DomFragment_Element__Element=function(initialise,teardown,toString,find,findAll,findComponent,findAllComponents,bind){var DomElement=function(options,docFrag){initialise(this,options,docFrag)};return DomElement.prototype={detach:function(){return this.node?(this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node):void 0},teardown:teardown,firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){},toString:toString,find:find,findAll:findAll,findComponent:findComponent,findAllComponents:findAllComponents,bind:bind},DomElement}(render_DomFragment_Element_initialise__initialise,render_DomFragment_Element_prototype_teardown,render_DomFragment_Element_prototype_toString,render_DomFragment_Element_prototype_find,render_DomFragment_Element_prototype_findAll,render_DomFragment_Element_prototype_findComponent,render_DomFragment_Element_prototype_findAllComponents,render_DomFragment_Element_prototype_bind),config_errors={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"},registries_partials={},parse_utils_stripHtmlComments=function(){return function(html){var commentStart,commentEnd,processed;for(processed="";html.length;){if(commentStart=html.indexOf("<!--"),commentEnd=html.indexOf("-->"),-1===commentStart&&-1===commentEnd){processed+=html;break}if(-1!==commentStart&&-1===commentEnd)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==commentEnd&&-1===commentStart||commentStart>commentEnd)throw"Illegal HTML - unexpected closing comment sequence ('-->')";processed+=html.substr(0,commentStart),html=html.substring(commentEnd+3)}return processed}}(),parse_utils_stripStandalones=function(types){return function(tokens){var i,current,backOne,backTwo,leadingLinebreak,trailingLinebreak;for(leadingLinebreak=/^\s*\r?\n/,trailingLinebreak=/\r?\n\s*$/,i=2;i<tokens.length;i+=1)current=tokens[i],backOne=tokens[i-1],backTwo=tokens[i-2],current.type===types.TEXT&&backOne.type===types.MUSTACHE&&backTwo.type===types.TEXT&&trailingLinebreak.test(backTwo.value)&&leadingLinebreak.test(current.value)&&(backOne.mustacheType!==types.INTERPOLATOR&&backOne.mustacheType!==types.TRIPLE&&(backTwo.value=backTwo.value.replace(trailingLinebreak,"\n")),current.value=current.value.replace(leadingLinebreak,""),""===current.value&&tokens.splice(i--,1));return tokens}}(config_types),parse_utils_stripCommentTokens=function(types){return function(tokens){var i,current,previous,next;for(i=0;i<tokens.length;i+=1)current=tokens[i],previous=tokens[i-1],next=tokens[i+1],(current.mustacheType===types.COMMENT||current.mustacheType===types.DELIMCHANGE)&&(tokens.splice(i,1),previous&&next&&previous.type===types.TEXT&&next.type===types.TEXT&&(previous.value+=next.value,tokens.splice(i,1)),i-=1);return tokens}}(config_types),parse_Tokenizer_getMustache_getDelimiterChange=function(makeRegexMatcher){var getDelimiter=makeRegexMatcher(/^[^\s=]+/);return function(tokenizer){var start,opening,closing;return tokenizer.getStringMatch("=")?(start=tokenizer.pos,tokenizer.allowWhitespace(),(opening=getDelimiter(tokenizer))?(tokenizer.allowWhitespace(),(closing=getDelimiter(tokenizer))?(tokenizer.allowWhitespace(),tokenizer.getStringMatch("=")?[opening,closing]:(tokenizer.pos=start,null)):(tokenizer.pos=start,null)):(tokenizer.pos=start,null)):null}}(parse_Tokenizer_utils_makeRegexMatcher),parse_Tokenizer_getMustache_getMustacheType=function(types){var mustacheTypes={"#":types.SECTION,"^":types.INVERTED,"/":types.CLOSING,">":types.PARTIAL,"!":types.COMMENT,"&":types.TRIPLE};return function(tokenizer){var type=mustacheTypes[tokenizer.str.charAt(tokenizer.pos)];return type?(tokenizer.pos+=1,type):null}}(config_types),parse_Tokenizer_getMustache_getMustacheContent=function(types,makeRegexMatcher,getMustacheType){var getIndexRef=makeRegexMatcher(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/),arrayMember=/^[0-9][1-9]*$/;return function(tokenizer,isTriple){var start,mustache,type,expr,i,remaining,index;if(start=tokenizer.pos,mustache={type:isTriple?types.TRIPLE:types.MUSTACHE},!(isTriple||((expr=tokenizer.getExpression())&&(mustache.mustacheType=types.INTERPOLATOR,tokenizer.allowWhitespace(),tokenizer.getStringMatch(tokenizer.delimiters[1])?tokenizer.pos-=tokenizer.delimiters[1].length:(tokenizer.pos=start,expr=null)),expr||(type=getMustacheType(tokenizer),type===types.TRIPLE?mustache={type:types.TRIPLE}:mustache.mustacheType=type||types.INTERPOLATOR,type!==types.COMMENT&&type!==types.CLOSING||(remaining=tokenizer.remaining(),index=remaining.indexOf(tokenizer.delimiters[1]),-1===index)))))return mustache.ref=remaining.substr(0,index),tokenizer.pos+=index,mustache;for(expr||(tokenizer.allowWhitespace(),expr=tokenizer.getExpression());expr.t===types.BRACKETED&&expr.x;)expr=expr.x;return expr.t===types.REFERENCE?mustache.ref=expr.n:expr.t===types.NUMBER_LITERAL&&arrayMember.test(expr.v)?mustache.ref=expr.v:mustache.expression=expr,i=getIndexRef(tokenizer),null!==i&&(mustache.indexRef=i),mustache}}(config_types,parse_Tokenizer_utils_makeRegexMatcher,parse_Tokenizer_getMustache_getMustacheType),parse_Tokenizer_getMustache__getMustache=function(types,getDelimiterChange,getMustacheContent){function getMustache(tokenizer,seekTriple){var content,delimiters,start=tokenizer.pos;return delimiters=seekTriple?tokenizer.tripleDelimiters:tokenizer.delimiters,tokenizer.getStringMatch(delimiters[0])?(content=getDelimiterChange(tokenizer))?tokenizer.getStringMatch(delimiters[1])?(tokenizer[seekTriple?"tripleDelimiters":"delimiters"]=content,{type:types.MUSTACHE,mustacheType:types.DELIMCHANGE}):(tokenizer.pos=start,null):(tokenizer.allowWhitespace(),content=getMustacheContent(tokenizer,seekTriple),null===content?(tokenizer.pos=start,null):(tokenizer.allowWhitespace(),tokenizer.getStringMatch(delimiters[1])?content:(tokenizer.pos=start,null))):null}return function(){var seekTripleFirst=this.tripleDelimiters[0].length>this.delimiters[0].length;return getMustache(this,seekTripleFirst)||getMustache(this,!seekTripleFirst)}}(config_types,parse_Tokenizer_getMustache_getDelimiterChange,parse_Tokenizer_getMustache_getMustacheContent),parse_Tokenizer_getComment_getComment=function(types){return function(){var content,remaining,endIndex;if(!this.getStringMatch("<!--"))return null;if(remaining=this.remaining(),endIndex=remaining.indexOf("-->"),-1===endIndex)throw new Error('Unexpected end of input (expected "-->" to close comment)');return content=remaining.substr(0,endIndex),this.pos+=endIndex+3,{type:types.COMMENT,content:content}}}(config_types),parse_Tokenizer_utils_getLowestIndex=function(){return function(haystack,needles){var i,index,lowest;for(i=needles.length;i--;){if(index=haystack.indexOf(needles[i]),!index)return 0;-1!==index&&(!lowest||lowest>index)&&(lowest=index)}return lowest||-1}}(),parse_Tokenizer_getTag__getTag=function(types,makeRegexMatcher,getLowestIndex){var getTag,getOpeningTag,getClosingTag,getTagName,getAttributes,getAttribute,getAttributeName,getAttributeValue,getUnquotedAttributeValue,getUnquotedAttributeValueToken,getUnquotedAttributeValueText,getQuotedStringToken,getQuotedAttributeValue;return getTag=function(){return getOpeningTag(this)||getClosingTag(this)},getOpeningTag=function(tokenizer){var start,tag,attrs,lowerCaseName;return start=tokenizer.pos,tokenizer.inside?null:tokenizer.getStringMatch("<")?(tag={type:types.TAG},tokenizer.getStringMatch("!")&&(tag.doctype=!0),tag.name=getTagName(tokenizer),tag.name?(attrs=getAttributes(tokenizer),attrs&&(tag.attrs=attrs),tokenizer.allowWhitespace(),tokenizer.getStringMatch("/")&&(tag.selfClosing=!0),tokenizer.getStringMatch(">")?(lowerCaseName=tag.name.toLowerCase(),("script"===lowerCaseName||"style"===lowerCaseName)&&(tokenizer.inside=lowerCaseName),tag):(tokenizer.pos=start,null)):(tokenizer.pos=start,null)):null},getClosingTag=function(tokenizer){var start,tag,expected;if(start=tokenizer.pos,expected=function(str){throw new Error("Unexpected character "+tokenizer.remaining().charAt(0)+" (expected "+str+")")},!tokenizer.getStringMatch("<"))return null;if(tag={type:types.TAG,closing:!0},tokenizer.getStringMatch("/")||expected('"/"'),tag.name=getTagName(tokenizer),tag.name||expected("tag name"),tokenizer.getStringMatch(">")||expected('">"'),tokenizer.inside){if(tag.name.toLowerCase()!==tokenizer.inside)return tokenizer.pos=start,null;tokenizer.inside=null}return tag},getTagName=makeRegexMatcher(/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/),getAttributes=function(tokenizer){var start,attrs,attr;if(start=tokenizer.pos,tokenizer.allowWhitespace(),attr=getAttribute(tokenizer),!attr)return tokenizer.pos=start,null;for(attrs=[];null!==attr;)attrs[attrs.length]=attr,tokenizer.allowWhitespace(),attr=getAttribute(tokenizer);return attrs},getAttribute=function(tokenizer){var attr,name,value;return(name=getAttributeName(tokenizer))?(attr={name:name},value=getAttributeValue(tokenizer),value&&(attr.value=value),attr):null},getAttributeName=makeRegexMatcher(/^[^\s"'>\/=]+/),getAttributeValue=function(tokenizer){var start,value;return start=tokenizer.pos,tokenizer.allowWhitespace(),tokenizer.getStringMatch("=")?(tokenizer.allowWhitespace(),value=getQuotedAttributeValue(tokenizer,"'")||getQuotedAttributeValue(tokenizer,'"')||getUnquotedAttributeValue(tokenizer),null===value?(tokenizer.pos=start,null):value):(tokenizer.pos=start,null)},getUnquotedAttributeValueText=makeRegexMatcher(/^[^\s"'=<>`]+/),getUnquotedAttributeValueToken=function(tokenizer){var start,text,index;return start=tokenizer.pos,(text=getUnquotedAttributeValueText(tokenizer))?(-1!==(index=text.indexOf(tokenizer.delimiters[0]))&&(text=text.substr(0,index),tokenizer.pos=start+text.length),{type:types.TEXT,value:text}):null},getUnquotedAttributeValue=function(tokenizer){var tokens,token;for(tokens=[],token=tokenizer.getMustache()||getUnquotedAttributeValueToken(tokenizer);null!==token;)tokens[tokens.length]=token,token=tokenizer.getMustache()||getUnquotedAttributeValueToken(tokenizer);return tokens.length?tokens:null},getQuotedAttributeValue=function(tokenizer,quoteMark){var start,tokens,token;if(start=tokenizer.pos,!tokenizer.getStringMatch(quoteMark))return null;for(tokens=[],token=tokenizer.getMustache()||getQuotedStringToken(tokenizer,quoteMark);null!==token;)tokens[tokens.length]=token,token=tokenizer.getMustache()||getQuotedStringToken(tokenizer,quoteMark);return tokenizer.getStringMatch(quoteMark)?tokens:(tokenizer.pos=start,null)},getQuotedStringToken=function(tokenizer,quoteMark){var start,index,remaining;if(start=tokenizer.pos,remaining=tokenizer.remaining(),index=getLowestIndex(remaining,[quoteMark,tokenizer.delimiters[0],tokenizer.delimiters[1]]),-1===index)throw new Error("Quoted attribute value must have a closing quote");return index?(tokenizer.pos+=index,{type:types.TEXT,value:remaining.substr(0,index)}):null},getTag}(config_types,parse_Tokenizer_utils_makeRegexMatcher,parse_Tokenizer_utils_getLowestIndex),parse_Tokenizer_getText__getText=function(types,getLowestIndex){return function(){var index,remaining,barrier;return remaining=this.remaining(),barrier=this.inside?"</"+this.inside:"<",(index=getLowestIndex(remaining,[barrier,this.delimiters[0],this.tripleDelimiters[0]]))?(-1===index&&(index=remaining.length),this.pos+=index,{type:types.TEXT,value:remaining.substr(0,index)}):null}}(config_types,parse_Tokenizer_utils_getLowestIndex),parse_Tokenizer_getExpression_getPrimary_getLiteral_getBooleanLiteral=function(types){return function(tokenizer){var remaining=tokenizer.remaining();return"true"===remaining.substr(0,4)?(tokenizer.pos+=4,{t:types.BOOLEAN_LITERAL,v:"true"}):"false"===remaining.substr(0,5)?(tokenizer.pos+=5,{t:types.BOOLEAN_LITERAL,v:"false"}):null}}(config_types),parse_Tokenizer_getExpression_getPrimary_getLiteral_getObjectLiteral_getKeyValuePair=function(types,getKey){return function(tokenizer){var start,key,value;return start=tokenizer.pos,tokenizer.allowWhitespace(),key=getKey(tokenizer),null===key?(tokenizer.pos=start,null):(tokenizer.allowWhitespace(),tokenizer.getStringMatch(":")?(tokenizer.allowWhitespace(),value=tokenizer.getExpression(),null===value?(tokenizer.pos=start,null):{t:types.KEY_VALUE_PAIR,k:key,v:value}):(tokenizer.pos=start,null))}}(config_types,parse_Tokenizer_getExpression_shared_getKey),parse_Tokenizer_getExpression_getPrimary_getLiteral_getObjectLiteral_getKeyValuePairs=function(getKeyValuePair){return function getKeyValuePairs(tokenizer){var start,pairs,pair,keyValuePairs;return start=tokenizer.pos,pair=getKeyValuePair(tokenizer),null===pair?null:(pairs=[pair],tokenizer.getStringMatch(",")?(keyValuePairs=getKeyValuePairs(tokenizer),keyValuePairs?pairs.concat(keyValuePairs):(tokenizer.pos=start,null)):pairs)}}(parse_Tokenizer_getExpression_getPrimary_getLiteral_getObjectLiteral_getKeyValuePair),parse_Tokenizer_getExpression_getPrimary_getLiteral_getObjectLiteral__getObjectLiteral=function(types,getKeyValuePairs){return function(tokenizer){var start,keyValuePairs;return start=tokenizer.pos,tokenizer.allowWhitespace(),tokenizer.getStringMatch("{")?(keyValuePairs=getKeyValuePairs(tokenizer),tokenizer.allowWhitespace(),tokenizer.getStringMatch("}")?{t:types.OBJECT_LITERAL,m:keyValuePairs}:(tokenizer.pos=start,null)):(tokenizer.pos=start,null)}}(config_types,parse_Tokenizer_getExpression_getPrimary_getLiteral_getObjectLiteral_getKeyValuePairs),parse_Tokenizer_getExpression_shared_getExpressionList=function(){return function getExpressionList(tokenizer){var start,expressions,expr,next;if(start=tokenizer.pos,tokenizer.allowWhitespace(),expr=tokenizer.getExpression(),null===expr)return null;if(expressions=[expr],tokenizer.allowWhitespace(),tokenizer.getStringMatch(",")){if(next=getExpressionList(tokenizer),null===next)return tokenizer.pos=start,null;expressions=expressions.concat(next)}return expressions}}(),parse_Tokenizer_getExpression_getPrimary_getLiteral_getArrayLiteral=function(types,getExpressionList){return function(tokenizer){var start,expressionList;return start=tokenizer.pos,tokenizer.allowWhitespace(),tokenizer.getStringMatch("[")?(expressionList=getExpressionList(tokenizer),tokenizer.getStringMatch("]")?{t:types.ARRAY_LITERAL,m:expressionList}:(tokenizer.pos=start,null)):(tokenizer.pos=start,null)}}(config_types,parse_Tokenizer_getExpression_shared_getExpressionList),parse_Tokenizer_getExpression_getPrimary_getLiteral__getLiteral=function(getNumberLiteral,getBooleanLiteral,getStringLiteral,getObjectLiteral,getArrayLiteral){return function(tokenizer){var literal=getNumberLiteral(tokenizer)||getBooleanLiteral(tokenizer)||getStringLiteral(tokenizer)||getObjectLiteral(tokenizer)||getArrayLiteral(tokenizer);return literal}}(parse_Tokenizer_getExpression_getPrimary_getLiteral_getNumberLiteral,parse_Tokenizer_getExpression_getPrimary_getLiteral_getBooleanLiteral,parse_Tokenizer_getExpression_getPrimary_getLiteral_getStringLiteral__getStringLiteral,parse_Tokenizer_getExpression_getPrimary_getLiteral_getObjectLiteral__getObjectLiteral,parse_Tokenizer_getExpression_getPrimary_getLiteral_getArrayLiteral),parse_Tokenizer_getExpression_getPrimary_getReference=function(types,makeRegexMatcher,getName){var getDotRefinement,getArrayRefinement,getArrayMember,globals;return getDotRefinement=makeRegexMatcher(/^\.[a-zA-Z_$0-9]+/),getArrayRefinement=function(tokenizer){var num=getArrayMember(tokenizer);return num?"."+num:null},getArrayMember=makeRegexMatcher(/^\[(0|[1-9][0-9]*)\]/),globals=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,function(tokenizer){var startPos,ancestor,name,dot,combo,refinement,lastDotIndex;for(startPos=tokenizer.pos,ancestor="";tokenizer.getStringMatch("../");)ancestor+="../";if(ancestor||(dot=tokenizer.getStringMatch(".")||""),name=getName(tokenizer)||"",!ancestor&&!dot&&globals.test(name))return{t:types.GLOBAL,v:name};if("this"!==name||ancestor||dot||(name=".",startPos+=3),combo=(ancestor||dot)+name,!combo)return null;for(;refinement=getDotRefinement(tokenizer)||getArrayRefinement(tokenizer);)combo+=refinement;return tokenizer.getStringMatch("(")&&(lastDotIndex=combo.lastIndexOf("."),-1!==lastDotIndex?(combo=combo.substr(0,lastDotIndex),tokenizer.pos=startPos+combo.length):tokenizer.pos-=1),{t:types.REFERENCE,n:combo}}}(config_types,parse_Tokenizer_utils_makeRegexMatcher,parse_Tokenizer_getExpression_shared_getName),parse_Tokenizer_getExpression_getPrimary_getBracketedExpression=function(types){return function(tokenizer){var start,expr;return start=tokenizer.pos,tokenizer.getStringMatch("(")?(tokenizer.allowWhitespace(),(expr=tokenizer.getExpression())?(tokenizer.allowWhitespace(),tokenizer.getStringMatch(")")?{t:types.BRACKETED,x:expr}:(tokenizer.pos=start,null)):(tokenizer.pos=start,null)):null}}(config_types),parse_Tokenizer_getExpression_getPrimary__getPrimary=function(getLiteral,getReference,getBracketedExpression){return function(tokenizer){return getLiteral(tokenizer)||getReference(tokenizer)||getBracketedExpression(tokenizer)}}(parse_Tokenizer_getExpression_getPrimary_getLiteral__getLiteral,parse_Tokenizer_getExpression_getPrimary_getReference,parse_Tokenizer_getExpression_getPrimary_getBracketedExpression),parse_Tokenizer_getExpression_shared_getRefinement=function(types,getName){return function(tokenizer){var start,name,expr;if(start=tokenizer.pos,tokenizer.allowWhitespace(),tokenizer.getStringMatch(".")){if(tokenizer.allowWhitespace(),name=getName(tokenizer))return{t:types.REFINEMENT,n:name};tokenizer.expected("a property name")}return tokenizer.getStringMatch("[")?(tokenizer.allowWhitespace(),expr=tokenizer.getExpression(),expr||tokenizer.expected("an expression"),tokenizer.allowWhitespace(),tokenizer.getStringMatch("]")||tokenizer.expected('"]"'),{t:types.REFINEMENT,x:expr}):null}}(config_types,parse_Tokenizer_getExpression_shared_getName),parse_Tokenizer_getExpression_getMemberOrInvocation=function(types,getPrimary,getExpressionList,getRefinement){return function(tokenizer){var current,expression,refinement,expressionList;if(expression=getPrimary(tokenizer),!expression)return null;for(;expression;)if(current=tokenizer.pos,refinement=getRefinement(tokenizer))expression={t:types.MEMBER,x:expression,r:refinement};else{if(!tokenizer.getStringMatch("("))break;if(tokenizer.allowWhitespace(),expressionList=getExpressionList(tokenizer),tokenizer.allowWhitespace(),!tokenizer.getStringMatch(")")){tokenizer.pos=current;break}expression={t:types.INVOCATION,x:expression},expressionList&&(expression.o=expressionList)}return expression}}(config_types,parse_Tokenizer_getExpression_getPrimary__getPrimary,parse_Tokenizer_getExpression_shared_getExpressionList,parse_Tokenizer_getExpression_shared_getRefinement),parse_Tokenizer_getExpression_getTypeOf=function(types,getMemberOrInvocation){var getTypeOf,makePrefixSequenceMatcher;return makePrefixSequenceMatcher=function(symbol,fallthrough){return function(tokenizer){var start,expression;return tokenizer.getStringMatch(symbol)?(start=tokenizer.pos,tokenizer.allowWhitespace(),expression=tokenizer.getExpression(),expression||tokenizer.expected("an expression"),{s:symbol,o:expression,t:types.PREFIX_OPERATOR}):fallthrough(tokenizer)}},function(){var i,len,matcher,prefixOperators,fallthrough;for(prefixOperators="! ~ + - typeof".split(" "),fallthrough=getMemberOrInvocation,i=0,len=prefixOperators.length;len>i;i+=1)matcher=makePrefixSequenceMatcher(prefixOperators[i],fallthrough),fallthrough=matcher;getTypeOf=fallthrough}(),getTypeOf}(config_types,parse_Tokenizer_getExpression_getMemberOrInvocation),parse_Tokenizer_getExpression_getLogicalOr=function(types,getTypeOf){var getLogicalOr,makeInfixSequenceMatcher;
return makeInfixSequenceMatcher=function(symbol,fallthrough){return function(tokenizer){var start,left,right;return(left=fallthrough(tokenizer))?(start=tokenizer.pos,tokenizer.allowWhitespace(),tokenizer.getStringMatch(symbol)?"in"===symbol&&/[a-zA-Z_$0-9]/.test(tokenizer.remaining().charAt(0))?(tokenizer.pos=start,left):(tokenizer.allowWhitespace(),right=tokenizer.getExpression(),right?{t:types.INFIX_OPERATOR,s:symbol,o:[left,right]}:(tokenizer.pos=start,left)):(tokenizer.pos=start,left)):null}},function(){var i,len,matcher,infixOperators,fallthrough;for(infixOperators="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),fallthrough=getTypeOf,i=0,len=infixOperators.length;len>i;i+=1)matcher=makeInfixSequenceMatcher(infixOperators[i],fallthrough),fallthrough=matcher;getLogicalOr=fallthrough}(),getLogicalOr}(config_types,parse_Tokenizer_getExpression_getTypeOf),parse_Tokenizer_getExpression_getConditional=function(types,getLogicalOr){return function(tokenizer){var start,expression,ifTrue,ifFalse;return(expression=getLogicalOr(tokenizer))?(start=tokenizer.pos,tokenizer.allowWhitespace(),tokenizer.getStringMatch("?")?(tokenizer.allowWhitespace(),(ifTrue=tokenizer.getExpression())?(tokenizer.allowWhitespace(),tokenizer.getStringMatch(":")?(tokenizer.allowWhitespace(),ifFalse=tokenizer.getExpression(),ifFalse?{t:types.CONDITIONAL,o:[expression,ifTrue,ifFalse]}:(tokenizer.pos=start,expression)):(tokenizer.pos=start,expression)):(tokenizer.pos=start,expression)):(tokenizer.pos=start,expression)):null}}(config_types,parse_Tokenizer_getExpression_getLogicalOr),parse_Tokenizer_getExpression__getExpression=function(getConditional){return function(){return getConditional(this)}}(parse_Tokenizer_getExpression_getConditional),parse_Tokenizer__Tokenizer=function(getMustache,getComment,getTag,getText,getExpression,allowWhitespace,getStringMatch){var Tokenizer;return Tokenizer=function(str,options){var token;for(this.str=str,this.pos=0,this.delimiters=options.delimiters,this.tripleDelimiters=options.tripleDelimiters,this.tokens=[];this.pos<this.str.length;)token=this.getToken(),null===token&&this.remaining()&&this.fail(),this.tokens.push(token)},Tokenizer.prototype={getToken:function(){var token=this.getMustache()||this.getComment()||this.getTag()||this.getText();return token},getMustache:getMustache,getComment:getComment,getTag:getTag,getText:getText,getExpression:getExpression,allowWhitespace:allowWhitespace,getStringMatch:getStringMatch,remaining:function(){return this.str.substring(this.pos)},fail:function(){var last20,next20;throw last20=this.str.substr(0,this.pos).substr(-20),20===last20.length&&(last20="..."+last20),next20=this.remaining().substr(0,20),20===next20.length&&(next20+="..."),new Error("Could not parse template: "+(last20?last20+"<- ":"")+"failed at character "+this.pos+" ->"+next20)},expected:function(thing){var remaining=this.remaining().substr(0,40);throw 40===remaining.length&&(remaining+="..."),new Error('Tokenizer failed: unexpected string "'+remaining+'" (expected '+thing+")")}},Tokenizer}(parse_Tokenizer_getMustache__getMustache,parse_Tokenizer_getComment_getComment,parse_Tokenizer_getTag__getTag,parse_Tokenizer_getText__getText,parse_Tokenizer_getExpression__getExpression,parse_Tokenizer_utils_allowWhitespace,parse_Tokenizer_utils_getStringMatch),parse_tokenize=function(stripHtmlComments,stripStandalones,stripCommentTokens,Tokenizer,circular){var tokenize,Ractive;return circular.push(function(){Ractive=circular.Ractive}),tokenize=function(template,options){var tokenizer,tokens;return options=options||{},options.stripComments!==!1&&(template=stripHtmlComments(template)),tokenizer=new Tokenizer(template,{delimiters:options.delimiters||(Ractive?Ractive.delimiters:["{{","}}"]),tripleDelimiters:options.tripleDelimiters||(Ractive?Ractive.tripleDelimiters:["{{{","}}}"])}),tokens=tokenizer.tokens,stripStandalones(tokens),stripCommentTokens(tokens),tokens}}(parse_utils_stripHtmlComments,parse_utils_stripStandalones,parse_utils_stripCommentTokens,parse_Tokenizer__Tokenizer,circular),parse_Parser_getText_TextStub__TextStub=function(types){var TextStub,htmlEntities,controlCharacters,namedEntityPattern,hexEntityPattern,decimalEntityPattern,validateCode,decodeCharacterReferences,whitespace;return TextStub=function(token,preserveWhitespace){this.text=preserveWhitespace?token.value:token.value.replace(whitespace," ")},TextStub.prototype={type:types.TEXT,toJSON:function(){return this.decoded||(this.decoded=decodeCharacterReferences(this.text))},toString:function(){return this.text}},htmlEntities={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},controlCharacters=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],namedEntityPattern=new RegExp("&("+Object.keys(htmlEntities).join("|")+");?","g"),hexEntityPattern=/&#x([0-9]+);?/g,decimalEntityPattern=/&#([0-9]+);?/g,validateCode=function(code){return code?10===code?32:128>code?code:159>=code?controlCharacters[code-128]:55296>code?code:57343>=code?65533:65535>=code?code:65533:65533},decodeCharacterReferences=function(html){var result;return result=html.replace(namedEntityPattern,function(match,name){return htmlEntities[name]?String.fromCharCode(htmlEntities[name]):match}),result=result.replace(hexEntityPattern,function(match,hex){return String.fromCharCode(validateCode(parseInt(hex,16)))}),result=result.replace(decimalEntityPattern,function(match,charCode){return String.fromCharCode(validateCode(charCode))})},whitespace=/\s+/g,TextStub}(config_types),parse_Parser_getText__getText=function(types,TextStub){return function(token){return token.type===types.TEXT?(this.pos+=1,new TextStub(token,this.preserveWhitespace)):null}}(config_types,parse_Parser_getText_TextStub__TextStub),parse_Parser_getComment_CommentStub__CommentStub=function(types){var CommentStub;return CommentStub=function(token){this.content=token.content},CommentStub.prototype={toJSON:function(){return{t:types.COMMENT,f:this.content}},toString:function(){return"<!--"+this.content+"-->"}},CommentStub}(config_types),parse_Parser_getComment__getComment=function(types,CommentStub){return function(token){return token.type===types.COMMENT?(this.pos+=1,new CommentStub(token,this.preserveWhitespace)):null}}(config_types,parse_Parser_getComment_CommentStub__CommentStub),parse_Parser_getMustache_ExpressionStub__ExpressionStub=function(types,isObject){var ExpressionStub,getRefs,stringify;return ExpressionStub=function(token){this.refs=[],getRefs(token,this.refs),this.str=stringify(token,this.refs)},ExpressionStub.prototype={toJSON:function(){return this.json?this.json:(this.json={r:this.refs,s:this.str},this.json)}},getRefs=function(token,refs){var i,list;if(token.t===types.REFERENCE&&-1===refs.indexOf(token.n)&&refs.unshift(token.n),list=token.o||token.m)if(isObject(list))getRefs(list,refs);else for(i=list.length;i--;)getRefs(list[i],refs);token.x&&getRefs(token.x,refs),token.r&&getRefs(token.r,refs),token.v&&getRefs(token.v,refs)},stringify=function(token,refs){var map=function(item){return stringify(item,refs)};switch(token.t){case types.BOOLEAN_LITERAL:case types.GLOBAL:case types.NUMBER_LITERAL:return token.v;case types.STRING_LITERAL:return"'"+token.v.replace(/'/g,"\\'")+"'";case types.ARRAY_LITERAL:return"["+(token.m?token.m.map(map).join(","):"")+"]";case types.OBJECT_LITERAL:return"{"+(token.m?token.m.map(map).join(","):"")+"}";case types.KEY_VALUE_PAIR:return token.k+":"+stringify(token.v,refs);case types.PREFIX_OPERATOR:return("typeof"===token.s?"typeof ":token.s)+stringify(token.o,refs);case types.INFIX_OPERATOR:return stringify(token.o[0],refs)+("in"===token.s.substr(0,2)?" "+token.s+" ":token.s)+stringify(token.o[1],refs);case types.INVOCATION:return stringify(token.x,refs)+"("+(token.o?token.o.map(map).join(","):"")+")";case types.BRACKETED:return"("+stringify(token.x,refs)+")";case types.MEMBER:return stringify(token.x,refs)+stringify(token.r,refs);case types.REFINEMENT:return token.n?"."+token.n:"["+stringify(token.x,refs)+"]";case types.CONDITIONAL:return stringify(token.o[0],refs)+"?"+stringify(token.o[1],refs)+":"+stringify(token.o[2],refs);case types.REFERENCE:return"${"+refs.indexOf(token.n)+"}";default:throw new Error("Could not stringify expression token. This error is unexpected")}},ExpressionStub}(config_types,utils_isObject),parse_Parser_getMustache_MustacheStub__MustacheStub=function(types,ExpressionStub){var MustacheStub=function(token,parser){this.type=token.type===types.TRIPLE?types.TRIPLE:token.mustacheType,token.ref&&(this.ref=token.ref),token.expression&&(this.expr=new ExpressionStub(token.expression)),parser.pos+=1};return MustacheStub.prototype={toJSON:function(){var json;return this.json?this.json:(json={t:this.type},this.ref&&(json.r=this.ref),this.expr&&(json.x=this.expr.toJSON()),this.json=json,json)},toString:function(){return!1}},MustacheStub}(config_types,parse_Parser_getMustache_ExpressionStub__ExpressionStub),parse_Parser_utils_stringifyStubs=function(){return function(items){var itemStr,i,len,str="";if(!items)return"";for(i=0,len=items.length;len>i;i+=1){if(itemStr=items[i].toString(),itemStr===!1)return!1;str+=itemStr}return str}}(),parse_Parser_utils_jsonifyStubs=function(stringifyStubs){return function(items,noStringify){var str,json;return noStringify||(str=stringifyStubs(items),str===!1)?json=items.map(function(item){return item.toJSON(noStringify)}):str}}(parse_Parser_utils_stringifyStubs),parse_Parser_getMustache_SectionStub__SectionStub=function(types,jsonifyStubs,ExpressionStub){var SectionStub=function(firstToken,parser){var next;for(this.ref=firstToken.ref,this.indexRef=firstToken.indexRef,this.inverted=firstToken.mustacheType===types.INVERTED,firstToken.expression&&(this.expr=new ExpressionStub(firstToken.expression)),parser.pos+=1,this.items=[],next=parser.next();next;){if(next.mustacheType===types.CLOSING){if(next.ref.trim()===this.ref||this.expr){parser.pos+=1;break}throw new Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=parser.getStub(),next=parser.next()}};return SectionStub.prototype={toJSON:function(noStringify){var json;return this.json?this.json:(json={t:types.SECTION},this.ref&&(json.r=this.ref),this.indexRef&&(json.i=this.indexRef),this.inverted&&(json.n=!0),this.expr&&(json.x=this.expr.toJSON()),this.items.length&&(json.f=jsonifyStubs(this.items,noStringify)),this.json=json,json)},toString:function(){return!1}},SectionStub}(config_types,parse_Parser_utils_jsonifyStubs,parse_Parser_getMustache_ExpressionStub__ExpressionStub),parse_Parser_getMustache__getMustache=function(types,MustacheStub,SectionStub){return function(token){return token.type===types.MUSTACHE||token.type===types.TRIPLE?token.mustacheType===types.SECTION||token.mustacheType===types.INVERTED?new SectionStub(token,this):new MustacheStub(token,this):void 0}}(config_types,parse_Parser_getMustache_MustacheStub__MustacheStub,parse_Parser_getMustache_SectionStub__SectionStub),parse_Parser_getElement_ElementStub_utils_siblingsByTagName=function(){return{li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]}}(),parse_Parser_getElement_ElementStub_utils_filterAttributes=function(isArray){function deepClone(obj){var result,key;if("object"!=typeof obj)return obj;if(isArray(obj))return obj.map(deepClone);result={};for(key in obj)obj.hasOwnProperty(key)&&(result[key]=deepClone(obj[key]));return result}return function(items){var attrs,proxies,filtered,i,len,item;for(filtered={},attrs=[],proxies=[],len=items.length,i=0;len>i;i+=1)if(item=items[i],"intro"===item.name){if(filtered.intro)throw new Error("An element can only have one intro transition");filtered.intro=item}else if("outro"===item.name){if(filtered.outro)throw new Error("An element can only have one outro transition");filtered.outro=item}else if("intro-outro"===item.name){if(filtered.intro||filtered.outro)throw new Error("An element can only have one intro and one outro transition");filtered.intro=item,filtered.outro=deepClone(item)}else"proxy-"===item.name.substr(0,6)?(item.name=item.name.substring(6),proxies[proxies.length]=item):"on-"===item.name.substr(0,3)?(item.name=item.name.substring(3),proxies[proxies.length]=item):"decorator"===item.name?filtered.decorator=item:attrs[attrs.length]=item;return filtered.attrs=attrs,filtered.proxies=proxies,filtered}}(utils_isArray),parse_Parser_getElement_ElementStub_utils_processDirective=function(types,parseJSON){return function(directive){var processed,tokens,token,colonIndex,throwError,directiveName,directiveArgs,parsed;for(throwError=function(){throw new Error("Illegal directive")},directive.name&&directive.value||throwError(),processed={directiveType:directive.name},tokens=directive.value,directiveName=[],directiveArgs=[];tokens.length;)if(token=tokens.shift(),token.type===types.TEXT){if(colonIndex=token.value.indexOf(":"),-1!==colonIndex){colonIndex&&(directiveName[directiveName.length]={type:types.TEXT,value:token.value.substr(0,colonIndex)}),token.value.length>colonIndex+1&&(directiveArgs[0]={type:types.TEXT,value:token.value.substring(colonIndex+1)});break}directiveName[directiveName.length]=token}else directiveName[directiveName.length]=token;return directiveArgs=directiveArgs.concat(tokens),processed.name=1===directiveName.length&&directiveName[0].type===types.TEXT?directiveName[0].value:directiveName,directiveArgs.length&&(1===directiveArgs.length&&directiveArgs[0].type===types.TEXT?(parsed=parseJSON("["+directiveArgs[0].value+"]"),processed.args=parsed?parsed.value:directiveArgs[0].value):processed.dynamicArgs=directiveArgs),processed}}(config_types,utils_parseJSON),parse_Parser_StringStub_StringParser=function(getText,getMustache){var StringParser;return StringParser=function(tokens,options){var stub;for(this.tokens=tokens||[],this.pos=0,this.options=options,this.result=[];stub=this.getStub();)this.result.push(stub)},StringParser.prototype={getStub:function(){var token=this.next();return token?this.getText(token)||this.getMustache(token):null},getText:getText,getMustache:getMustache,next:function(){return this.tokens[this.pos]}},StringParser}(parse_Parser_getText__getText,parse_Parser_getMustache__getMustache),parse_Parser_StringStub__StringStub=function(StringParser,stringifyStubs,jsonifyStubs){var StringStub;return StringStub=function(tokens){var parser=new StringParser(tokens);this.stubs=parser.result},StringStub.prototype={toJSON:function(noStringify){var json;return this["json_"+noStringify]?this["json_"+noStringify]:json=this["json_"+noStringify]=jsonifyStubs(this.stubs,noStringify)},toString:function(){return void 0!==this.str?this.str:(this.str=stringifyStubs(this.stubs),this.str)}},StringStub}(parse_Parser_StringStub_StringParser,parse_Parser_utils_stringifyStubs,parse_Parser_utils_jsonifyStubs),parse_Parser_getElement_ElementStub_utils_jsonifyDirective=function(StringStub){return function(directive){var result,name;if("string"==typeof directive.name){if(!directive.args&&!directive.dynamicArgs)return directive.name;name=directive.name}else name=new StringStub(directive.name).toJSON();return result={n:name},directive.args?(result.a=directive.args,result):(directive.dynamicArgs&&(result.d=new StringStub(directive.dynamicArgs).toJSON()),result)}}(parse_Parser_StringStub__StringStub),parse_Parser_getElement_ElementStub_toJSON=function(types,jsonifyStubs,jsonifyDirective){return function(noStringify){var json,name,value,proxy,i,len,attribute;if(this["json_"+noStringify])return this["json_"+noStringify];if(json=this.component?{t:types.COMPONENT,e:this.component}:{t:types.ELEMENT,e:this.tag},this.doctype&&(json.y=1),this.attributes&&this.attributes.length)for(json.a={},len=this.attributes.length,i=0;len>i;i+=1){if(attribute=this.attributes[i],name=attribute.name,json.a[name])throw new Error("You cannot have multiple attributes with the same name");value=null===attribute.value?null:attribute.value.toJSON(noStringify),json.a[name]=value}if(this.items&&this.items.length&&(json.f=jsonifyStubs(this.items,noStringify)),this.proxies&&this.proxies.length)for(json.v={},len=this.proxies.length,i=0;len>i;i+=1)proxy=this.proxies[i],json.v[proxy.directiveType]=jsonifyDirective(proxy);return this.intro&&(json.t1=jsonifyDirective(this.intro)),this.outro&&(json.t2=jsonifyDirective(this.outro)),this.decorator&&(json.o=jsonifyDirective(this.decorator)),this["json_"+noStringify]=json,json}}(config_types,parse_Parser_utils_jsonifyStubs,parse_Parser_getElement_ElementStub_utils_jsonifyDirective),parse_Parser_getElement_ElementStub_toString=function(stringifyStubs,voidElementNames){var htmlElements;return htmlElements="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),function(){var str,i,len,attrStr,name,attrValueStr,fragStr,isVoid;if(void 0!==this.str)return this.str;if(this.component)return this.str=!1;if(-1===htmlElements.indexOf(this.tag.toLowerCase()))return this.str=!1;if(this.proxies||this.intro||this.outro||this.decorator)return this.str=!1;if(fragStr=stringifyStubs(this.items),fragStr===!1)return this.str=!1;if(isVoid=-1!==voidElementNames.indexOf(this.tag.toLowerCase()),str="<"+this.tag,this.attributes)for(i=0,len=this.attributes.length;len>i;i+=1){if(name=this.attributes[i].name,-1!==name.indexOf(":"))return this.str=!1;if("id"===name||"intro"===name||"outro"===name)return this.str=!1;if(attrStr=" "+name,null!==this.attributes[i].value){if(attrValueStr=this.attributes[i].value.toString(),attrValueStr===!1)return this.str=!1;""!==attrValueStr&&(attrStr+="=",attrStr+=/[\s"'=<>`]/.test(attrValueStr)?'"'+attrValueStr.replace(/"/g,"&quot;")+'"':attrValueStr)}str+=attrStr}return this.selfClosing&&!isVoid?(str+="/>",this.str=str):(str+=">",isVoid?this.str=str:(str+=fragStr,str+="</"+this.tag+">",this.str=str))}}(parse_Parser_utils_stringifyStubs,config_voidElementNames),parse_Parser_getElement_ElementStub__ElementStub=function(types,voidElementNames,warn,camelCase,stringifyStubs,siblingsByTagName,filterAttributes,processDirective,toJSON,toString,StringStub){var ElementStub,allElementNames,closedByParentClose,onPattern,sanitize,leadingWhitespace=/^\s+/,trailingWhitespace=/\s+$/;return ElementStub=function(firstToken,parser,preserveWhitespace){var next,attrs,filtered,proxies,item,getFrag,lowerCaseTag;if(parser.pos+=1,getFrag=function(attr){return{name:attr.name,value:attr.value?new StringStub(attr.value):null}},this.tag=firstToken.name,lowerCaseTag=firstToken.name.toLowerCase(),"rv-"===lowerCaseTag.substr(0,3)&&(warn('The "rv-" prefix for components has been deprecated. Support will be removed in a future version'),this.tag=this.tag.substring(3)),preserveWhitespace=preserveWhitespace||"pre"===lowerCaseTag,firstToken.attrs&&(filtered=filterAttributes(firstToken.attrs),attrs=filtered.attrs,proxies=filtered.proxies,parser.options.sanitize&&parser.options.sanitize.eventAttributes&&(attrs=attrs.filter(sanitize)),attrs.length&&(this.attributes=attrs.map(getFrag)),proxies.length&&(this.proxies=proxies.map(processDirective)),filtered.intro&&(this.intro=processDirective(filtered.intro)),filtered.outro&&(this.outro=processDirective(filtered.outro)),filtered.decorator&&(this.decorator=processDirective(filtered.decorator))),firstToken.doctype&&(this.doctype=!0),firstToken.selfClosing&&(this.selfClosing=!0),-1!==voidElementNames.indexOf(lowerCaseTag)&&(this.isVoid=!0),!this.selfClosing&&!this.isVoid){for(this.siblings=siblingsByTagName[lowerCaseTag],this.items=[],next=parser.next();next&&next.mustacheType!==types.CLOSING;){if(next.type===types.TAG){if(next.closing){next.name.toLowerCase()===lowerCaseTag&&(parser.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(next.name.toLowerCase()))break}this.items[this.items.length]=parser.getStub(),next=parser.next()}preserveWhitespace||(item=this.items[0],item&&item.type===types.TEXT&&(item.text=item.text.replace(leadingWhitespace,""),item.text||this.items.shift()),item=this.items[this.items.length-1],item&&item.type===types.TEXT&&(item.text=item.text.replace(trailingWhitespace,""),item.text||this.items.pop()))}},ElementStub.prototype={toJSON:toJSON,toString:toString},allElementNames="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),closedByParentClose="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),onPattern=/^on[a-zA-Z]/,sanitize=function(attr){var valid=!onPattern.test(attr.name);return valid},ElementStub}(config_types,config_voidElementNames,utils_warn,utils_camelCase,parse_Parser_utils_stringifyStubs,parse_Parser_getElement_ElementStub_utils_siblingsByTagName,parse_Parser_getElement_ElementStub_utils_filterAttributes,parse_Parser_getElement_ElementStub_utils_processDirective,parse_Parser_getElement_ElementStub_toJSON,parse_Parser_getElement_ElementStub_toString,parse_Parser_StringStub__StringStub),parse_Parser_getElement__getElement=function(types,ElementStub){return function(token){return this.options.sanitize&&this.options.sanitize.elements&&-1!==this.options.sanitize.elements.indexOf(token.name.toLowerCase())?null:new ElementStub(token,this)}}(config_types,parse_Parser_getElement_ElementStub__ElementStub),parse_Parser__Parser=function(getText,getComment,getMustache,getElement,jsonifyStubs){var Parser;return Parser=function(tokens,options){var stub,stubs;for(this.tokens=tokens||[],this.pos=0,this.options=options,this.preserveWhitespace=options.preserveWhitespace,stubs=[];stub=this.getStub();)stubs.push(stub);this.result=jsonifyStubs(stubs)},Parser.prototype={getStub:function(){var token=this.next();return token?this.getText(token)||this.getComment(token)||this.getMustache(token)||this.getElement(token):null},getText:getText,getComment:getComment,getMustache:getMustache,getElement:getElement,next:function(){return this.tokens[this.pos]}},Parser}(parse_Parser_getText__getText,parse_Parser_getComment__getComment,parse_Parser_getMustache__getMustache,parse_Parser_getElement__getElement,parse_Parser_utils_jsonifyStubs),parse__parse=function(tokenize,types,Parser){var parse,onlyWhitespace,inlinePartialStart,inlinePartialEnd,parseCompoundTemplate;return onlyWhitespace=/^\s*$/,inlinePartialStart=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,inlinePartialEnd=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,parse=function(template,options){var tokens,json,token;return options=options||{},inlinePartialStart.test(template)?parseCompoundTemplate(template,options):(options.sanitize===!0&&(options.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),tokens=tokenize(template,options),options.preserveWhitespace||(token=tokens[0],token&&token.type===types.TEXT&&onlyWhitespace.test(token.value)&&tokens.shift(),token=tokens[tokens.length-1],token&&token.type===types.TEXT&&onlyWhitespace.test(token.value)&&tokens.pop()),json=new Parser(tokens,options).result,"string"==typeof json?[json]:json)},parseCompoundTemplate=function(template,options){var mainTemplate,remaining,partials,name,startMatch,endMatch;for(partials={},mainTemplate="",remaining=template;startMatch=inlinePartialStart.exec(remaining);){if(name=startMatch[1],mainTemplate+=remaining.substr(0,startMatch.index),remaining=remaining.substring(startMatch.index+startMatch[0].length),endMatch=inlinePartialEnd.exec(remaining),!endMatch||endMatch[1]!==name)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");partials[name]=parse(remaining.substr(0,endMatch.index),options),remaining=remaining.substring(endMatch.index+endMatch[0].length)}return{main:parse(mainTemplate,options),partials:partials}},parse}(parse_tokenize,config_types,parse_Parser__Parser),render_DomFragment_Partial_getPartialDescriptor=function(errors,isClient,warn,isObject,partials,parse){var getPartialDescriptor,registerPartial,getPartialFromRegistry,unpack;return getPartialDescriptor=function(root,name){var el,partial,errorMessage;if(partial=getPartialFromRegistry(root,name))return partial;if(isClient&&(el=document.getElementById(name),el&&"SCRIPT"===el.tagName)){if(!parse)throw new Error(errors.missingParser);registerPartial(parse(el.innerHTML),name,partials)}if(partial=partials[name],!partial){if(errorMessage='Could not find descriptor for partial "'+name+'"',root.debug)throw new Error(errorMessage);return warn(errorMessage),[]}return unpack(partial)},getPartialFromRegistry=function(registryOwner,name){var partial;if(registryOwner.partials[name]){if("string"==typeof registryOwner.partials[name]){if(!parse)throw new Error(errors.missingParser);partial=parse(registryOwner.partials[name],registryOwner.parseOptions),registerPartial(partial,name,registryOwner.partials)}return unpack(registryOwner.partials[name])}},registerPartial=function(partial,name,registry){var key;if(isObject(partial)){registry[name]=partial.main;for(key in partial.partials)partial.partials.hasOwnProperty(key)&&(registry[key]=partial.partials[key])}else registry[name]=partial},unpack=function(partial){return 1===partial.length&&"string"==typeof partial[0]?partial[0]:partial},getPartialDescriptor}(config_errors,config_isClient,utils_warn,utils_isObject,registries_partials,parse__parse),render_DomFragment_Partial__Partial=function(types,getPartialDescriptor,circular){var DomPartial,DomFragment;return circular.push(function(){DomFragment=circular.DomFragment}),DomPartial=function(options,docFrag){var descriptor,parentFragment=this.parentFragment=options.parentFragment;if(this.type=types.PARTIAL,this.name=options.descriptor.r,this.index=options.index,!options.descriptor.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");descriptor=getPartialDescriptor(parentFragment.root,options.descriptor.r),this.fragment=new DomFragment({descriptor:descriptor,root:parentFragment.root,pNode:parentFragment.pNode,contextStack:parentFragment.contextStack,owner:this}),docFrag&&docFrag.appendChild(this.fragment.docFrag)},DomPartial.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},teardown:function(destroy){this.fragment.teardown(destroy)},toString:function(){return this.fragment.toString()},find:function(selector){return this.fragment.find(selector)},findAll:function(selector,query){return this.fragment.findAll(selector,query)},findComponent:function(selector){return this.fragment.findComponent(selector)},findAllComponents:function(selector,query){return this.fragment.findAllComponents(selector,query)}},DomPartial}(config_types,render_DomFragment_Partial_getPartialDescriptor,circular),render_DomFragment_Component_initialise_createModel_ComponentParameter=function(StringFragment){var ComponentParameter=function(component,key,value){this.parentFragment=component.parentFragment,this.component=component,this.key=key,this.fragment=new StringFragment({descriptor:value,root:component.root,owner:this,contextStack:component.parentFragment.contextStack}),this.selfUpdating=this.fragment.isSimple(),this.value=this.fragment.getValue()};return ComponentParameter.prototype={bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._deferred.attrs.push(this),this.deferred=!0)},update:function(){var value=this.fragment.getValue();this.component.instance.set(this.key,value),this.value=value},teardown:function(){this.fragment.teardown()}},ComponentParameter}(render_StringFragment__StringFragment),render_DomFragment_Component_initialise_createModel__createModel=function(types,parseJSON,resolveRef,ComponentParameter){function getValue(component,key,descriptor,toBind){var parameter,parsed,root,parentFragment,keypath;return root=component.root,parentFragment=component.parentFragment,"string"==typeof descriptor?(parsed=parseJSON(descriptor),parsed?parsed.value:descriptor):null===descriptor?!0:1===descriptor.length&&descriptor[0].t===types.INTERPOLATOR&&descriptor[0].r?parentFragment.indexRefs&&void 0!==parentFragment.indexRefs[descriptor[0].r]?parentFragment.indexRefs[descriptor[0].r]:(keypath=resolveRef(root,descriptor[0].r,parentFragment.contextStack)||descriptor[0].r,toBind.push({childKeypath:key,parentKeypath:keypath}),root.get(keypath)):(parameter=new ComponentParameter(component,key,descriptor),component.complexParameters.push(parameter),parameter.value)
}return function(component,attributes,toBind){var data,key,value;data={},component.complexParameters=[];for(key in attributes)attributes.hasOwnProperty(key)&&(value=getValue(component,key,attributes[key],toBind),void 0!==value&&(data[key]=value));return data}}(config_types,utils_parseJSON,shared_resolveRef,render_DomFragment_Component_initialise_createModel_ComponentParameter),render_DomFragment_Component_initialise_createInstance=function(){return function(component,Component,data,docFrag,contentDescriptor){var instance,parentFragment,partials,root;return parentFragment=component.parentFragment,root=component.root,partials={content:contentDescriptor||[]},instance=new Component({el:parentFragment.pNode.cloneNode(!1),data:data,partials:partials,_parent:root,adaptors:root.adaptors}),instance.component=component,component.instance=instance,instance.insert(docFrag),instance.fragment.pNode=parentFragment.pNode,instance}}(),render_DomFragment_Component_initialise_createObservers=function(){function bind(component,parentKeypath,childKeypath){var parentInstance,childInstance,settingParent,settingChild,observers,observer,value;parentInstance=component.root,childInstance=component.instance,observers=component.observers,observer=parentInstance.observe(parentKeypath,function(value){settingParent||parentInstance._wrapped[parentKeypath]||(settingChild=!0,childInstance.set(childKeypath,value),settingChild=!1)},observeOptions),observers.push(observer),childInstance.twoway&&(observer=childInstance.observe(childKeypath,function(value){settingChild||(settingParent=!0,parentInstance.set(parentKeypath,value),settingParent=!1)},observeOptions),observers.push(observer),value=childInstance.get(childKeypath),void 0!==value&&parentInstance.set(parentKeypath,value))}var observeOptions={init:!1,debug:!0};return function(component,toBind){var pair,i;for(component.observers=[],i=toBind.length;i--;)pair=toBind[i],bind(component,pair.parentKeypath,pair.childKeypath)}}(),render_DomFragment_Component_initialise_propagateEvents=function(warn){function propagateEvent(childInstance,parentInstance,eventName,proxyEventName){if("string"!=typeof proxyEventName){if(parentInstance.debug)throw new Error(errorMessage);return void warn(errorMessage)}childInstance.on(eventName,function(){var args=Array.prototype.slice.call(arguments);args.unshift(proxyEventName),parentInstance.fire.apply(parentInstance,args)})}var errorMessage="Components currently only support simple events - you cannot include arguments. Sorry!";return function(component,eventsDescriptor){var eventName;for(eventName in eventsDescriptor)eventsDescriptor.hasOwnProperty(eventName)&&propagateEvent(component.instance,component.root,eventName,eventsDescriptor[eventName])}}(utils_warn),render_DomFragment_Component_initialise_updateLiveQueries=function(){return function(component){var ancestor,query;for(ancestor=component.root;ancestor;)(query=ancestor._liveComponentQueries[component.name])&&query.push(component.instance),ancestor=ancestor._parent}}(),render_DomFragment_Component_initialise__initialise=function(types,warn,createModel,createInstance,createObservers,propagateEvents,updateLiveQueries){return function(component,options,docFrag){var parentFragment,root,Component,data,toBind;if(parentFragment=component.parentFragment=options.parentFragment,root=parentFragment.root,component.root=root,component.type=types.COMPONENT,component.name=options.descriptor.e,component.index=options.index,component.observers=[],Component=root.components[options.descriptor.e],!Component)throw new Error('Component "'+options.descriptor.e+'" not found');toBind=[],data=createModel(component,options.descriptor.a,toBind),createInstance(component,Component,data,docFrag,options.descriptor.f),createObservers(component,toBind),propagateEvents(component,options.descriptor.v),(options.descriptor.t1||options.descriptor.t2||options.descriptor.o)&&warn('The "intro", "outro" and "decorator" directives have no effect on components'),updateLiveQueries(component)}}(config_types,utils_warn,render_DomFragment_Component_initialise_createModel__createModel,render_DomFragment_Component_initialise_createInstance,render_DomFragment_Component_initialise_createObservers,render_DomFragment_Component_initialise_propagateEvents,render_DomFragment_Component_initialise_updateLiveQueries),render_DomFragment_Component__Component=function(initialise){var DomComponent=function(options,docFrag){initialise(this,options,docFrag)};return DomComponent.prototype={firstNode:function(){return this.instance.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.instance.fragment.detach()},teardown:function(){for(var query;this.complexParameters.length;)this.complexParameters.pop().teardown();for(;this.observers.length;)this.observers.pop().cancel();(query=this.root._liveComponentQueries[this.name])&&query._remove(this),this.instance.teardown()},toString:function(){return this.instance.fragment.toString()},find:function(selector){return this.instance.fragment.find(selector)},findAll:function(selector,query){return this.instance.fragment.findAll(selector,query)},findComponent:function(selector){return selector&&selector!==this.name?null:this.instance},findAllComponents:function(selector,query){query._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(selector,query)}},DomComponent}(render_DomFragment_Component_initialise__initialise),render_DomFragment_Comment=function(types){var DomComment=function(options,docFrag){this.type=types.COMMENT,this.descriptor=options.descriptor,docFrag&&(this.node=document.createComment(options.descriptor.f),docFrag.appendChild(this.node))};return DomComment.prototype={detach:function(){return this.node.parentNode.removeChild(this.node),this.node},teardown:function(destroy){destroy&&this.detach()},firstNode:function(){return this.node},toString:function(){return"<!--"+this.descriptor.f+"-->"}},DomComment}(config_types),render_DomFragment__DomFragment=function(types,matches,initFragment,insertHtml,Text,Interpolator,Section,Triple,Element,Partial,Component,Comment,circular){var DomFragment=function(options){options.pNode&&(this.docFrag=document.createDocumentFragment()),"string"==typeof options.descriptor?(this.html=options.descriptor,this.docFrag&&(this.nodes=insertHtml(this.html,options.pNode.tagName,this.docFrag))):initFragment(this,options)};return DomFragment.prototype={detach:function(){var len,i;if(this.nodes)for(i=this.nodes.length;i--;)this.docFrag.appendChild(this.nodes[i]);else if(this.items)for(len=this.items.length,i=0;len>i;i+=1)this.docFrag.appendChild(this.items[i].detach());return this.docFrag},createItem:function(options){if("string"==typeof options.descriptor)return new Text(options,this.docFrag);switch(options.descriptor.t){case types.INTERPOLATOR:return new Interpolator(options,this.docFrag);case types.SECTION:return new Section(options,this.docFrag);case types.TRIPLE:return new Triple(options,this.docFrag);case types.ELEMENT:return this.root.components[options.descriptor.e]?new Component(options,this.docFrag):new Element(options,this.docFrag);case types.PARTIAL:return new Partial(options,this.docFrag);case types.COMMENT:return new Comment(options,this.docFrag);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/RactiveJS/Ractive/issues. Thanks!")}},teardown:function(destroy){var node;if(this.nodes&&destroy)for(;node=this.nodes.pop();)node.parentNode.removeChild(node);else if(this.items)for(;this.items.length;)this.items.pop().teardown(destroy);this.nodes=this.items=this.docFrag=null},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(item){var index=item.index;return this.items[index+1]?this.items[index+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},toString:function(){var html,i,len,item;if(this.html)return this.html;if(html="",!this.items)return html;for(len=this.items.length,i=0;len>i;i+=1)item=this.items[i],html+=item.toString();return html},find:function(selector){var i,len,item,node,queryResult;if(this.nodes){for(len=this.nodes.length,i=0;len>i;i+=1)if(node=this.nodes[i],1===node.nodeType){if(matches(node,selector))return node;if(queryResult=node.querySelector(selector))return queryResult}return null}if(this.items){for(len=this.items.length,i=0;len>i;i+=1)if(item=this.items[i],item.find&&(queryResult=item.find(selector)))return queryResult;return null}},findAll:function(selector,query){var i,len,item,node,queryAllResult,numNodes,j;if(this.nodes){for(len=this.nodes.length,i=0;len>i;i+=1)if(node=this.nodes[i],1===node.nodeType&&(matches(node,selector)&&query.push(node),queryAllResult=node.querySelectorAll(selector)))for(numNodes=queryAllResult.length,j=0;numNodes>j;j+=1)query.push(queryAllResult[j])}else if(this.items)for(len=this.items.length,i=0;len>i;i+=1)item=this.items[i],item.findAll&&item.findAll(selector,query);return query},findComponent:function(selector){var len,i,item,queryResult;if(this.items){for(len=this.items.length,i=0;len>i;i+=1)if(item=this.items[i],item.findComponent&&(queryResult=item.findComponent(selector)))return queryResult;return null}},findAllComponents:function(selector,query){var i,len,item;if(this.items)for(len=this.items.length,i=0;len>i;i+=1)item=this.items[i],item.findAllComponents&&item.findAllComponents(selector,query);return query}},circular.DomFragment=DomFragment,DomFragment}(config_types,utils_matches,render_shared_initFragment,render_DomFragment_shared_insertHtml,render_DomFragment_Text,render_DomFragment_Interpolator,render_DomFragment_Section__Section,render_DomFragment_Triple,render_DomFragment_Element__Element,render_DomFragment_Partial__Partial,render_DomFragment_Component__Component,render_DomFragment_Comment,circular),Ractive_prototype_render=function(getElement,makeTransitionManager,preDomUpdate,postDomUpdate,DomFragment){return function(target,complete){var transitionManager;if(!this._initing)throw new Error("You cannot call ractive.render() directly!");this._transitionManager=transitionManager=makeTransitionManager(this,complete),this.fragment=new DomFragment({descriptor:this.template,root:this,owner:this,pNode:target}),preDomUpdate(this),target&&target.appendChild(this.fragment.docFrag),postDomUpdate(this),this._transitionManager=null,transitionManager.ready(),this.rendered=!0}}(utils_getElement,shared_makeTransitionManager,shared_preDomUpdate,shared_postDomUpdate,render_DomFragment__DomFragment),Ractive_prototype_renderHTML=function(warn){return function(){return warn("renderHTML() has been deprecated and will be removed in a future version. Please use toHTML() instead"),this.toHTML()}}(utils_warn),Ractive_prototype_toHTML=function(){return function(){return this.fragment.toString()}}(),Ractive_prototype_teardown=function(makeTransitionManager,clearCache){return function(complete){var keypath,transitionManager,previousTransitionManager;for(this.fire("teardown"),previousTransitionManager=this._transitionManager,this._transitionManager=transitionManager=makeTransitionManager(this,complete),this.fragment.teardown(!0);this._animations[0];)this._animations[0].stop();for(keypath in this._cache)clearCache(this,keypath);this._transitionManager=previousTransitionManager,transitionManager.ready()}}(shared_makeTransitionManager,shared_clearCache),Ractive_prototype_shared_add=function(isNumeric){return function(root,keypath,d){var value;if("string"==typeof keypath&&isNumeric(d)){if(value=root.get(keypath),void 0===value&&(value=0),isNumeric(value))root.set(keypath,value+d);else if(root.debug)throw new Error("Cannot add to a non-numeric value")}else if(root.debug)throw new Error("Bad arguments")}}(utils_isNumeric),Ractive_prototype_add=function(add){return function(keypath,d){add(this,keypath,void 0===d?1:d)}}(Ractive_prototype_shared_add),Ractive_prototype_subtract=function(add){return function(keypath,d){add(this,keypath,void 0===d?-1:-d)}}(Ractive_prototype_shared_add),Ractive_prototype_toggle=function(){return function(keypath){var value;if("string"==typeof keypath)value=this.get(keypath),this.set(keypath,!value);else if(this.debug)throw new Error("Bad arguments")}}(),Ractive_prototype_merge_mapOldToNewIndex=function(){return function(oldArray,newArray){var usedIndices,mapper,firstUnusedIndex,newIndices,changed;return usedIndices={},firstUnusedIndex=0,mapper=function(item,i){var index,start,len;start=firstUnusedIndex,len=newArray.length;do{if(index=newArray.indexOf(item,start),-1===index)return changed=!0,-1;start=index+1}while(usedIndices[index]&&len>start);return index===firstUnusedIndex&&(firstUnusedIndex+=1),index!==i&&(changed=!0),usedIndices[index]=!0,index},newIndices=oldArray.map(mapper),newIndices.unchanged=!changed,newIndices}}(),Ractive_prototype_merge_queueDependants=function(types){return function(keypath,deps,mergeQueue,updateQueue){var i,dependant;for(i=deps.length;i--;)dependant=deps[i],dependant.type===types.REFERENCE?dependant.update():dependant.keypath===keypath&&dependant.type===types.SECTION&&!dependant.inverted&&dependant.docFrag?mergeQueue[mergeQueue.length]=dependant:updateQueue[updateQueue.length]=dependant}}(config_types),Ractive_prototype_merge__merge=function(warn,isArray,clearCache,preDomUpdate,processDeferredUpdates,makeTransitionManager,notifyDependants,replaceData,mapOldToNewIndex,queueDependants){function stringify(item){return JSON.stringify(item)}function getIdentifier(str){return identifiers[str]||(identifiers[str]=function(item){return item[str]}),identifiers[str]}var identifiers={};return function(keypath,array,options){var currentArray,oldArray,newArray,identifier,lengthUnchanged,i,newIndices,mergeQueue,updateQueue,depsByKeypath,deps,transitionManager,previousTransitionManager,upstreamQueue,keys;if(currentArray=this.get(keypath),!isArray(currentArray)||!isArray(array))return this.set(keypath,array,options&&options.complete);if(lengthUnchanged=currentArray.length===array.length,options&&options.compare){if(options.compare===!0)identifier=stringify;else if("string"==typeof options.compare)identifier=getIdentifier(options.compare);else{if("function"!=typeof options.compare)throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)");identifier=options.compare}try{oldArray=currentArray.map(identifier),newArray=array.map(identifier)}catch(err){if(this.debug)throw err;warn("Merge operation: comparison failed. Falling back to identity checking"),oldArray=currentArray,newArray=array}}else oldArray=currentArray,newArray=array;if(newIndices=mapOldToNewIndex(oldArray,newArray),clearCache(this,keypath),replaceData(this,keypath,array),!newIndices.unchanged||!lengthUnchanged){for(previousTransitionManager=this._transitionManager,this._transitionManager=transitionManager=makeTransitionManager(this,options&&options.complete),mergeQueue=[],updateQueue=[],i=0;i<this._deps.length;i+=1)if(depsByKeypath=this._deps[i],depsByKeypath&&(deps=depsByKeypath[keypath])){for(queueDependants(keypath,deps,mergeQueue,updateQueue),preDomUpdate(this);mergeQueue.length;)mergeQueue.pop().merge(newIndices);for(;updateQueue.length;)updateQueue.pop().update()}for(processDeferredUpdates(this),upstreamQueue=[],keys=keypath.split(".");keys.length;)keys.pop(),upstreamQueue[upstreamQueue.length]=keys.join(".");notifyDependants.multiple(this,upstreamQueue,!0),oldArray.length!==newArray.length&&notifyDependants(this,keypath+".length",!0),this._transitionManager=previousTransitionManager,transitionManager.ready()}}}(utils_warn,utils_isArray,shared_clearCache,shared_preDomUpdate,shared_processDeferredUpdates,shared_makeTransitionManager,shared_notifyDependants,Ractive_prototype_shared_replaceData,Ractive_prototype_merge_mapOldToNewIndex,Ractive_prototype_merge_queueDependants),Ractive_prototype_detach=function(){return function(){return this.fragment.detach()}}(),Ractive_prototype_insert=function(getElement){return function(target,anchor){if(target=getElement(target),anchor=getElement(anchor)||null,!target)throw new Error("You must specify a valid target to insert into");target.insertBefore(this.detach(),anchor),this.fragment.pNode=target}}(utils_getElement),Ractive_prototype__prototype=function(get,set,update,updateModel,animate,on,off,observe,fire,find,findAll,findComponent,findAllComponents,render,renderHTML,toHTML,teardown,add,subtract,toggle,merge,detach,insert){return{get:get,set:set,update:update,updateModel:updateModel,animate:animate,on:on,off:off,observe:observe,fire:fire,find:find,findAll:findAll,findComponent:findComponent,findAllComponents:findAllComponents,renderHTML:renderHTML,toHTML:toHTML,render:render,teardown:teardown,add:add,subtract:subtract,toggle:toggle,merge:merge,detach:detach,insert:insert}}(Ractive_prototype_get__get,Ractive_prototype_set,Ractive_prototype_update,Ractive_prototype_updateModel,Ractive_prototype_animate__animate,Ractive_prototype_on,Ractive_prototype_off,Ractive_prototype_observe__observe,Ractive_prototype_fire,Ractive_prototype_find,Ractive_prototype_findAll,Ractive_prototype_findComponent,Ractive_prototype_findAllComponents,Ractive_prototype_render,Ractive_prototype_renderHTML,Ractive_prototype_toHTML,Ractive_prototype_teardown,Ractive_prototype_add,Ractive_prototype_subtract,Ractive_prototype_toggle,Ractive_prototype_merge__merge,Ractive_prototype_detach,Ractive_prototype_insert),extend_registries=function(){return["partials","transitions","events","components","decorators","data"]}(),extend_initOptions=function(){return["el","template","complete","modifyArrays","magic","twoway","lazy","append","preserveWhitespace","sanitize","stripComments","noIntro","transitionsEnabled","adaptors"]}(),extend_inheritFromParent=function(registries,initOptions,create){return function(Child,Parent){registries.forEach(function(property){Parent[property]&&(Child[property]=create(Parent[property]))}),initOptions.forEach(function(property){Child[property]=Parent[property]})}}(extend_registries,extend_initOptions,utils_create),extend_wrapMethod=function(){return function(method,superMethod){return/_super/.test(method)?function(){var result,_super=this._super;return this._super=superMethod,result=method.apply(this,arguments),this._super=_super,result}:method}}(),extend_utils_augment=function(){return function(target,source){var key;for(key in source)source.hasOwnProperty(key)&&(target[key]=source[key]);return target}}(),extend_inheritFromChildProps=function(registries,initOptions,wrapMethod,augment){var blacklist,blacklisted;return blacklist=registries.concat(initOptions),blacklisted={},blacklist.forEach(function(property){blacklisted[property]=!0}),function(Child,childProps){var key,member;registries.forEach(function(property){var value=childProps[property];value&&(Child[property]?augment(Child[property],value):Child[property]=value)}),initOptions.forEach(function(property){var value=childProps[property];void 0!==value&&(Child[property]="function"==typeof value&&"function"==typeof Child[property]?wrapMethod(value,Child[property]):childProps[property])});for(key in childProps)childProps.hasOwnProperty(key)&&!blacklisted[key]&&(member=childProps[key],Child.prototype[key]="function"==typeof member&&"function"==typeof Child.prototype[key]?wrapMethod(member,Child.prototype[key]):member)}}(extend_registries,extend_initOptions,extend_wrapMethod,extend_utils_augment),extend_extractInlinePartials=function(isObject,augment){return function(Child,childProps){isObject(Child.template)&&(Child.partials||(Child.partials={}),augment(Child.partials,Child.template.partials),childProps.partials&&augment(Child.partials,childProps.partials),Child.template=Child.template.main)}}(utils_isObject,extend_utils_augment),extend_conditionallyParseTemplate=function(errors,isClient,parse){return function(Child){var templateEl;if("string"==typeof Child.template){if(!parse)throw new Error(errors.missingParser);if("#"===Child.template.charAt(0)&&isClient){if(templateEl=document.getElementById(Child.template.substring(1)),!templateEl||"SCRIPT"!==templateEl.tagName)throw new Error("Could not find template element ("+Child.template+")");Child.template=parse(templateEl.innerHTML,Child)}else Child.template=parse(Child.template,Child)}}}(config_errors,config_isClient,parse__parse),extend_conditionallyParsePartials=function(errors,parse){return function(Child){var key;if(Child.partials)for(key in Child.partials)if(Child.partials.hasOwnProperty(key)&&"string"==typeof Child.partials[key]){if(!parse)throw new Error(errors.missingParser);Child.partials[key]=parse(Child.partials[key],Child)}}}(config_errors,parse__parse),extend_utils_clone=function(){return function(source){var key,target={};for(key in source)source.hasOwnProperty(key)&&(target[key]=source[key]);return target}}(),utils_extend=function(){return function(target){for(var prop,source,sources=Array.prototype.slice.call(arguments,1);source=sources.shift();)for(prop in source)source.hasOwnProperty(prop)&&(target[prop]=source[prop]);return target}}(),Ractive_initialise=function(isClient,errors,warn,create,extend,defineProperty,defineProperties,getElement,isObject,magicAdaptor,parse){var getObject,getArray,defaultOptions,registries;return getObject=function(){return{}},getArray=function(){return[]},defaultOptions=create(null),defineProperties(defaultOptions,{preserveWhitespace:{enumerable:!0,value:!1},append:{enumerable:!0,value:!1},twoway:{enumerable:!0,value:!0},modifyArrays:{enumerable:!0,value:!0},data:{enumerable:!0,value:getObject},lazy:{enumerable:!0,value:!1},debug:{enumerable:!0,value:!1},transitions:{enumerable:!0,value:getObject},decorators:{enumerable:!0,value:getObject},events:{enumerable:!0,value:getObject},noIntro:{enumerable:!0,value:!1},transitionsEnabled:{enumerable:!0,value:!0},magic:{enumerable:!0,value:!1},adaptors:{enumerable:!0,value:getArray}}),registries=["components","decorators","events","partials","transitions","data"],function(ractive,options){var key,template,templateEl,parsedTemplate;for(key in defaultOptions)void 0===options[key]&&(options[key]="function"==typeof defaultOptions[key]?defaultOptions[key]():defaultOptions[key]);if(defineProperties(ractive,{_initing:{value:!0,writable:!0},_guid:{value:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r,v;return r=16*Math.random()|0,v="x"==c?r:3&r|8,v.toString(16)})},_subs:{value:create(null),configurable:!0},_cache:{value:{}},_cacheMap:{value:create(null)},_deps:{value:[]},_depsMap:{value:create(null)},_patternObservers:{value:[]},_pendingResolution:{value:[]},_deferred:{value:{}},_evaluators:{value:create(null)},_twowayBindings:{value:{}},_transitionManager:{value:null,writable:!0},_animations:{value:[]},nodes:{value:{}},_wrapped:{value:create(null)},_liveQueries:{value:[]},_liveComponentQueries:{value:[]}}),defineProperties(ractive._deferred,{attrs:{value:[]},evals:{value:[]},selectValues:{value:[]},checkboxes:{value:[]},radios:{value:[]},observers:{value:[]},transitions:{value:[]},liveQueries:{value:[]},decorators:{value:[]},focusable:{value:null,writable:!0}}),ractive.adaptors=options.adaptors,ractive.modifyArrays=options.modifyArrays,ractive.magic=options.magic,ractive.twoway=options.twoway,ractive.lazy=options.lazy,ractive.debug=options.debug,ractive.magic&&!magicAdaptor)throw new Error("Getters and setters (magic mode) are not supported in this browser");if(options._parent&&defineProperty(ractive,"_parent",{value:options._parent}),options.el&&(ractive.el=getElement(options.el),!ractive.el&&ractive.debug))throw new Error("Could not find container element");if(options.eventDefinitions&&(warn("ractive.eventDefinitions has been deprecated in favour of ractive.events. Support will be removed in future versions"),options.events=options.eventDefinitions),registries.forEach(function(registry){ractive.constructor[registry]?ractive[registry]=extend(create(ractive.constructor[registry]||{}),options[registry]):options[registry]&&(ractive[registry]=options[registry])}),template=options.template,"string"==typeof template){if(!parse)throw new Error(errors.missingParser);if("#"===template.charAt(0)&&isClient){if(templateEl=document.getElementById(template.substring(1)),!templateEl)throw new Error("Could not find template element ("+template+")");parsedTemplate=parse(templateEl.innerHTML,options)}else parsedTemplate=parse(template,options)}else parsedTemplate=template;isObject(parsedTemplate)&&(extend(ractive.partials,parsedTemplate.partials),parsedTemplate=parsedTemplate.main),parsedTemplate&&1===parsedTemplate.length&&"string"==typeof parsedTemplate[0]&&(parsedTemplate=parsedTemplate[0]),ractive.template=parsedTemplate,extend(ractive.partials,options.partials),ractive.parseOptions={preserveWhitespace:options.preserveWhitespace,sanitize:options.sanitize,stripComments:options.stripComments},ractive.transitionsEnabled=options.noIntro?!1:options.transitionsEnabled,isClient&&!ractive.el&&(ractive.el=document.createDocumentFragment()),ractive.el&&!options.append&&(ractive.el.innerHTML=""),ractive.render(ractive.el,options.complete),ractive.transitionsEnabled=options.transitionsEnabled,ractive._initing=!1}}(config_isClient,config_errors,utils_warn,utils_create,utils_extend,utils_defineProperty,utils_defineProperties,utils_getElement,utils_isObject,Ractive_prototype_get_magicAdaptor,parse__parse),extend_initChildInstance=function(fillGaps,initOptions,clone,wrapMethod,initialise){return function(child,Child,options){initOptions.forEach(function(property){var value=options[property],defaultValue=Child[property];"function"==typeof value&&"function"==typeof defaultValue?options[property]=wrapMethod(value,defaultValue):void 0===value&&void 0!==defaultValue&&(options[property]=defaultValue)}),child.beforeInit&&child.beforeInit(options),initialise(child,options),child.init&&child.init(options)}}(utils_fillGaps,extend_initOptions,extend_utils_clone,extend_wrapMethod,Ractive_initialise),extend__extend=function(create,inheritFromParent,inheritFromChildProps,extractInlinePartials,conditionallyParseTemplate,conditionallyParsePartials,initChildInstance,circular){var Ractive;return circular.push(function(){Ractive=circular.Ractive}),function(childProps){var Child,Parent=this;return Child=function(options){initChildInstance(this,Child,options||{})},Child.prototype=create(Parent.prototype),Child.prototype.constructor=Child,inheritFromParent(Child,Parent),inheritFromChildProps(Child,childProps),conditionallyParseTemplate(Child),extractInlinePartials(Child,childProps),conditionallyParsePartials(Child),Child.extend=Parent.extend,Child}}(utils_create,extend_inheritFromParent,extend_inheritFromChildProps,extend_extractInlinePartials,extend_conditionallyParseTemplate,extend_conditionallyParsePartials,extend_initChildInstance,circular),Ractive__Ractive=function(svg,create,defineProperties,prototype,partialRegistry,adaptorRegistry,easingRegistry,Ractive_extend,parse,initialise,circular){var Ractive=function(options){initialise(this,options)};return defineProperties(Ractive,{prototype:{value:prototype},partials:{value:partialRegistry},adaptors:{value:adaptorRegistry},easing:{value:easingRegistry},transitions:{value:{}},events:{value:{}},components:{value:{}},decorators:{value:{}},svg:{value:svg},VERSION:{value:"0.3.9"}}),Ractive.eventDefinitions=Ractive.events,Ractive.prototype.constructor=Ractive,Ractive.delimiters=["{{","}}"],Ractive.tripleDelimiters=["{{{","}}}"],Ractive.extend=Ractive_extend,Ractive.parse=parse,circular.Ractive=Ractive,Ractive}(config_svg,utils_create,utils_defineProperties,Ractive_prototype__prototype,registries_partials,registries_adaptors,registries_easing,extend__extend,parse__parse,Ractive_initialise,circular),Ractive=function(Ractive,circular){for("undefined"!=typeof window&&window.Node&&!window.Node.prototype.contains&&window.HTMLElement&&window.HTMLElement.prototype.contains&&(window.Node.prototype.contains=window.HTMLElement.prototype.contains);circular.length;)circular.pop()();return Ractive}(Ractive__Ractive,circular);"undefined"!=typeof module&&module.exports?module.exports=Ractive:"function"==typeof define&&define.amd?define(function(){return Ractive}):global.Ractive=Ractive}("undefined"!=typeof window?window:this)},{}],8:[function(require,module){var process=module.exports={};process.nextTick=function(){var canSetImmediate="undefined"!=typeof window&&window.setImmediate,canPost="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(canSetImmediate)return function(f){return window.setImmediate(f)};if(canPost){var queue=[];return window.addEventListener("message",function(ev){var source=ev.source;if((source===window||null===source)&&"process-tick"===ev.data&&(ev.stopPropagation(),queue.length>0)){var fn=queue.shift();fn()}},!0),function(fn){queue.push(fn),window.postMessage("process-tick","*")}}return function(fn){setTimeout(fn,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")}},{}],9:[function(require,module,exports){function Buffer(subject,encoding,noZero){if(!(this instanceof Buffer))return new Buffer(subject,encoding,noZero);var type=typeof subject;if("base64"===encoding&&"string"===type)for(subject=stringtrim(subject);subject.length%4!==0;)subject+="=";var length;if("number"===type)length=coerce(subject);else if("string"===type)length=Buffer.byteLength(subject,encoding);else{if("object"!==type)throw new Error("First argument needs to be a number, array or string.");length=coerce(subject.length)}var buf;Buffer._useTypedArrays?buf=augment(new Uint8Array(length)):(buf=this,buf.length=length,buf._isBuffer=!0);var i;if(Buffer._useTypedArrays&&"function"==typeof Uint8Array&&subject instanceof Uint8Array)buf._set(subject);else if(isArrayish(subject))for(i=0;length>i;i++)buf[i]=Buffer.isBuffer(subject)?subject.readUInt8(i):subject[i];else if("string"===type)buf.write(subject,0,encoding);else if("number"===type&&!Buffer._useTypedArrays&&!noZero)for(i=0;length>i;i++)buf[i]=0;return buf}function _hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;assert(strLen%2===0,"Invalid hex string"),length>strLen/2&&(length=strLen/2);for(var i=0;length>i;i++){var byte=parseInt(string.substr(2*i,2),16);assert(!isNaN(byte),"Invalid hex string"),buf[offset+i]=byte}return Buffer._charsWritten=2*i,i}function _utf8Write(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(utf8ToBytes(string),buf,offset,length);return charsWritten}function _asciiWrite(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(asciiToBytes(string),buf,offset,length);return charsWritten}function _binaryWrite(buf,string,offset,length){return _asciiWrite(buf,string,offset,length)}function _base64Write(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(base64ToBytes(string),buf,offset,length);return charsWritten}function _base64Slice(buf,start,end){return base64.fromByteArray(0===start&&end===buf.length?buf:buf.slice(start,end))}function _utf8Slice(buf,start,end){var res="",tmp="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)buf[i]<=127?(res+=decodeUtf8Char(tmp)+String.fromCharCode(buf[i]),tmp=""):tmp+="%"+buf[i].toString(16);return res+decodeUtf8Char(tmp)}function _asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)ret+=String.fromCharCode(buf[i]);return ret}function _binarySlice(buf,start,end){return _asciiSlice(buf,start,end)}function _hexSlice(buf,start,end){var len=buf.length;
(!start||0>start)&&(start=0),(!end||0>end||end>len)&&(end=len);for(var out="",i=start;end>i;i++)out+=toHex(buf[i]);return out}function _readUInt16(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val;return littleEndian?(val=buf[offset],len>offset+1&&(val|=buf[offset+1]<<8)):(val=buf[offset]<<8,len>offset+1&&(val|=buf[offset+1])),val}}function _readUInt32(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val;return littleEndian?(len>offset+2&&(val=buf[offset+2]<<16),len>offset+1&&(val|=buf[offset+1]<<8),val|=buf[offset],len>offset+3&&(val+=buf[offset+3]<<24>>>0)):(len>offset+1&&(val=buf[offset+1]<<16),len>offset+2&&(val|=buf[offset+2]<<8),len>offset+3&&(val|=buf[offset+3]),val+=buf[offset]<<24>>>0),val}}function _readInt16(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val=_readUInt16(buf,offset,littleEndian,!0),neg=32768&val;return neg?-1*(65535-val+1):val}}function _readInt32(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val=_readUInt32(buf,offset,littleEndian,!0),neg=2147483648&val;return neg?-1*(4294967295-val+1):val}}function _readFloat(buf,offset,littleEndian,noAssert){return noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(offset+3<buf.length,"Trying to read beyond buffer length")),ieee754.read(buf,offset,littleEndian,23,4)}function _readDouble(buf,offset,littleEndian,noAssert){return noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(offset+7<buf.length,"Trying to read beyond buffer length")),ieee754.read(buf,offset,littleEndian,52,8)}function _writeUInt16(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"trying to write beyond buffer length"),verifuint(value,65535));var len=buf.length;if(!(offset>=len))for(var i=0,j=Math.min(len-offset,2);j>i;i++)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function _writeUInt32(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"trying to write beyond buffer length"),verifuint(value,4294967295));var len=buf.length;if(!(offset>=len))for(var i=0,j=Math.min(len-offset,4);j>i;i++)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function _writeInt16(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"Trying to write beyond buffer length"),verifsint(value,32767,-32768));var len=buf.length;offset>=len||(value>=0?_writeUInt16(buf,value,offset,littleEndian,noAssert):_writeUInt16(buf,65535+value+1,offset,littleEndian,noAssert))}function _writeInt32(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to write beyond buffer length"),verifsint(value,2147483647,-2147483648));var len=buf.length;offset>=len||(value>=0?_writeUInt32(buf,value,offset,littleEndian,noAssert):_writeUInt32(buf,4294967295+value+1,offset,littleEndian,noAssert))}function _writeFloat(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to write beyond buffer length"),verifIEEE754(value,3.4028234663852886e38,-3.4028234663852886e38));var len=buf.length;offset>=len||ieee754.write(buf,value,offset,littleEndian,23,4)}function _writeDouble(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+7<buf.length,"Trying to write beyond buffer length"),verifIEEE754(value,1.7976931348623157e308,-1.7976931348623157e308));var len=buf.length;offset>=len||ieee754.write(buf,value,offset,littleEndian,52,8)}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function augment(arr){return arr._isBuffer=!0,arr._get=arr.get,arr._set=arr.set,arr.get=BP.get,arr.set=BP.set,arr.write=BP.write,arr.toString=BP.toString,arr.toLocaleString=BP.toString,arr.toJSON=BP.toJSON,arr.copy=BP.copy,arr.slice=BP.slice,arr.readUInt8=BP.readUInt8,arr.readUInt16LE=BP.readUInt16LE,arr.readUInt16BE=BP.readUInt16BE,arr.readUInt32LE=BP.readUInt32LE,arr.readUInt32BE=BP.readUInt32BE,arr.readInt8=BP.readInt8,arr.readInt16LE=BP.readInt16LE,arr.readInt16BE=BP.readInt16BE,arr.readInt32LE=BP.readInt32LE,arr.readInt32BE=BP.readInt32BE,arr.readFloatLE=BP.readFloatLE,arr.readFloatBE=BP.readFloatBE,arr.readDoubleLE=BP.readDoubleLE,arr.readDoubleBE=BP.readDoubleBE,arr.writeUInt8=BP.writeUInt8,arr.writeUInt16LE=BP.writeUInt16LE,arr.writeUInt16BE=BP.writeUInt16BE,arr.writeUInt32LE=BP.writeUInt32LE,arr.writeUInt32BE=BP.writeUInt32BE,arr.writeInt8=BP.writeInt8,arr.writeInt16LE=BP.writeInt16LE,arr.writeInt16BE=BP.writeInt16BE,arr.writeInt32LE=BP.writeInt32LE,arr.writeInt32BE=BP.writeInt32BE,arr.writeFloatLE=BP.writeFloatLE,arr.writeFloatBE=BP.writeFloatBE,arr.writeDoubleLE=BP.writeDoubleLE,arr.writeDoubleBE=BP.writeDoubleBE,arr.fill=BP.fill,arr.inspect=BP.inspect,arr.toArrayBuffer=BP.toArrayBuffer,arr}function clamp(index,len,defaultValue){return"number"!=typeof index?defaultValue:(index=~~index,index>=len?len:index>=0?index:(index+=len,index>=0?index:0))}function coerce(length){return length=~~Math.ceil(+length),0>length?0:length}function isArray(subject){return(Array.isArray||function(subject){return"[object Array]"===Object.prototype.toString.call(subject)})(subject)}function isArrayish(subject){return isArray(subject)||Buffer.isBuffer(subject)||subject&&"object"==typeof subject&&"number"==typeof subject.length}function toHex(n){return 16>n?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(str){for(var byteArray=[],i=0;i<str.length;i++){var b=str.charCodeAt(i);if(127>=b)byteArray.push(str.charCodeAt(i));else{var start=i;b>=55296&&57343>=b&&i++;for(var h=encodeURIComponent(str.slice(start,i+1)).substr(1).split("%"),j=0;j<h.length;j++)byteArray.push(parseInt(h[j],16))}}return byteArray}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;i++)byteArray.push(255&str.charCodeAt(i));return byteArray}function base64ToBytes(str){return base64.toByteArray(str)}function blitBuffer(src,dst,offset,length){for(var i=0;length>i&&!(i+offset>=dst.length||i>=src.length);i++)dst[i+offset]=src[i];return i}function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return String.fromCharCode(65533)}}function verifuint(value,max){assert("number"==typeof value,"cannot write a non-number as a number"),assert(value>=0,"specified a negative value for writing an unsigned value"),assert(max>=value,"value is larger than maximum value for type"),assert(Math.floor(value)===value,"value has a fractional component")}function verifsint(value,max,min){assert("number"==typeof value,"cannot write a non-number as a number"),assert(max>=value,"value larger than maximum allowed value"),assert(value>=min,"value smaller than minimum allowed value"),assert(Math.floor(value)===value,"value has a fractional component")}function verifIEEE754(value,max,min){assert("number"==typeof value,"cannot write a non-number as a number"),assert(max>=value,"value larger than maximum allowed value"),assert(value>=min,"value smaller than minimum allowed value")}function assert(test,message){if(!test)throw new Error(message||"Failed assertion")}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192,Buffer._useTypedArrays=function(){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer)return!1;try{var arr=new Uint8Array(0);return arr.foo=function(){return 42},42===arr.foo()&&"function"==typeof arr.subarray}catch(e){return!1}}(),Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.isBuffer=function(b){return!(null===b||void 0===b||!b._isBuffer)},Buffer.byteLength=function(str,encoding){var ret;switch(str+="",encoding||"utf8"){case"hex":ret=str.length/2;break;case"utf8":case"utf-8":ret=utf8ToBytes(str).length;break;case"ascii":case"binary":case"raw":ret=str.length;break;case"base64":ret=base64ToBytes(str).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=2*str.length;break;default:throw new Error("Unknown encoding")}return ret},Buffer.concat=function(list,totalLength){if(assert(isArray(list),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===list.length)return new Buffer(0);if(1===list.length)return list[0];var i;if("number"!=typeof totalLength)for(totalLength=0,i=0;i<list.length;i++)totalLength+=list[i].length;var buf=new Buffer(totalLength),pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos),pos+=item.length}return buf},Buffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset))isFinite(length)||(encoding=length,length=void 0);else{var swap=encoding;encoding=offset,offset=length,length=swap}offset=Number(offset)||0;var remaining=this.length-offset;switch(length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining,encoding=String(encoding||"utf8").toLowerCase()){case"hex":return _hexWrite(this,string,offset,length);case"utf8":case"utf-8":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _utf8Write(this,string,offset,length);case"ascii":return _asciiWrite(this,string,offset,length);case"binary":return _binaryWrite(this,string,offset,length);case"base64":return _base64Write(this,string,offset,length);default:throw new Error("Unknown encoding")}},Buffer.prototype.toString=function(encoding,start,end){var self=this;if(encoding=String(encoding||"utf8").toLowerCase(),start=Number(start)||0,end=void 0!==end?Number(end):end=self.length,end===start)return"";switch(encoding){case"hex":return _hexSlice(self,start,end);case"utf8":case"utf-8":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _utf8Slice(self,start,end);case"ascii":return _asciiSlice(self,start,end);case"binary":return _binarySlice(self,start,end);case"base64":return _base64Slice(self,start,end);default:throw new Error("Unknown encoding")}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.copy=function(target,target_start,start,end){var source=this;if(start||(start=0),end||0===end||(end=this.length),target_start||(target_start=0),end!==start&&0!==target.length&&0!==source.length){assert(end>=start,"sourceEnd < sourceStart"),assert(target_start>=0&&target_start<target.length,"targetStart out of bounds"),assert(start>=0&&start<source.length,"sourceStart out of bounds"),assert(end>=0&&end<=source.length,"sourceEnd out of bounds"),end>this.length&&(end=this.length),target.length-target_start<end-start&&(end=target.length-target_start+start);for(var i=0;end-start>i;i++)target[i+target_start]=this[i+start]}},Buffer.prototype.slice=function(start,end){var len=this.length;if(start=clamp(start,len,0),end=clamp(end,len,len),Buffer._useTypedArrays)return augment(this.subarray(start,end));for(var sliceLen=end-start,newBuf=new Buffer(sliceLen,void 0,!0),i=0;sliceLen>i;i++)newBuf[i]=this[i+start];return newBuf},Buffer.prototype.get=function(offset){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(offset)},Buffer.prototype.set=function(v,offset){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(v,offset)},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||(assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"Trying to read beyond buffer length")),offset>=this.length?void 0:this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return _readUInt16(this,offset,!0,noAssert)},Buffer.prototype.readUInt16BE=function(offset,noAssert){return _readUInt16(this,offset,!1,noAssert)},Buffer.prototype.readUInt32LE=function(offset,noAssert){return _readUInt32(this,offset,!0,noAssert)},Buffer.prototype.readUInt32BE=function(offset,noAssert){return _readUInt32(this,offset,!1,noAssert)},Buffer.prototype.readInt8=function(offset,noAssert){if(noAssert||(assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"Trying to read beyond buffer length")),!(offset>=this.length)){var neg=128&this[offset];return neg?-1*(255-this[offset]+1):this[offset]}},Buffer.prototype.readInt16LE=function(offset,noAssert){return _readInt16(this,offset,!0,noAssert)},Buffer.prototype.readInt16BE=function(offset,noAssert){return _readInt16(this,offset,!1,noAssert)},Buffer.prototype.readInt32LE=function(offset,noAssert){return _readInt32(this,offset,!0,noAssert)},Buffer.prototype.readInt32BE=function(offset,noAssert){return _readInt32(this,offset,!1,noAssert)},Buffer.prototype.readFloatLE=function(offset,noAssert){return _readFloat(this,offset,!0,noAssert)},Buffer.prototype.readFloatBE=function(offset,noAssert){return _readFloat(this,offset,!1,noAssert)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return _readDouble(this,offset,!0,noAssert)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return _readDouble(this,offset,!1,noAssert)},Buffer.prototype.writeUInt8=function(value,offset,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"trying to write beyond buffer length"),verifuint(value,255)),offset>=this.length||(this[offset]=value)},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){_writeUInt16(this,value,offset,!0,noAssert)},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){_writeUInt16(this,value,offset,!1,noAssert)},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){_writeUInt32(this,value,offset,!0,noAssert)},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){_writeUInt32(this,value,offset,!1,noAssert)},Buffer.prototype.writeInt8=function(value,offset,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"Trying to write beyond buffer length"),verifsint(value,127,-128)),offset>=this.length||(value>=0?this.writeUInt8(value,offset,noAssert):this.writeUInt8(255+value+1,offset,noAssert))},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){_writeInt16(this,value,offset,!0,noAssert)},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){_writeInt16(this,value,offset,!1,noAssert)},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){_writeInt32(this,value,offset,!0,noAssert)},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){_writeInt32(this,value,offset,!1,noAssert)},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){_writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){_writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){_writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){_writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.fill=function(value,start,end){if(value||(value=0),start||(start=0),end||(end=this.length),"string"==typeof value&&(value=value.charCodeAt(0)),assert("number"==typeof value&&!isNaN(value),"value is not a number"),assert(end>=start,"end < start"),end!==start&&0!==this.length){assert(start>=0&&start<this.length,"start out of bounds"),assert(end>=0&&end<=this.length,"end out of bounds");for(var i=start;end>i;i++)this[i]=value}},Buffer.prototype.inspect=function(){for(var out=[],len=this.length,i=0;len>i;i++)if(out[i]=toHex(this[i]),i===exports.INSPECT_MAX_BYTES){out[i+1]="...";break}return"<Buffer "+out.join(" ")+">"},Buffer.prototype.toArrayBuffer=function(){if("function"==typeof Uint8Array){if(Buffer._useTypedArrays)return new Buffer(this).buffer;for(var buf=new Uint8Array(this.length),i=0,len=buf.length;len>i;i+=1)buf[i]=this[i];return buf.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype},{"base64-js":10,ieee754:11}],10:[function(require,module){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function decode(elt){var code=elt.charCodeAt(0);return code===PLUS?62:code===SLASH?63:NUMBER>code?-1:NUMBER+10>code?code-NUMBER+26+26:UPPER+26>code?code-UPPER:LOWER+26>code?code-LOWER+26:void 0}function b64ToByteArray(b64){function push(v){arr[L++]=v}var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0,arr=new Arr(3*b64.length/4-placeHolders),l=placeHolders>0?b64.length-4:b64.length;var L=0;for(i=0,j=0;l>i;i+=4,j+=3)tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3)),push((16711680&tmp)>>16),push((65280&tmp)>>8),push(255&tmp);return 2===placeHolders?(tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4,push(255&tmp)):1===placeHolders&&(tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2,push(tmp>>8&255),push(255&tmp)),arr}function uint8ToBase64(uint8){function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(63&num)}var i,temp,length,extraBytes=uint8.length%3,output="";for(i=0,length=uint8.length-extraBytes;length>i;i+=3)temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output+=tripletToBase64(temp);switch(extraBytes){case 1:temp=uint8[uint8.length-1],output+=encode(temp>>2),output+=encode(temp<<4&63),output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1],output+=encode(temp>>10),output+=encode(temp>>4&63),output+=encode(temp<<2&63),output+="="}return output}var Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,PLUS=("0".charCodeAt(0),"+".charCodeAt(0)),SLASH="/".charCodeAt(0),NUMBER="0".charCodeAt(0),LOWER="a".charCodeAt(0),UPPER="A".charCodeAt(0);module.exports.toByteArray=b64ToByteArray,module.exports.fromByteArray=uint8ToBase64}()},{}],11:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?0/0:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=0>value||0===value&&0>1/value?1:0;for(value=Math.abs(value),isNaN(value)||1/0===value?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},{}]},{},[1]);